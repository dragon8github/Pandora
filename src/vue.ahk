
!v::

  Menu, vuexmenubasic, Add, vuex.modules, VueHandler
  Menu, vuexmenubasic, Add, vuex.action, VueHandler
  Menu, vuexmenubasic, Add, this.$store.commit, VueHandler
  Menu, vuexmenubasic, Add, this.$store.dispatch, VueHandler
  Menu, vuexmenubasic, Add, this.$store.dispatch('StreetIndex/activeStreet'`, streetName`, `{ root: true `}), VueHandler
  Menu, vuexmenubasic, Add, this.$store.state.list.loading, VueHandler
  Menu, vuexmenubasic, Add, this.$store.getters['app/master'], VueHandler

    
  Menu, vuerouterhock, Add, 组件钩子beforeRouteLeave, VueHandler
  Menu, vuerouterhock, Add, 组件钩子beforeRouteEnter, VueHandler
  Menu, vuerouterhock, Add, 全局钩子router.afterEach, VueHandler
  Menu, vuerouterhock, Add, 全局钩子router.beforeEach, VueHandler

  Menu, Vuerouter, Add, router.init, VueHandler
  Menu, Vuerouter, Add, 获取参数this.$route.params.id, VueHandler
  Menu, Vuerouter, Add, this.$router.push('index'), VueHandler
  Menu, Vuerouter, Add, this.$router.replace('index'), VueHandler
  Menu, Vuerouter, Add, this.$router.back(), VueHandler
  Menu, Vuerouter, Add, this.$router.currentRoute.meta.step, VueHandler
  Menu, Vuerouter, Add, router.js 404 定义, VueHandler
  Menu, Vuerouter, Add, router路由钩子大全, :vuerouterhock  
  Menu, Vuerouter, Add, <router-view></router-view>, VueHandler
  Menu, Vuerouter, Add, <router-link></router-link>, VueHandler


  Menu, Vuerouter, Add, 路由 Layout 布局示例, VueHandler
  Menu, Vuerouter, Add, 动态路由：router.addRoutes, VueHandler
  Menu, Vuerouter, Add, next() 的三种参数形态, VueHandler
  Menu, Vuerouter, Add, 路由验证token并跳转登录与重定向的套路, VueHandler
  Menu, Vuerouter, Add, 如果带参数 :id ，那么 children 不需要 /, VueHandler

  Menu, Vuerouter, Add
  Menu, Vuerouter, Add

  Menu, Vuerouter, Add, 滚动行为：scrollBehavior, VueHandler
  Menu, Vuerouter, Add, 用 beforeRouteUpdate 代替 watch.$route, VueHandler

  

  Menu, VueMenu, Add, /deep/ 改为 ::v-deep, VueHandler
  Menu, VueMenu, Add, vue.test, VueHandler
  Menu, VueMenu, Add, vue.router, :Vuerouter
  Menu, VueMenu, Add, vuex 必知必会基本功, :vuexmenubasic
  Menu, VueMenu, Add, vue-cli 安装与预览单文件, VueHandler
  Menu, VueMenu, Add, pop超强！Vue 快速定位文件解决方案, VueHandler
  Menu, VueMenu, Add, import { mapState`, mapActions`, mapMutations`, mapGetters } from 'vuex', VueHandler  
  Menu, VueMenu, Add, this.$store.subscribe, VueHandler
  Menu, VueMenu, Add, store.js, VueHandler
  Menu, VueMenu, Add, createStore 方案, VueHandler
  Menu, VueMenu, Add, 使用 Vue.observable 轻量级管理状态, VueHandler
  Menu, VueMenu, Add, 🏆 vueFactory - 工厂模式和批量实例化注入Body , VueHandler
  

  Menu, VueMenu, Add, , VueHandler
  Menu, VueMenu, Add, , VueHandler
  
  Menu, vuewatch, Add, vue.watch, VueHandler
  Menu, vuewatch, Add, vue.watch.deep, VueHandler
  Menu, vuewatch, Add, vue.watch-vuex, VueHandler
  Menu, vuewatch, Add, vue.watch-$route, VueHandler
  Menu, vuewatch, Add, vue.watch-deep-$route, VueHandler
  Menu, vuewatch, Add, vue.watch.deep-$props, VueHandler
  
  
  Menu, vuebase, Add, :style='{}' 表达式, VueHandler
  Menu, vuebase, Add, vue.style, VueHandler
  Menu, vuebase, Add, vue.computed: get/set, VueHandler
  Menu, vuebase, Add, $refs, VueHandler
  Menu, vuebase, Add, vue.props, VueHandler
  Menu, vuebase, Add, vue.mixins, VueHandler
  

  
  
  Menu, vuecognition, Add, watch props 与 data 结合来初始化, VueHandler
  Menu, vuecognition, Add, 如何获取vue组件的name属性？ this.$options.name, VueHandler


  Menu, vuetranstion, Add, <transition>, VueHandler
  Menu, vuetranstion, Add, <transition v-on...>, VueHandler
  Menu, vuetranstion, Add, <transition-group>, VueHandler
  Menu, vuetranstion, Add, <transition>与路由动画, VueHandler

  Menu, vuetranstion, Add,
  Menu, vuetranstion, Add,


  Menu, vuetranstion, Add, vue 官方列表动画 <transition-group> , VueHandler
  Menu, vuetranstion, Add, vue 动画组件<transition> + animate.css, VueHandler
  Menu, vuetranstion, Add, vue animate4.0.css, VueHandler
  Menu, vuetranstion, Add, [金志]很喜欢的列表 animate.css 动画, VueHandler

  Menu, VueMenu, Add, vue 认知, :vuecognition
  Menu, VueMenu, Add, vue 必知必会, :vuebase
  Menu, VueMenu, Add, vue.config.js, VueHandler
  Menu, VueMenu, Add, proxyTable 配置, VueHandler
  Menu, VueMenu, Add, v-slot 插槽, VueHandler
  Menu, VueMenu, Add, filters 过滤器的使用, VueHandler
  Menu, VueMenu, Add, v-cloak 用来解决渲染之前的尴尬期, VueHandler
  Menu, VueMenu, Add, 动态组件：<component :is='xxx'></component>, VueHandler
  Menu, VueMenu, Add, provide/inject：上下文, VueHandler
  Menu, VueMenu, Add, props.sync与$emit('update'), VueHandler
  Menu, VueMenu, Add, 🚀 践行组件化开发的新方案： test.vue, VueHandler
  Menu, VueMenu, Add, 🚀 vue.directive 指令, VueHandler
  Menu, VueMenu, Add, 🐤 vue.rules 尝试建立一套验证规则体系, VueHandler
  Menu, VueMenu, Add, 🎁 findComponentByName：寻找上下游组件, VueHandler
  Menu, VueMenu, Add, 🔔 dispatch 和 broadcast: 跨组件通讯解决方案, VueHandler
  

  Menu, VueMenu, Add, vue.watch的N种套路, :vuewatch
  Menu, VueMenu, Add, vue 动画组件<transition>, :vuetranstion
  




  Menu, VueMenu, Add, vue 异步组件加载import, VueHandler
  Menu, VueMenu, Add, vue Composition API setup, VueHandler
  Menu, VueMenu, Add, import '@vue/composition-api', VueHandler
  Menu, VueMenu, Add, 用 beforeRouteUpdate 代替 watch.$route, VueHandler
  Menu, VueMenu, Add, render 无渲染组件（状态组件）, VueHandler
  
  
  Menu, VueMenu, Add, , VueHandler
  Menu, VueMenu, Add, , VueHandler
  
  Menu, VueMenu, Add, v-tooltip, VueHandler
  Menu, VueMenu, Add, <keep-alive>: 这里的 name 是组件的不是 router 的, VueHandler
  Menu, VueMenu, Add, this.$msgbox 与 vnode 语法, VueHandler
  Menu, VueMenu, Add, render(h), VueHandler
  Menu, VueMenu, Add, render(h) jsx用法, VueHandler
  Menu, VueMenu, Add, this.$set 深度赋值, VueHandler
  Menu, VueMenu, Add, this.$root.$on 事件总线, VueHandler
  Menu, VueMenu, Add, beforeRouteLeave 滚动条位置记录, VueHandler
  
  Menu, VueMenu, Add, , VueHandler
  Menu, VueMenu, Add, , VueHandler
  
  Menu, vuesolution, Add, loader 指令, VueHandler  
  Menu, vuesolution, Add, v-waves 波浪指令, VueHandler  
  Menu, vuesolution, Add, $deepSet深度赋值解决方案, VueHandler  
  Menu, vuesolution, Add, vue双向数据模拟, VueHandler  
  Menu, vuesolution, Add, ElementUI 按需引入教程, VueHandler  
  Menu, vuesolution, Add, npm rebuild node-sass, VueHandler
  Menu, vuesolution, Add, 组件复用的新套路: 合并配置，来代替mixin方案, VueHandler
  Menu, vuesolution, Add, Vue.config.productionTip = false, VueHandler
  Menu, vuesolution, Add, setTitle: 解决微信、QQ、闪银等内置浏览器单页应用无法刷新title的问题, VueHandler
  
  Menu, vuesolution, Add
  Menu, vuesolution, Add
  
  Menu, vuesolution, Add, 无限滚动 + 无缝滚动插件, VueHandler
  Menu, vuesolution, Add, Vue 进度条组件, VueHandler
  Menu, vuesolution, Add, click-outside 指令, VueHandler
  Menu, vuesolution, Add, DataV - 顶部一闪过儿的loading封装, VueHandler
  Menu, vuesolution, Add, 我的layer组件：通过js来操作.vue组件，只有插入任何位置, VueHandler
  Menu, vuesolution, Add, svg-spinner-loader.vue, VueHandler
  Menu, vuesolution, Add, myprogress组件, VueHandler
  Menu, vuesolution, Add, msgbox组件, VueHandler
  Menu, vuesolution, Add, NProgress页面加载组件, VueHandler
  Menu, vuesolution, Add, vue-drag-drop, VueHandler
  Menu, vuesolution, Add, vue-drag-resize, VueHandler
  Menu, vuesolution, Add, Vue 404 页面, VueHandler
  Menu, vuesolution, Add, 宇宙流星雨canvas, VueHandler
  Menu, vuesolution, Add, el-menu简易封装, VueHandler  
  Menu, vuesolution, Add, el-enum简易封装, VueHandler  
  Menu, vuesolution, Add, vuedraggable 示例demo, VueHandler  
  Menu, vuesolution, Add, 我的 transition-group 列表动画示例, VueHandler  
  Menu, vuesolution, Add, elementUI dispatch 组件传播攻略, VueHandler
  Menu, vuesolution, Add, 我的 CardNumber 数字翻滚器, VueHandler  
  Menu, vuesolution, Add, require.context 自动import 解决方案, VueHandler  
  
  Menu, vuesolution, Add
  Menu, vuesolution, Add
  
  Menu, vuesolution, Add, collapse折叠面板, VueHandler  
  Menu, vuesolution, Add, 同一组件修改 class 来修改样式的解决方案：x-scoped, VueHandler  
  
  Menu, VueMenu, Add, Vue 解决方案和组件, :vuesolution
  
  
  Menu, VueMenu, Show
  Menu, vuewatch, DeleteAll
  Menu, vuewatch, DeleteAll
  Menu, Vuerouter, DeleteAll
  Menu, vuerouterhock, DeleteAll
  Menu, vuesolution, DeleteAll
  Menu, vuecognition, DeleteAll
  Menu, VueMenu, DeleteAll
  Menu, vuetranstion, DeleteAll

return

VueHandler:
v := A_ThisMenuItem
Var :=

;@1
if (v == "") {
Var = 
(
)
}

if (v == "vueFactory - 工厂模式和批量实例化注入Body") {
Var =
(
import Vue from 'vue'
import card from './pointCard.vue'

// 活跃作业点: clockIn   
// 打卡作业点: lively 
export const cardFactory = (type = 'lively', history = [], item = {}) => {
    const cardConstructor = Vue.extend(card)
    return new cardConstructor({
        el: document.createElement('div'),
        propsData: { type, history, item }
    })
}
---
import store from "@/store"
import { waitWhen } from "@/utils/utils"

import pctable1 from './pctable1.vue'
import pctable2 from './pctable2.vue'
import pctable3 from './pctable3.vue'

// 你当然也可以用动态引入来注册 - require.context
const tables = { pctable1, pctable2, pctable3 }

export const register = Vue => {
    // 实例大集合
    const $targets = []

    for (let [key, val] of Object.entries(tables)) {
        // 挂载组件
        const $target = new Vue(val).$mount()
        // 注入 store，如果你想注入 router 也是一样的道理
        $target.$store = store
        // 使用 $ 为前缀的命名，譬如 window.$table1、 this.$table1
        const $name = '$' + key
        // 注册到全局和 Vue 实例中去
        window[$name] = Vue.prototype[$name] = $target
        // 插入到数组中，稍后等时机成熟再插入到 DOM body 中
        $targets.push($target)
    }

    waitWhen(() => document.getElementById('pcMap')).then(container => {
        $targets.map($target => container.appendChild($target.$el))
    }, 10000)
}
)
txtit(Var)
return
}


if (v == "vue.test") {
Var =
(
// src/components/__tests__/Item.spec.js

import { shallowMount } from '@vue/test-utils'
import Item from '../Item.vue'

beforeEach(() => {
  jest.useFakeTimers()
})


test('base test', () => {
    const item = { url: 'http://www.baidu.com', title: 'baidu' }

    const wrapper = shallowMount(Item, {
        propsData: { item }
    })

    // # find()
    const a = wrapper.find('a')

    // # text()
    expect(a.text()).toContain(item.title)

    // # attributes()
    expect(a.attributes().href).toBe(item.url)

    // # props()
    expect(wrapper.props().item.url).toBe(item.url)

    // # classes()
    expect(wrapper.classes()).toContain('Item')

    // # element.style（必须是内敛样式而不是 css）
    expect(wrapper.element.style.width).toBe('100`%')

    // # not
    expect(wrapper.classes()).not.toContain('hide')

    // # 结合 jest.useFakeTimers() 推进 timer
    jest.runTimersToTime(1000)

    // # 测试 @onClick 与 this.$emit('onClick')
    expect(wrapper.emitted('onClick')).toHaveLength(1)
})

test('base test', () => {
    const items = [{}, {}, {}]

    const wrapper = shallowMount(Items, {
        props: { items }
    })

    // # findAllComponents(Item)
    // or: expect(wrapper.findAllComponents(Item)).toHaveLength(items.length)
    expect(wrapper.findAllComponents(Item).length).toBe(items.length)
})
---
describe('Item.vue', () => {
    test('base test', () => {
        const item = { url: 'http://www.baidu.com', title: 'baidu' }

        // 间谍函数
        const $bar = { start: jest.fn() }

        const wrapper = shallowMount(Item, {
            propsData: { item },
            // 通过 mocks 定义组件的上下文，通常是 $route、 $store 这些重要的内容
            mocks: { $bar }
        })

        // trigger 触发 DOM 事件
        wrapper.find('a').trigger('click')

        // toHaveBeenCalledTimes(n) / toHaveBeenCalled()
        expect($bar.start).toHaveBeenCalledTimes(1)
    })
})
---
// https://vue-test-utils.vuejs.org/zh/api/wrapper/#contains
// https://jestjs.io/docs/en/expect
import flushPromises from "flush-promises"
import { shallowMount } from '@vue/test-utils'
import Items from "../Items.vue"
import Item from "../Item.vue"
import { fetchData } from "@/apis/apis"

// src/apis/__mocks__/apis.js
jest.mock('@/apis/apis.js')

describe('Items.vue', () => {
    test('base test', async () => {
        const items = [{}, {}, {}]
        // mock
        fetchData.mockResolvedValueOnce(items)

        const wrapper = shallowMount(Items)
        await flushPromises()

        const lists = wrapper.findAllComponents(Item)
        expect(lists).toHaveLength(items.length)
    })
})
---
import Vuex from "vuex"
import { createLocalVue, shallowMount } from '@vue/test-utils'
import Item from "../Item.vue";

const localVue = createLocalVue()
localVue.use(Vuex)

describe('Item.vue', () => {
    let store;
    
    beforeEach(() => {
        store = new Vuex.Store()
        store.dispatch = jest.fn()
    })
    
    afterEach(() => {
        store = null
    })

    test('base test', () => {
        const item = { url: 'http://www.baidu.com', title: 'baidu' }

        const wrapper = shallowMount(Item, {
            store, 
            localVue,
            propsData: { item }
        })

        wrapper.find('a').trigger('click')

        // ...mapActions(['addPost'])
        // this.addPost(item)
        expect(store.dispatch).toHaveBeenCalledWith('addPost', item)
    })
})
)
txtit(Var)
return
}

if (v == "render 无渲染组件（状态组件）") {
Var =
(
Vue.component('counter', {
  name: 'counter',
  data() {
    return { count: 0 };
  },
  methods: {
    inc() {
      this.count += 1;
    },
    dec() {
      this.count -= 1;
    },
  },
  render() {
    return this.$scopedSlots.default({
      count: this.count,
      inc: this.inc,
      dec: this.dec,
    });
  },
});

new Vue({
  el: '#app',
})
---
<div id="app">
  <counter>
     <div class="layout-1" slot-scope="{ count, inc, dec }">
        <div>You have {{ count }} bannas</div>
        <div class="buttons-1">
          <div class="btn" @click="inc">+</div>
          <div class="btn"@click="dec">-</div>
       </div>
    </div>
  </counter>
  <counter>
     <div class="layout-2" slot-scope="{ count, inc, dec }">
        <div>You have {{ count }} apples</div>
        <div class="buttons-2">
          <div class="btn" @click="inc">+</div>
          <div class="btn"@click="dec">-</div>
       </div>
    </div>
  </counter>
</div>
)
txtit(Var)
return
}


if (v == "v-tooltip") {
_send("v-tooltip", true, true)
return
}

if (v == "vue 官方列表动画 <transition-group>") {
Var =
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Vue -->
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <!-- element -->
    <script src='https://cdn.staticfile.org/element-ui/2.10.1/index.js'></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.10.1/theme-chalk/index.css">
    <!-- mockjs -->
    <script src="https://cdn.staticfile.org/Mock.js/1.0.0/mock-min.js"></script>
    <!-- axios -->
    <script src="https://libs.cdnjs.net/axios/0.19.2/axios.min.js"></script>
    <!-- tailwind：https://tailwindcss.com/docs/width -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/tailwindcss/1.1.4/tailwind.min.css">
    <style>
    html, body{
        margin: 0;
        padding: 0;
        height: 100`%; /* 注意，应该是html和body同时设置才可以 */
    }

    #app {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .list-item {
      display: inline-block;
      margin-right: 10px;
    }
    .list-enter-active, .list-leave-active {
      transition: all 1s;
    }
    .list-enter, .list-leave-to
    /* .list-leave-active for below version 2.1.8 */ {
      opacity: 0;
      transform: translateY(-30px);
    }
    </style>
</head>

<body>
    <div id="app">
       <transition-group name="list" tag='div'>
          <div v-for='(item, index) in items' :key='item.book_id' class='item py-2 pl-4 pr-2 flex'>
            祝贺 <div class="highlight">{{ item.book_name }}</div> 团购成功
          </div>
        </transition-group>
    </div>
</body>
<script>
Mock.mock("/book/list", "get", {
    "booklist|10": [
        {"book_id|+1": 101, "book_name": "@ctitle", "book_price|50-100.1-2": 0, "book_time": "@date('yyyy-mm-dd')"}
    ]
})

var vue = new Vue({
    el: '#app',
    data: {
        items: [],
        text: '',
        obj: {},
    },
    beforeMount () {
        axios.get("/book/list").then(res => {
            this.items = res.data.booklist
        })

        setInterval(() => {
            const data = [{ book_name: Math.random(), book_id: Math.random() }, { book_name: Math.random(), book_id: Math.random() }, { book_name: Math.random(), book_id: Math.random() }, { book_name: Math.random(), book_id: Math.random() }]
            this.items.unshift(...data)
        }, 2500)
    }
})
</script>
</html>
)
}

if (v == "vue-cli 安装与预览单文件") {
Var =
(
cnpm install -g @vue/cli @vue/cli-service-global
---
vue serve test.vue
)
txtit(Var)
return
}

if (v == "loader 指令") {
_send("loader.vue", true, true)
return
}

if (v == "v-waves 波浪指令") {
Var =
(
import './waves.css';

const vueWaves = {};
vueWaves.install = (Vue, options = {}) => {
  Vue.directive('waves', {
    bind(el, binding) {
      el.addEventListener('click', e => {
        const customOpts = Object.assign(options, binding.value);
        const opts = Object.assign({
            ele: el, // 波纹作用元素
            type: 'hit', // hit点击位置扩散center中心点扩展
            color: 'rgba(255, 255, 255, 0.35)' // 波纹颜色
          }, customOpts),
          target = opts.ele;
        if (target) {
          target.style.position = 'relative';
          target.style.overflow = 'hidden';
          const rect = target.getBoundingClientRect();
          let ripple = target.querySelector('.waves-ripple');
          if (!ripple) {
            ripple = document.createElement('span');
            ripple.className = 'waves-ripple';
            ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + 'px';
            target.appendChild(ripple);
          } else {
            ripple.className = 'waves-ripple';
          }
          switch (opts.type) {
            case 'center':
              ripple.style.top = (rect.height / 2 - ripple.offsetHeight / 2) + 'px';
              ripple.style.left = (rect.width / 2 - ripple.offsetWidth / 2) + 'px';
              break;
            default:
              ripple.style.top = (e.pageY - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop) + 'px';
              ripple.style.left = (e.pageX - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft) + 'px';
          }
          ripple.style.backgroundColor = opts.color;
          ripple.className = 'waves-ripple z-active';
          return false;
        }
      }, false);
    }
  })
};

export default vueWaves;
---
.waves-ripple {
    position: absolute;
    border-radius: 100`%;
    background-color: rgba(0, 0, 0, 0.15);
    background-clip: padding-box;
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0);
    opacity: 1;
}

.waves-ripple.z-active {
    opacity: 0;
    -webkit-transform: scale(2);
    -ms-transform: scale(2);
    transform: scale(2);
    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;
}
---
# usage

main.js
```JavaScript
Vue.use(waves)
```

App.vue
```javascript
<div class="item" v-waves></div>
```	
)
txtit(Var)
}

if (v == "pop超强！Vue 快速定位文件解决方案") {
_send("pop", true, true)
}

if (v == "[金志]很喜欢的列表 animate.css 动画") {
Var =
(
<ul class="w-100 h-100">
  <li class="animate__animated animate__backInLeft" :style="{'animation-delay':``${index * 0.05}s``}" v-for="(item, index) in datalist.slice(0,8)" :key="index">
      <span>{{ index + 1 }}</span>
      <span>{{item.NAME}}</span>
      <span>{{item.NUM1}}</span>
      <span>{{item.NUM2}}</span>
  </li>
</ul>
)
}

if (v == "使用 Vue.observable 轻量级管理状态") {
Var =
(
// store.js
import Vue from "vue"

const state = Vue.observable({ counter: 0 })
export const increment = () => state.counter++
export const decrement = () => state.counter--
export default state;
---
// count.vue
<template>
    <div>
        <p>The counter value is {{counter}}</p>
        <button @click="inc">+</button>
        <button @click="dec">-</button>
    </div>
</template>
<script>
  import store, { increment, decrement } from "./store"
  
  export default {
    computed: {
      counter() { return store.counter }
    }, 
    methods: {
      inc() { increment() },
      dec() { decrement() },
    }
  };
</script>
)
txtit(Var)
return
}

if (v == "createStore 方案") {
_send("createStore", true, true)
return
}

if (v == "render(h)") {
_send("render", true, true)
return
}


if (v == "store.js") {
_send("store.js", true, true)
return
}

if (v == "vue + vite") {
Var =
(
npx create-vite-app fuck-vite
)
p(Var)
return
}

if (v == "vue animate4.0.css") {
Var =
(
// animate.css 4.x 版本开始支持 BEM 了
// https://animate.style/
// import 'animate.css'

<div class="item animate__animated animate__fadeInDown" v-for='(item, index) in items' :key='item.id' :class='{ new: index === 0 }' style='--animate-duration: 1.5s'>
    <div class='flex flex-between flex-column-center'>
        <div class="type">{{ item.type }}</div>
        <div class="time">{{ index === 0 ? '最新' : item.time }}</div>
    </div>
    <div class="title">{{ item.title }}</div>
</div>
)
txtit(Var)
return
}

if (v == "用 beforeRouteUpdate 代替 watch.$route") {
Var =
(
beforeRouteUpdate(to, from, next) {
  console.log(20200513153623, to, from)

  if (from.meta.keepAlive) {
    cache[from.name] = to.name;
    // 打印记录
    console.log("cache", cache);
    // 重构缓存规则
    this.shouldCache = Object.keys(cache).join(",") || "none";
  }

  // 如果跳转的目标有缓存
  if (Object.keys(cache).includes(to.name)) {
    // 如果缓存的目标和我不一致
    if (cache[to.name] != from.name) {
      console.log("clear");
      // 宁死不屈
      delete cache[to.name];
      // 重构缓存规则
      this.shouldCache = Object.keys(cache).join(",") || "none";
    }
  }

  next();
},
)
}

if (v == "import '@vue/composition-api'") {
Var =
(
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from '@vue/composition-api'
)
}

if (v == "vue Composition API setup") {
_send("vue.setup", true, true)
return
}

if (v == "🚀 践行组件化开发的新方案： test.vue") {
_send("test.vue", true, true)
return
}

if (v == "滚动行为：scrollBehavior") {
Var = 
(
const router = new VueRouter({
    routes: [...],
    scrollBehavior(to, from, savedPosition) {
      // 滚动到锚点
      // return { selector: to.hash }

      // 滚动到之前的位置
      if (savedPosition) return savedPosition

      // 滚动到顶部
      return { x: 0, y: 0 }
    }
`)}
)
}

if (v == "🔔 dispatch 和 broadcast: 跨组件通讯解决方案") {
_send("dispatch", true, true)
return
}


if (v == "🎁 findComponentByName：寻找上下游组件") {
_send("findc", true, true)
return
}

if (v == "vue 异步组件加载import") {
_send("import.async", true, true)
return
}

if (v == "🐤 vue.rules 尝试建立一套验证规则体系") {
_send("vue.rules", true, true)
return
}

if (v == "如果带参数 :id ，那么 children 不需要 /") {
Var = 
(
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User,
      children: [
        {
          // UserProfile will be rendered inside User's <router-view>
          // when /user/:id/profile is matched
          path: 'profile',
          component: UserProfile
        },
        {
          // UserPosts will be rendered inside User's <router-view>
          // when /user/:id/posts is matched
          path: 'posts',
          component: UserPosts
        }
      ]
    }
  ]
})
)
}

if (v == "beforeRouteLeave 滚动条位置记录") {
Var = 
(
data() {
    return {
        homeScroll: 0,
    }
},
//进入路由即触发 created()只触发一次
activated() {
    //this.$nextTick()异步执行dom刷新
    this.$nextTick(() => {
        console.log(20200201105909, this.homeScroll)
        document.querySelector('.view').scrollTo(0, this.homeScroll)
    })
},
//离开路由时
beforeRouteLeave(to, from, next) {
    this.homeScroll = document.querySelector('.view').scrollTop
    console.log(20200201105901, this.homeScroll)
    next();
},
)
}

if (v == "vue 动画组件<transition> + animate.css") {
Var =
(
<transition
    name="fade"
    enter-active-class="animated zoomInDown"
    leave-active-class="animated bounceOutDown">
    <div id='box' v-show='text'>box</div>
</transition>
)
}

if (v == "props.sync与$emit('update')") {
Var =
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <script src='https://cdn.staticfile.org/element-ui/2.10.1/index.js'></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.10.1/theme-chalk/index.css">
</head>

<body>
    <div id="app">
        {{ abc }}
        <abc :fuck.sync='abc'></abc>

        <button @click='handleClick'>handleClick</button>
    </div>
</body>
<script>
var abc = Vue.extend({
    template: `
        <div>
            <el-dialog class='filter-dialog' width='800px' height='622px' :title='"草泥马"' :visible='fuck' @close='close'></el-dialog>

            <p>请注意，这里最大的坑爹在于 visible.sync 。</p>
            <p>他的使用并不是你想象的简单。 千万要记得两点：</p>
            <ul>
                <li>1、 不要用 props .sync 的绑定值。 行不通的。</li>
                <li>2、 this.$emit('update:fuck', newV)</li>
            </ul>
        </div>
    `,
    props: ['fuck'],
    methods: {
        close() {
            this.$emit('update:fuck', false)
        }
    },
});

Vue.component('abc', abc)

var vue = new Vue({
    el: '#app',
    data: {
       abc: null
    },
    methods: {
        handleClick () {
            this.abc = true
        }
    },
})
</script>
</html>
)
txtit(Var)
return
}

if (v == "同一组件修改 class 来修改样式的解决方案：x-scoped") {
Var =
(
/**
 ;(async function(){
    const a = await waitWhen(_ => document.getElementById('1234'))
    console.log(20191212102924, a)
 }())
 */
const waitWhen = (conditionFn = () => false, wait = Infinity, interval = 10, startTime = Date.now()) => new Promise((resolve, reject) => {
    (function poll() {
        // 获取回调结果
        const result = conditionFn()

        // 获取是否超时
        const isTimeout = Date.now() - startTime > wait

        // 如果条件成立，那么立刻 resolve
        if (result) return resolve(result)

        // 如果时间超时，立刻 reject
        if (isTimeout) return reject(result)

        // 否则继续轮询
        setTimeout(poll, interval)
    }())
})


'option.circleColor': {
        immediate: true,
        async handler(newV, oldV) {

            // 等待 dom 渲染
            const $el = await waitWhen(_ => this.$refs['swiper-btn'], 1000)

            // 获取容器的标记
            let scoped = $el.getAttribute('x-scoped')

            // 如果不存在，则新建
            if (!scoped) {
                // id
                scoped = +new Date
                // scoped
                $el.setAttribute('x-scoped', scoped)
            }
            var injectCss = function (css) {
                // 获取历史样式标签
                const beforeScopedStyle = document.getElementById(scoped)

                // 删除之前的标签
                beforeScopedStyle && beforeScopedStyle.remove()

                var style = document.createElement('style')
                style.type = 'text/css'
                if (style.styleSheet) {
                    style.styleSheet.cssText = css
                } else {
                    style.appendChild(document.createTextNode(css))
                }
                document.getElementsByTagName('head')[0].appendChild(style)
            }

            injectCss(``
                .swiper-pagination[x-scoped="${scoped}"] .swiper-pagination-bullet {
                    background-color: ${newV};
                }
            ``)
        }
    },
)
}

if (v == "provide/inject：上下文") {
_send("vue.ctx", true, true)
return
}


if (v == "this.$msgbox 与 vnode 语法") {
_send("vnode", true, true)
return
}

if (v == "如何获取vue组件的name属性？ this.$options.name") {
Var =
(
this.$options.name
)
}


if (v == "Vue 进度条组件") {
Var = 
(
<template>
    <div class="myprogress" :style='{ width: mywidth }'></div>
</template>

<script>
export default {
  name: 'myprogress',
  data () {
    return {
      mywidth: 0
    }
  },
  methods: {
      go () {
          console.log('go');
      }
  },
  props: {
    _width: {
      default: 0,
      type: String
    }
  },
  components: {

  },
  computed: {

  },
  watch: {
    _width (newV) {
      this.mywidth = 0
      setTimeout(_ => this.mywidth = newV, 50)
    }
  },
  mounted () {
      setTimeout(() => {
        this.mywidth = this._width
      }, 50);
  }
}
</script>

<style lang="scss" scoped>

.myprogress {
  transition: .5s all ease;
  width: 0;
}
</style>
)
}

if (v == "$deepSet深度赋值解决方案") {
_send("deepset", true, true)
return
}

if (v == "vue双向数据模拟") {
_send("shuangxiang", true, true)
return
}


if (v == "collapse折叠面板") {
_send("zhedie", true, true)
return
}

if (v == "vue.mixins") {
_send("vue.mixins", true, true)
return
}


if (v == "require.context 自动import 解决方案") {
_send("webpack.ctx", true, true)
return
}

if (v == "this.$store.dispatch('StreetIndex/activeStreet', streetName, { root: true })") {
Var = 
(
this.$store.dispatch('StreetIndex/activeStreet', streetName, { root: true })
)
}


if (v == "我的 CardNumber 数字翻滚器") {
_send("cardnum", true, true)
return
}

if (v == "elementUI dispatch 组件传播攻略") {
_send("dispatch", true, true)
return
}

if (v == "filters 过滤器的使用") {
_send("v-filter", true, true)
return
}

if (v == "我的 transition-group 列表动画示例") {
Var = 
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Vue -->
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <style>
    html, body{
        margin: 0;
        padding: 0;
    }

    #app {
        
    }

    ::-webkit-scrollbar {
        width: 5px;
        height: 0;
    }
    ::-webkit-scrollbar-thumb {
        border-radius: 2px;
        -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
        background: #d1d4db;
    }
    ::-webkit-scrollbar-track {
        -webkit-box-shadow: none;
        border-radius: 0px;
        background: #EDEDED;
    }

    .container {
        overflow: scroll;
        height: 145px;
        width: 250px;
    }

    /* 只要数据变化，就会调用这个钩子。所以你是动画移动的 */
    .cell-move {
       transition: all .8s ease-out;
    }

    /* 运动过程中会执行 */
    .cell-enter-active {
       transition: all .8s ease-out;
    }

    /* 定义开始状态 */
    .cell-enter {
        opacity: 0;
        transform: translateX(100px);
    }
    
    /* 定义目标状态 */
    .cell-enter-to {
        opacity: 1;
        transform: translateX(0px);
    }
    </style>
</head>

<body>
    <div id="app">
        <transition-group name="cell" tag="ul" class="container">
            <li v-for='(item, index) in items' :key='item'>{{ item }}</li>
        </transition-group>
        <button class="shuffle" @click="handleClick"> add </button>
    </div>
</body>
<script>
var vue = new Vue({
    el: '#app',
    data: {
        items: [
            '三亚发生3.2级地震新',
            '刘强东章泽天同框',
            '五部门打击校闹新',
            '汶川泥石流',
            '梁铉锡被禁止出国新',
            '老挝车祸13人遇难',
            '张予曦承认分手',
        ],
        text: '',
    },
    methods: {
        handleClick: function () {
            this.items.unshift(+new Date())
        }
    },
    beforeMount: function () {

    }
})
</script>
</html>
)
}


if (v == "v-slot 插槽") {
_send("v-slot", true, true)
return
}


if (v == "vuedraggable 示例demo") {
Var =
(
https://sortablejs.github.io/Vue.Draggable/#/two-lists
<draggable v-bind="dragOptions" class="list-group" v-list="layout" group='people'  @change="log">
         <div class="list-group-item" v-for="element in layout" :key="element.i">{{element.i}}</div>
</draggable>

<draggable  v-bind="dragOptions" class="list-group" v-list="layout2" group='people'  @change="log">
         <div class="list-group-item" v-for="element in layout2" :key="element.i">{{element.i}}</div>
</draggable>
---
import draggable from 'vuedraggable'
export default {
	computed: {
	    dragOptions() {
	      return {
	        animation: 200,
	        disabled: false,
	        ghostClass: "ghost"
	      };
	    }
	},
	components: {
	    draggable,
	},
}
</script>
---

<style>
.flip-list-move {
  transition: transform 0.5s;
}

.no-move {
  transition: transform 0s;
}

.ghost {
  opacity: 0.5;
  background: #c8ebfb;
}

.list-group {
  width: 300px;
  min-height: 300px;
  margin-top: 50px;
  color: #000;
  background-color: red;

}

.list-group-item {
  cursor: move;
  height: 35px;
  line-height: 35px;
  background: #fff;
  border-bottom: 1px solid #ccc;
}

.list-group-item i {
  cursor: pointer;
}

</style>
)
txtit(Var)
return
}



if (v == "watch props 与 data 结合来初始化") {
Var = 
(
data () {
  return {
      mytext: ''
  }
},
props: {
   text: {
       type: String,
       default: ''
   }
},
watch: {
   text: {
      deep: true,
      // 重点
      immediate: true,
      handler(newV, oldV) {
         this.mytext = newV
      }
   }
},
)
}


if (v == "el-enum简易封装") {
_send("el-enum", true, true)
return
}


if (v == "this.$root.$on 事件总线") {
_send("$on", true ,true)
return
}


if (v == "this.$store.subscribe") {
_send("vuex.sub", true, true)
return
}


if (v == "vue-drag-resize") {
Var = 
(
<template>
    <div id="app">
        <VueDragResize class='VueDragResize' ref='VueDragResize' :isActive="isActive" :w="200" :h="200" @resizing="resize" @dragging="drag">
            <h3>Hello World!</h3>
            <p>{{ top }} х {{ left }} </p>
            <p>{{ width }} х {{ height }}</p>
        </VueDragResize>
    </div>
</template>
<script>
// https://github.com/kirillmurashov/vue-drag-resize
import VueDragResize from 'vue-drag-resize';

export default {
    name: 'app',
    data() {
        return {
            width: 0,
            height: 0,
            top: 0,
            left: 0,
            isActive: true
        }
    },
    methods: {
        resize(newRect) {
            this.width = newRect.width;
            this.height = newRect.height;
        },
        drag(newRect) {
            this.top = newRect.top;
            this.left = newRect.left;
        },
    },
    components: {
        VueDragResize
    },
    beforeMount() {
        this.clickOutSide = e => {
            if (this.$refs.VueDragResize.$el.contains(e.target) === false) {
                this.isActive = false
            }
        }
        document.addEventListener('mouseup', this.clickOutSide)
    },
}
</script>
<style scoped>
.VueDragResize {
    color: #333;
    background-color: #159957;
    background-image: linear-gradient(120deg, #155799, #159957);
    color: #fff;
    text-align: center;
}
</style>
)
}

if (v == "vue-drag-drop") {
Var = 
(
<template>
    <div>
        <drag v-for="item in topLists" class="drag-item" :key="item" :transfer-data="{ fuck: '写上你要传递的内容，虽然什么类型都可以，不一定要object' }">
            {{ item }}
        </drag>
        
        <drop class="drop" @drop="handleDrop(bottomList, ...arguments)">
            <div class='drop-item' v-for="(item, i) in bottomList" :key="i">{{ item }}</div>
        </drop>
    </div>
</template>
<script>
// npm install --save vue-drag-drop
import { Drag, Drop } from 'vue-drag-drop';
export default {
    components: { Drag, Drop },
    data() {
        return {
            topLists: ['A', 'B', 'C'],
            bottomList: ['D', 'E', 'F'],
        };
    },
    methods: {
        handleDrop(toList, data) {
            const fromList = data.list;
            if (fromList) {
                toList.push(data.item);
                fromList.splice(fromList.indexOf(data.item), 1);
                toList.sort((a, b) => a > b);
            }
        },
    },
};
</script>
<style scoped>
.drag-item,
.drop-item {
    margin: 20px;
    width: 50px;
    height: 50px;
    line-height: 50px;

    background: #666;
    text-align: center;
    display: inline-block;
}

.drop {
    margin-bottom: 20px;
    width: auto;
    height: auto;
}
</style>
)
}

if (v == "this.$store.getters['app/master']") {
Var = 
(
this.$store.getters['app/master']
)
}

if (v == "动态组件：<component :is='xxx'></component>") {
_send("component", true, true)
return
}

if (v == "Vue 404 页面") {
_send("vue.404", true, true)
return
}

if (v == "<transition>与路由动画") {
Var = 
(
<transition name="fade-transform" mode="out-in">
  <router-view></router-view>
</transition>

.fade-transform-leave-active,
.fade-transform-enter-active {
  transition: all .3s;
}
.fade-transform-enter {
  opacity: 0;
  transform: translateX(-10px);
}
.fade-transform-leave-to {
  opacity: 0;
  transform: translateX(10px);
}
)
}

if (v == "vue.watch.deep-$props") {
Var = 
(
watch: {
    '$props': {
        deep: true,
        handler (newV, oldV) {
            
        }
    }
},
)
}

if (v == "setTitle: 解决微信、QQ、闪银等内置浏览器单页应用无法刷新title的问题") {
_send("setTitle", true, true)
return
}

if (v == "DataV - 顶部一闪过儿的loading封装") {
Var =
(
<template>
    <div class="loading-indicator" v-if='value'></div>
</template>
<script>
export default {
    name: 'topLoading',
    data() {
        return {
            value: false
        }
    },
}
</script>
<style lang="scss" scoped>

.loading-indicator {
    position: absolute;
    top: 0;
    z-index: 101;
    left: 0;
    width: 100`%;
    height: rem(5);
    background: -webkit-gradient(linear, 80`% 46`%, 10`% 21`%, from(#ff8754), to(#00baff));
    animation: ladingAnimation 1s infinite ease-out;
}

@-webkit-keyframes ladingAnimation {
    0`% {
        transform: translateX(-100`%);
    }

    100`% {
        transform: translateX(150`%);
    }
}
</style>
---
import Vue from 'vue';
import topLoading from './topLoading.vue'

const topLoadingConstructor = Vue.extend(topLoading);

let _initInstance;

const initInstance = () => {
  _initInstance = new topLoadingConstructor({
    el: document.createElement('div')
  });
  document.body.appendChild(_initInstance.$el);
};

const show = () => {
	if (!_initInstance) {
	  initInstance();
	}
	_initInstance.value = true
}

const hide = () => {
	Vue.nextTick(() => {
		_initInstance && (_initInstance.value = false)
	});
}

export default {
	show,
	hide,
}
)
txtit(Var)
return
}

if (v == "我的layer组件：通过js来操作.vue组件，只有插入任何位置") {
Var =
(
// 继承组件
const layerConstructor = Vue.extend(layer)
// 实例化组件
this.__layer__ = new layerConstructor({
    el: document.createElement('div')
})
// 插入到地图容器之中。因为我获取的xy是相对于地图容器的
document.querySelector('#map_container > div').append(this.__layer__.$el)
---
<template>
    <div class="layer" :style="{ left: x + 'px', top: y + 'px' }" v-if='value'>
        <div class='layer__line'></div>
        <div class='layer__box'>
            <article class='box__title'>{{ streetName }}</article>
            <div class='box__form'>
                <div class="form__field">
                    <span class="field__key">事件总数 : </span>
                    <span class="field__value">
                        <countTo :startVal='0' :endVal="problemAmount_data" :duration="1500"></countTo>
                    </span>
                </div>
                <div class="form__field">
                    <span class="field__key">满意度 : </span>
                    <span class="field__value"><i class='icon-star' v-for='(item, index) in [1,2,3,4,5]' :key='index'></i></span>
                </div>
                <div class="form__field u-mt-1">
                    <span class="field__key">环比 : </span>
                    <span class="field__value" :class="qoq">{{ qoq_data }}</span>
                </div>
                <div class="form__field u-mt-1">
                    <span class="field__key">办结率 : </span>
                    <span class="field__value">{{ rate_data }}</span>
                </div>
                <div class="form__field u-mt-1">
                    <span class="field__key">同比 : </span>
                    <span class="field__value" :class="yoy">{{ yoy_data }}</span>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
export default {
    name: 'layer',
    data() {
        return {
            value: true,
            x: '',
            y: '',
            qoq: '',
            yoy: '',
            streetName: '',
            qoq_data: '',
            rate_data: '',
            yoy_data: '',
            problemAmount_data: 0,
        }
    },
}
</script>
<style lang="scss" scoped>


.layer {
    position: absolute;
    z-index: 9999;
    width: rem(754);
    height: rem(327);
    transition: .3s all ease;

    .icon-star {
        @include bg(rem(24), rem(23), '~@/assets/star.png');
        display: inline-block;
        margin-right: rem(4);
    }

    .layer__box {
        position: absolute;
        left: rem(147);
        top: rem(-168);
        padding: rem(52) rem(50) rem(32) rem(70);
        @include bg(rem(581 + 24), rem(327 + 6), '~@/assets/layer.png');
    }

    .box__title {
        font-size: rem(39);
    }

    .box__form {
        margin-top: rem(20);
        @include flex(b, s);
        flex-wrap: wrap;
    }

    .form__field {
        width: 50`%;
        font-size: rem(27);
    }

    .field__key {}

    .field__value {
        white-space: nowrap;

        &.is-up {
            color: #11ee4f;
        }

        &.is-down {
            color: #ED1F51;
        }
    }

    .layer__line {
        // position: absolute;
        // width: rem(173);
        // height: rem(168);
        // border-left: solid 1px #51d0ff;
        // border-top: solid 1px #51d0ff;
    }
}
</style>
)
txtit(Var)
}

if (v == "proxyTable 配置") {
_send("proxyTable", true, true)
}

if (v == "Vue.config.productionTip = false") {
Var = 
(
Vue.config.productionTip = false
)
}

if (v == "svg-spinner-loader.vue") {
Var = 
(
<template>
  <div class="block-loader__modal">
    <div class="spinner">
     <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1"
      width="48px" height="48px" viewBox="0 0 28 28">
        <g class="qp-circular-loader">
         <path class="qp-circular-loader-path" fill="none" d="M 14,1.5 A 12.5,12.5 0 1 1 1.5,14" stroke-linecap="round" />
        </g>
     </svg>
    </div>
  </div>
</template>


<script>
export default {
  name: 'block-loader'
}
</script>


<style scoped>
.spinner {
  margin: 10px 20px;
  text-align: center;
  display: inline-block;
}

.spinner svg {
  background-color: rgb(255, 255, 255);
  border-radius: 50`%;
  padding: 8px;
  box-shadow:
    0px 3px 1px -2px rgba(0, 0, 0, 0.2),
    0px 2px 2px 0px rgba(0, 0, 0, 0.14),
    0px 1px 5px 0px rgba(0, 0, 0, 0.12);
}

.qp-circular-loader {
  width: 64px;
  height: 64px;
  stroke-width: 3px;
}

.qp-circular-loader-path {
  stroke-dasharray: 58.9;
  stroke-dashoffset: 58.9;
}

.qp-circular-loader,
.qp-circular-loader * {
  transform-origin: 50`% 50`%;
}


.qp-circular-loader {
  animation-name: rotate;
  animation-duration: 1568.63ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}


.qp-circular-loader-path {
  animation-name: fillunfill, rot, colors;
  animation-duration: 1333ms, 5332ms, 5332ms;
  animation-iteration-count: infinite, infinite, infinite;
  animation-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1), steps(4), linear;
  animation-play-state: running, running, running;
  animation-fill-mode: forwards;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fillunfill {
  from { stroke-dashoffset: 58.8 }
  50`% { stroke-dashoffset: 0; }
  to { stroke-dashoffset: -58.4 }
}

@keyframes rot {
  from { transform: rotate(0deg); }
  to { transform: rotate(-360deg); }
}

@keyframes colors {
  0`% { stroke: #ea493f; }
  20`% { stroke: #ffa901; }
  40`% { stroke: #ea493f; }
  60`% { stroke: #2b6a73; }
  80`% { stroke: #ea493f; }
  100`% { stroke: #ffa901; }
}


</style>
)
}

if (v == "router.js 404 定义") {
_Send("router.404", true, true)
return
}


if (v == "vue.config.js") {
_send("vue.config.js", true, true)
return
}

if (v == "npm rebuild node-sass") {
Var = 
(
npm rebuild node-sass
)
}




if (v == "el-menu简易封装") {
Var = 
(
<template>
  <el-menu @open='handleOpen'>
    <div class="fuck" v-for='(item, index) in list' :key='index'>
      <el-submenu v-if='item.childList' :index='item.tagId'>
        <template slot="title">
          {{ item.tagName }}
        </template>
        <fuck :list='item.childList' @open='handleOpen'></fuck>
      </el-submenu>
      <el-menu-item  :index='item.tagId' v-else>
        <i class="el-icon-menu"></i>
        <span slot="title">{{ item.tagName }}</span>
      </el-menu-item>
    </div>
  </el-menu>
</template>

<script>
export default {
  name: 'fuck',
  methods: {
      handleOpen (...args) {
        this.$emit('open', ...args)
      }
  },
  components: {

  },
  computed: {

  },
  props: {
     list: {
         type: Array,
         default: []
     }
  },
  watch: {

  },
  beforeMount () {

  }
}
</script>

<style lang="scss" scoped>

.fuck {

}
</style>
)
}


if (v == "this.$set 深度赋值") {
Var = 
(
this.$set(this.tags, key, value)
)
}

if (v == "this.$store.commit") {
Var = 
(
this.$store.commit('Collection/SET_DATABASENAMES', response.databaseNames)
)
}


if (v == "路由验证token并跳转登录与重定向的套路") {
Var = 
(
router.beforeEach((to, from, next) => {
	// 如果是登录页面，直接放
    if (to.path === '/login') {
        next()
    // 如果不是登录页面，判断是否有token
    } else if (getToken()) { 
        next({ ...to, replace: true })
    // 如果没有登录页面，跳转到登录页面。并且记录重定向的值
    } else {
        next(`/login?redirect=${to.path}`)
    }
})

---

export default {
  watch: {
    $route: {
      handler: function(route) {
        this.redirect = route.query && route.query.redirect
      },
      immediate: true
    }
  },
  methods: {
  	handleLogin () {
  		// 登录成功后，跳转到重定向的地方
  		this.$router.push({ path: this.redirect || '/' })
  	}
  }
}
)
txtit(Var)
return 
}


if (v == "next() 的三种参数形态") {
Var = 
(
next({ path: '/' })
next(`/login?redirect=${to.path}`)
next({ ...to, replace: true })
)
}

if (v == "this.$router.currentRoute.meta.step") {
Var = 
(
this.$router.currentRoute.meta.step
)
}

if (v == "ElementUI 按需引入教程") {
_send("elementui", true, true)
return
}

if (v == "vue.props") {
_send("vue.props", true, true)
return
}

if (v == ":style='{}' 表达式") {
Var = 
(
:style='{ "z-index": isShowGuidance ? 2001 : 1 }'
)
}

if (v == "v-cloak 用来解决渲染之前的尴尬期") {
Var = 
(
<style>
    [v-cloak] {
         display: none;
    }
</style>
<div id='app' v-cloak></div>
)
}

if (v == "vue.watch-deep-$route") {
Var = 
(
watch: {
  '$route': {
      deep: true,
      handler (newV, oldV) {
          this.$store.dispatch('Map/reset')
      }
  }
},
)
}


if (v == "无限滚动 + 无缝滚动插件") {
Var = 
(
// main.js
import scroll from 'vue-seamless-scroll'
Vue.use(scroll)


<vue-seamless-scroll :class-option="optionSingleHeightTime" :data="myItems" class='seamless-warp'>
  <div v-for='(item, index) in myItems' :key='index' class='item py-1 pl-4 pr-2'>
    祝贺 <div class="highlight">{{ item._serverData.cmd }}</div> 团购成功
  </div>
</vue-seamless-scroll>

computed: {
  optionSingleHeightTime () {
      return { 
        // singleHeight: 95, waitTime: 2500,
        step: 0.5,
      }
  }
},

<style lang="scss" scoped>
.seamless-warp {
  width: 400px;
  height: 21em;
  overflow-y: hidden;
  background: rgba(255, 255, 255, .2);
}
</style>
)
}


if (v == "宇宙流星雨canvas") {
Var = 
(
<!-- 星空背景 -->
<canvas id='space'></canvas>

// 星空背景canvas
bg (canvas) {
    const c = canvas.getContext("2d");
    const numStars = 1900
    const radius = '0.' + Math.floor(Math.random() * 9) + 1
    const focalLength = canvas.width * 2

    let centerX, centerY
    let stars = []
    let star
    let i

    initializeStars();

    function initializeStars() {
        centerX = canvas.width / 2;
        centerY = canvas.height / 2;

        stars = [];
        for (i = 0; i < numStars; i++) {
            star = { x: Math.random() * canvas.width, y: Math.random() * canvas.height, z: Math.random() * canvas.width, o: '0.' + Math.floor(Math.random() * 99) + 1 };
            stars.push(star);
        }
    }

    function moveStars() {
        for (i = 0; i < numStars; i++) {
            star = stars[i];
            star.z--;

            if (star.z <= 0) {
                star.z = canvas.width;
            }
        }
    }

    function drawStars() {
        var pixelX, pixelY, pixelRadius;

        if (canvas.width != window.innerWidth || canvas.height != window.innerHeight) {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initializeStars();
        }

        c.fillStyle = "rgba(0,10,20,1)";
        c.fillRect(0, 0, canvas.width, canvas.height);
        c.fillStyle = "rgba(209, 255, 255, " + radius + ")";

        for (i = 0; i < numStars; i++) {
            star = stars[i];

            pixelX = (star.x - centerX) * (focalLength / star.z);
            pixelX += centerX;
            pixelY = (star.y - centerY) * (focalLength / star.z);
            pixelY += centerY;
            pixelRadius = 1 * (focalLength / star.z);

            c.fillRect(pixelX, pixelY, pixelRadius, pixelRadius);
            c.fillStyle = "rgba(209, 255, 255, " + star.o + ")";
        }
    }

    return function executeFrame() {
        moveStars();
        drawStars();
        canvas.animateID = window.requestAnimFrame(executeFrame);
    }
}

mounted () {
    // canvas 
    this.canvas = document.getElementById("space")
    // 获取动画的开关
    this.executeFrame = this.bg(this.canvas)
}
)
}

if (v == "render(h) jsx用法") {
Var = 
(
// <script type="text/jsx"></script>
// https://github.com/ElemeFE/element/blob/dev/packages/menu/src/menu.vue
render(h) {
    let uploadList;

    if (this.showFileList) {
      uploadList = (
        <UploadList
          disabled={this.uploadDisabled}
          listType={this.listType}
          files={this.uploadFiles}
          on-remove={this.handleRemove}
          handlePreview={this.onPreview}>
        </UploadList>
      `);
    }

    const uploadData = {
      props: {
        type: this.type,
        drag: this.drag,
        action: this.action,
        multiple: this.multiple,
        'before-upload': this.beforeUpload,
        'with-credentials': this.withCredentials,
        headers: this.headers,
        name: this.name,
        data: this.data,
        accept: this.accept,
        fileList: this.uploadFiles,
        autoUpload: this.autoUpload,
        listType: this.listType,
        disabled: this.uploadDisabled,
        limit: this.limit,
        'on-exceed': this.onExceed,
        'on-start': this.handleStart,
        'on-progress': this.handleProgress,
        'on-success': this.handleSuccess,
        'on-error': this.handleError,
        'on-preview': this.onPreview,
        'on-remove': this.handleRemove,
        'http-request': this.httpRequest
      },
      ref: 'upload-inner'
    };

    const trigger = this.$slots.trigger || this.$slots.default;
    const uploadComponent = <upload {...uploadData}>{trigger}</upload>;

    return (
      <div>
        { this.listType === 'picture-card' ? uploadList : ''}
        {
          this.$slots.trigger
            ? [uploadComponent, this.$slots.default]
            : uploadComponent
        }
        {this.$slots.tip}
        { this.listType !== 'picture-card' ? uploadList : ''}
      </div>
    `);
  }
)
}


if (v == "NProgress页面加载组件") {
Var = 
(
// $ cnpm install --save nprogress
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'

router.beforeEach((to, from, next) => {
    // page-loading  启动
    NProgress.start()
    // 放行页面
    next()
})

// 全局路由钩子
router.afterEach((to, from) => {
    // page-loading 关闭
    NProgress.done()
})
)
}

if (v == "🚀 vue.directive 指令") {
_send("vue.dir", true, true)
return
}


if (v == "动态路由：router.addRoutes") {
Var = 
(
// 根据菜单生成的路由信息
// https://github.com/wdlhao/vue2-element-touzi-admin/blob/master/src/utils/mUtils.js#L166
// https://github.com/wdlhao/vue2-element-touzi-admin/blob/master/src/page/login.vue#L80
const routes = mUtils.generateRoutesFromMenu(menuData)
const asyncRouterMap = [
  {
  path: '/index',
  name:'',
  hidden   : true,
  component: require('layout/home.vue'),
  redirect: '/index',
  children:routes
  }
]
router.addRoutes(asyncRouterMap);
)
}

if (v == "<router-link></router-link>") {
Var = 
(
// 推荐使用path，name不太靠谱
<router-link :to="{ path: this.fromFullPath, name: 'user', params: { userId: 123 }}">User</router-link>
)
}

if (v == "<keep-alive>: 这里的 name 是组件的不是 router 的") {
Var = 
(
<!-- 路由入口 -->
<!-- beCareful： include如果是一个"" 的话，默认是匹配所有组件，所以你宁可写随便写一个东西进去，譬如： include='none'  -->
<keep-alive include="overallSituation,townStreet">
    <router-view class='view' :class='{"is-mask": isMask}' />
</keep-alive>
)
}

if (v == "vuex.action") {
SendLevel 1
Send, vuex.a{tab}
return
}

    

if (v == "组件复用的新套路: 合并配置，来代替mixin方案") {
Var = 
(
// core/MdComponent
import deepmerge from 'deepmerge'
export default function (newComponent) {
	const defaults = {
		props: {
			mdTheme: null
		},
		computed: {
			$mdActiveTheme () {
			}
		}
	}
	return deepmerge(defaults, newComponent)
}

// index.vue
import MdComponent from 'core/MdComponent'
export default new MdComponent({
	name: 'test',
	components: {

	},
	props: {

	},
	data () {
		return {

		}
	},
	computed: {

	},
	watch： {

	},
	methods: {
	
	},
})
)
}

if (v == "<router-view></router-view>") {
Var = 
(
<router-view></router-view>
)
}


if (v == "路由 Layout 布局示例") {
Var = 
(
import DashboardLayout from "@/pages/Layout/DashboardLayout.vue";

import Dashboard from "@/pages/Dashboard.vue";

const routes = [
  {
    path: "/",
    component: DashboardLayout,
    redirect: "/dashboard",
    children: [
      {path: "dashboard", name: "Dashboard", component: Dashboard },
    ]
  }
];

export default routes;

)
}

if (v == "vue.watch-$route") {
Var = 
(
watch: {
  '$route' (to, from) {
      // 只有详情页面，才需要多一个来路路径。
      this.fromTitle = to.name === 'details' ? from.meta.title + '> ' : ''
  }
},
)
}

if (v == "<transition v-on...>") {
Var = 
(
<transition
  v-on:before-enter="beforeEnter"
  v-on:enter="enter"
  v-on:after-enter="afterEnter"
  v-on:enter-cancelled="enterCancelled"

  v-on:before-leave="beforeLeave"
  v-on:leave="leave"
  v-on:after-leave="afterLeave"
  v-on:leave-cancelled="leaveCancelled"
>
  <!-- ... -->
</transition>

// ...
methods: {
  // --------
  // 进入中
  // --------

  beforeEnter: function (el) {
    // ...
  },
  // 当与 CSS 结合使用时
  // 回调函数 done 是可选的
  enter: function (el, done) {
    // ...
    done()
  },
  afterEnter: function (el) {
    // ...
  },
  enterCancelled: function (el) {
    // ...
  },

  // --------
  // 离开时
  // --------

  beforeLeave: function (el) {
    // ...
  },
  // 当与 CSS 结合使用时
  // 回调函数 done 是可选的
  leave: function (el, done) {
    // ...
    done()
  },
  afterLeave: function (el) {
    // ...
  },
  // leaveCancelled 只用于 v-show 中
  leaveCancelled: function (el) {
    // ...
  }
}
)
}

if (v == "<transition>") {
Var = 
(
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <style>

    button {
        position: absolute;
        left: 50`%;
        top: 50`%;
        transform: translate(-50`%, -50`%);

        width: 200px;
        height: 200px;
    }

    .msgbox {
        width: 100px;
        height: 100px;
        background-color: red;
    }

    .slide-fade-enter-active {
        transition: .3s all ease;
    }

    .slide-fade-leave-active {
        transition: .8s all cubic-bezier(1.0, 0.5, 0.8, 1.0)
    }

    .slide-fade-enter,
    .slide-fade-leave-to {
        transform: translateX(100`%);
        opacity: 0;
    }
    </style>
</head>

<body>
    <div id="app">
        <transition name="slide-fade">
            <div class="msgbox" v-show="value"></div>
        </transition>
        <button @click='go'>button</button>
    </div>
</body>
<script>
var vue = new Vue({
    el: '#app',
    data: {
        value: false
    },
    methods: {
        go() {
            this.value = !this.value
        }
    }
})
</script>

</html>
---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <style>
    .msgbox {
        width: 100px;
        height: 100px;
        background-color: red;
        
        position: absolute;
        left: 50`%;
        top: 50`%;
        transform: translate(-50`%, -50`%);
    }

    .msgbox-bounce-leave-active, .msgbox-bounce-enter-active {
        transition: .3s all ease;
    }

    .msgbox-bounce-enter {
      opacity: 0;
      transform: translate3d(-50`%, -50`%, 0) scale(0.7);
    }

    .msgbox-bounce-leave-active {
      opacity: 0;
      transform: translate3d(-50`%, -50`%, 0) scale(0.9);
    }
    </style>
</head>

<body>
    <div id="app">
        <transition name="msgbox-bounce">
            <div class="msgbox" v-show="value"></div>
        </transition>
        <button @click='go'>button</button>
    </div>
</body>
<script>
var vue = new Vue({
    el: '#app',
    data: {
        value: false
    },
    methods: {
        go() {
            this.value = !this.value
        }
    }
})
</script>

</html>
)
txtit(Var)
return
}

if (v == "<transition-group>") {
Var =
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Vue -->
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
    <!-- element -->
    <script src='https://cdn.staticfile.org/element-ui/2.10.1/index.js'></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.10.1/theme-chalk/index.css">
    <!-- mockjs -->
    <script src="https://cdn.staticfile.org/Mock.js/1.0.0/mock-min.js"></script>
    <!-- axios -->
    <script src="https://libs.cdnjs.net/axios/0.19.2/axios.min.js"></script>
    <style>
    html, body{
        margin: 0;
        padding: 0;
        height: 100`%; /* 注意，应该是html和body同时设置才可以 */
    }

    #app {
        display: flex;
        justify-content: center;
        align-items: center;
    }


    .fadeIn-enter-active, .fadeIn-leave-active {
      transition: all 1300ms ease-out;
    }

    .fadeIn-enter, .fadeIn-leave-to{
      opacity: 0;
      transform: translate(-50`%, 0);
    }

    li {
        list-style: none;
        background-color: yellow;
        margin-top: 10px;
        padding: 10px;
    }
    </style>
</head>

<body>
    <div id="app">

        <transition-group name='fadeIn' class='news__items' tag='ul'>
          <li class='news__item' v-for='(item, index) in items' :key='item.book_id'>
            <article class='news__item--article'>{{ item.book_name }}</article>
          </li>
        </transition-group>

        <button @click='handleClick'>handleClick</button>
    </div>
</body>
<script>
Mock.mock("/book/list", "get", {
    "booklist|10": [
        {"book_id|+1": 101, "book_name": "@ctitle", "book_price|50-100.1-2": 0, "book_time": "@date('yyyy-mm-dd')"}
    ]
})

var vue = new Vue({
    el: '#app',
    data: {
        items: [],
        text: '',
        obj: {},
    },
    methods: {
        handleClick () {
            this.items.unshift({
                book_name: '110',
                book_id: Math.random()
            })
        }
    },
    beforeMount () {
        axios.get("/book/list").then(res => {
            this.items = res.data.booklist
        })
    }
})
</script>
</html>
)
txtit(Var)
return
}

if (v == "vue.components") {
Var = 
(
import myprogress from '@/components/myprogress.vue'

)
}

if (v == "$refs") {
Var = 
(
// <select ref="myselect"></select>
this.$refs.myselect
)
}

if (v == "import { mapState, mapActions, mapMutations, mapGetters } from 'vuex'") {
_send("vuex.map", true, true)
return
}

if (v == "click-outside 指令") {
Var = 
(
export default {
  bind: function (el, { value }) {
    let onClickOutside = value
    el.handler = function (e) {
      if (el && !el.contains(e.target)) {
        onClickOutside(e)
      }
    }
    document.addEventListener('click', el.handler, true)
  },
  unbind: function (el) {
    document.removeEventListener('click', el.handler, true)
    el.handler = null
  }
}
)
}

if (v == "this.$forceUpdate()") {
Var = 
(
this.$forceUpdate()
)
}

if (v == "msgbox组件") {
Var = 
(
import Vue from 'vue';
import mapbox from './mapbox.vue'

const mapboxConstructor = Vue.extend(mapbox);

let _initInstance;

const initInstance = () => {
  _initInstance = new mapboxConstructor({
    el: document.createElement('div')
  });
  document.body.appendChild(_initInstance.$el);
};

const show = ({ name, list, center }) => {
	if (!_initInstance) {
	  initInstance();
	}

	_initInstance.value = true;
	_initInstance.name = name;
	_initInstance.list = list;
	_initInstance.center = center;
}

const close = () => {
	Vue.nextTick(() => {
		_initInstance && (_initInstance.value = false)
	});
}

export default {
	show,
	close,
}
)
}

if (v == "myprogress组件") {
Var = 
(
<template>
    <div class="myprogress" :style='{ width: mywidth }'></div>
</template>

<script>
export default {
  name: 'myprogress',
  data () {
    return {
      mywidth: 0
    }
  },
  methods: {
      go () {
          console.log('go');
      }
  },
  props: {
    _width: {
      default: 0,
      type: String
    }
  },
  components: {

  },
  computed: {

  },
  watch: {
    _width (newV) {
      this.mywidth = 0
      setTimeout(_ => this.mywidth = newV, 50)
    }
  },
  mounted () {
      setTimeout(() => {
        this.mywidth = this._width
      }, 50);
  }
}
</script>

<style lang="scss" scoped>

.myprogress {
  transition: .5s all ease;
  width: 0;
}
</style>
)
}

if (v == "vue.watch.deep") {
Var = 
(
watch: {
    proportionofclassificationproblem: {
        deep: true,
        handler (newV, oldV) {
            console.log(20181030114859, newV)
        }
    }
},
)
}


if (v == "destroyed") {
Var = 
(
destroyed () {}
)
}


if (v == "router.init") {
_send("router.init", true, true)
return
}


if (v == "beforeMount") {
Var = 
(
beforeMount () {}
)
}
if (v == "beforeCreate") {
Var = 
(
beforeCreate () {}
)
}
if (v == "created") {
Var = 
(
created () {}
)
}
if (v == "mounted") {
Var = 
(
mounted () {}
)
}
if (v == "activated") {
Var = 
(
activated () {}
)
}


if (v == "vue.methods") {
Var = 
(
methods: {
    go () {
        
    }
}
)
}

if (v == "全局钩子router.beforeEach") {
Var = 
(
router.beforeEach((to, from, next) => {
    // 前往页面
    let _to = to.fullPath.toUrl()
    // 来路页面
    let _from = from.fullPath.toUrl()
    // 设置标题
    setTitle(to.meta.title)
    // 放行页面
    next()
})
)
}


if (v == "全局钩子router.afterEach") {
Var = 
(
// 全局路由钩子
router.afterEach((to, from) => {
    // 记录回路
    if (name) store.state.back = { title: from.meta.title, path: from.path }
    // 获取面包屑标题
    const completeTitle = getCompleteTitleByMatched(to.matched)
    // 更新 vuex 状态 - 标题
    store.dispatch('SET_TITLE', completeTitle)
    // 更新页面标题（简单即可）
    document.title = to.meta.title
    // 关闭所有的loading
    Loader.hideAll();
})
)
}

if (v == "this.$router.back()") {
Var = 
(
this.$router.back() // window.history.back();
)
}

if (v == "获取参数this.$route.params.id") {
Var = 
(
this.$route.params.id
)
}

if (v == "组件钩子beforeRouteLeave") {
Var = 
(
// 页面离开的时候，初始化一些参数配置
beforeRouteLeave  (to, from, next) {
    // 还原为全部选择框都显示
    this.$store.dispatch('list/onlyShowSelect')
    // 取消问题类型，默认为空
    this.$store.dispatch('list/eq_problemType')
    next();
},
)
}

if (v == "组件钩子beforeRouteEnter") {
Var = 
(
beforeRouteEnter (to, from, next) {
    next(vm => {
      if (from.path === '/myBusiness') {
        vm.$router.push('/')
      }
    })
}
)
}



if (v == "vue.init") {
InputBox, OutputVar, title, enter a name?,,,,,,,,test
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var = 
(
<template>
    <div class="%OutputVar%">
        %OutputVar%
    </div>
</template>

<script>
export default {
  name: '%OutputVar%',
  data () {
    return {
        items: [],
        title: 'HelloWorld'
    }
  },
  methods: {
      go () {
          console.log('go');
      }
  },
  props: {
      
  },
  components: {

  },
  computed: {
  
  },
  watch: {
  
  },
  beforeMount () {
      console.log(%t%, '%OutputVar%');
  }
}
</script>

<style lang="scss" scoped>

.%OutputVar% {

}
</style>
)
}

if (v == "v-for") {
Var = 
(
v-for='(item, index) in items' :key='item'
)
}

if (v == "vuex.init") {
Var = 
(
import Vue from 'vue'
import Vuex from 'vuex'
import user from './modules/user'
import mutations from './mutations.js'
import * as actions from './actions'
import * as getters from './getters'
import * as state from './state.js'

Vue.use(Vuex)

const store = new Vuex.Store({
  strict: false,
  state,
  getters,
  actions,
  mutations,
  modules: {
    user
  },
})

export default store
)
}
if (v == "vuex.modules") {
SendLevel 1
Send, vuex.modules{tab}
return
}

if (v == "this.$store.state.list.loading") {
Var = 
(
this.$store.state.list.loading
)
}
if (v == "vue.computed: get/set") {
Var = 
(
computed: {
    townstreetSelect: {
        get () {
          return this.$store.state.mapDetails.townstreetSelect
        },
        set (newV) {
           this.$store.dispatch('mapDetails/townstreetSelect', newV)
        }
    }
},
)
}
if (v == "vue.watch") {
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var = 
(
watch: {
    proportionofclassificationproblem (newV, oldV) {
        console.log(%t%, newV)
    }
},
)
}
if (v == "vue.watch-vuex") {
Var = 
(
computed: {
    reportType () {
        return this.$store.state.reportType
    }
},
watch: {
    reportType (newV, oldV) {
        this.go()
    }
},
)
}
if (v == "vue.data") {
Var = 
(
data () {
  return {
      items: [],
      title: 'HelloWorld'
  }
},
)
}
if (v == "vue.style") {
Var = 
(
<style lang="scss" scoped>

.test {

}
</style>
)
}
if (v == "this.$router.push('index')") {
Var = 
(
this.$router.push('index')
)
}
if (v == "this.$store.dispatch") {
Var = 
(
this.$store.dispatch('Collection/departmentalProblemRanking')
)
}

code(Var)
return

::mapstate::
Var =
(
import { mapState } from 'vuex'
computed: {
  ...mapState('theme', ['findLastSixMonthAir', 'findLastSixMonthAirTown'])
},
)
code(Var)
return

::vue.update::
::v.update::
Var =
(
this.$forceUpdate();
)
code(Var)
return

::watch.d::
::watchd::
::watch.deep::
::watchdeep::
::deep.watch::
::deepwatch::
::deepw::
Var =
(
watch: {
    // 也支持这样： 'analysis.data': {}
    proportionofclassificationproblem: {
        deep: true,
        handler (newV, oldV) {
            console.log(20181030114859, newV)
        }
    }
},
)
code(Var)
return

::vue3.router::
::router.init::
::route.init::
::vue.router::
::vue.route::
::router.js::
::router.vue::
Var =
(
import store from '@/store'
import { createRouter, createWebHashHistory } from 'vue-router'

const test = () => import(/* webpackChunkName: "test" */ '@/views/test/test.vue')
const dataAssets = () => import(/* webpackChunkName: "dataAssets" */ '@/views/dataAssets/index.vue')

const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    { path: '/', redirect: '/dataAssets' },
    { path: '/dataAssets', name: 'dataAssets', meta: { title: '首页' }, component: dataAssets },
    { path: '/test', name: 'Test', meta: { title: '测试页面' }, component: test },
  ]
})

// 全局路由钩子
router.afterEach((to, from) => {
  // 设置标题
  document.title = '数据资产－' + to.meta.title

  // 更新 vuex 状态 - 标题
  store.dispatch('SET_TITLE', to.meta.title)
})

router.beforeEach((to, from, next) => {
    // 放行页面
    next()
})

export default router
---
/**
   // router.js 
  const routes = [
    { path: '/', component: () => import('./Home.vue') }
    { path: '/about', component: () => import('./About.vue') }

  ]
 */

import Vue from 'vue'
import Router from 'vue-router'
import store from '@/store'
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'

Vue.use(Router)

// layoutA
const layoutA = r => require.ensure([], () => r(require('@/layout/layoutA')), 'layoutA')
// 首页
const Home = r => require.ensure([], () => r(require('@/pages/Home')), 'Home')

// layoutB
const layoutB = r => require.ensure([], () => r(require('@/layout/layoutB')), 'layoutB')
// 数据采集
const Collection = r => require.ensure([], () => r(require('@/pages/Collection')), 'Collection')

// 路由配置
var router = new Router({
  mode: 'history',
  scrollBehavior: () => ({ y: 0 }),
  // 当配置 vue.config.js publicPath 时就需要配置。实际上总是配置就行了。
  base: process.env.BASE_URL,
  routes: [
  // 重定向首页
  { path: '/', redirect: '/dg/Home' },
  // layoutA
  { path: '/dg', component: layoutA, children: [
    // 重定向数据中心
    { path: '/', redirect: 'Home' },
    // 数据中心
    { path: 'Home', name: 'Home', meta: { title: '数据中心' }, component: Home },
  ]},
  // layoutB
  { path: '/am', component: layoutB, children: [
    // 重定向数据采集
    { path: '/', redirect: 'Collection' },
    // 数据采集
    { path: 'Collection', name: 'Collection', meta: { title: '数据采集' }, component: Collection },
  ]},
  ]
})
// 全局路由钩子
router.afterEach((to, from) => {
  // 设置标题
  document.title = '城管智慧可视化－' + to.meta.title

  // 更新 vuex 状态 - 标题
  store.dispatch('SET_TITLE', to.meta.title)
})

router.beforeEach((to, from, next) => {
    // 放行页面
    next()
})

export default router
)
txtit(Var)
return

::vue.w::
::vue.watch::
::vuew::
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var = 
(
watch: {
    proportionofclassificationproblem (newV, oldV) {
        console.log(%t%, newV)
    }
},
)
code(Var)
return

::vuex.g::
::vuex.get::
::vuex.getter::
::vuex.getters::
Var =
(
const getters = {
    GET_HEATMAP (state) {
        return state.mode
    },
}
)
code(Var)
return


::vuex.action::
::vuex.actions::
::vuex.a::
::vuexa::
InputBox, OutputVar, title, enter a name?,,,,,,,,test
Var =
(
%OutputVar% ({ commit, state, dispatch, rootState, getters, rootGetters }, %OutputVar%) {
  return request('/dc/record/dcColumnRule/showAllColumnByTable', { params: { datasourceId: state.datasourceId, databaseName: state.selectDatabase, tableName }})
  return request('/dc/record/dcTableRule/queryTableWithColumn', { 
      method: 'POST', 
      data: { 
        tableQuery: {
          datasourceId: state.datasourceId, 
          databaseName: state.selectDatabase, 
          tableNameList: state.selectTables.map(_ => _.tableName)
        }
      }
  })
  state.%OutputVar% = %OutputVar%
  dispatch('list')
},
)
code(Var)
return

::this.$watch::
::$watch::
Var =
(
this.$watch('caseMetricsAllTown', newV => {
  console.log(20200324123043, newV)
}, { immediate: true, deep: true })

// 形式二...
this.$watch(_ => this.obj['2020-03'], newV => {
  console.log(20200324152933, newV)
}, { immediate: true, deep: true })
)
code(Var)
return

::messagebox::
::msg::
::msgbox::
::vue.msg::
::vue.msgbox::
::v.msgbox::
::v.msg::
Var =
(
import Vue from 'vue'
import videoLayer from './videoLayer.vue'

const videoLayerConstructor = Vue.extend(videoLayer)

let _initInstance

const initInstance = () => {
    _initInstance = new videoLayerConstructor({
        el: document.createElement('div'),
        propsData: { type, history, item }
    })
    document.getElementById('app').appendChild(_initInstance.$el)
}

// 注册一些快捷键
const shortcutKeyHandler = event => {
    // 监听esc键退出全屏
    if (event.keyCode == 27) _initInstance.isOpen = false
}

const show = src => {
    if (!_initInstance) {
        initInstance()
    }

    _initInstance.isOpen = true
    _initInstance.src = src
    document.addEventListener('keydown', shortcutKeyHandler)
}

const close = () => {
    Vue.nextTick(() => {
        _initInstance && (_initInstance.isOpen = false)
        document.removeEventListener('keydown', shortcutKeyHandler)
    })
}

export default {
    show,
    close,
}
---
<template>
  <div class="layer" v-if="isOpen">
    <!-- 蒙版 -->
    <div class="layer__mask" @click="close"></div>
    <!-- 视频播放器 -->
    <div class="layer__content">
      
    </div>
  </div>
</template>

<script>
export default {
  name: 'layer',
  data() {
    return {
      src: '',
      isOpen: false,
    }
  },
  methods: {
    go() {
      console.log('go')
    },
    close() {
      this.isOpen = false
    },
  },
  components: {},
  computed: {},
  watch: {},
  props: [],
  beforeMount() {
    console.log(20201221155003, 'layer')
  },
}
</script>

<style lang="scss" scoped>
.layer {
  @include pfull();
  z-index: 1993100337;
}

.layer__mask {
  @include pfull();
  z-index: 1;
}

.layer__content {
  @include bg(rem(998), rem(730), '~@/assets/bg.png');
  position: absolute;
  right: 50`%;
  top: 50`%;
  transform: translate(-50`%, -50`%);
}
</style>
---
import { createVNode, render, isVNode } from 'vue'
import Constructor from './index.vue'

const Loading = function (options = {}) {
    const container = document.createElement('div')

    // createVNode 的第三个参数，可以嵌套一个子 VNode
    // 譬如这样：isVNode(options.message) ? { default: () => options.message } : null
    // 但我也不知道如何使用，先记录一下稍后再试。有可能只是 slot。
    const vm = createVNode(Constructor, options, null)

    // 挂载到 DOM
    render(vm, container)

    // 熟悉味道，插入 DOM 中
    document.body.appendChild(container)

    // 由于我组件中的方法是使用 setup 暴漏的，所以采用 vm.component.setupState 的方式访问。
    const setupState = vm.component.setupState

    return { 
        show: () => setupState.show(), 
        hide: () => setupState.hide(),
        setText: v => setupState.setText(v),
    }
}

/**
 * 注册方法：
 * import Loading from "@/components/Loading"
 * app.use(Loading)
 * 
 * 使用方法：
 * this.$loading.show()
 * this.$loading.hide()
 */
export default (app) => {
    // 如果你希望你的组件是像 toast 类，执行一次就往页面插入一个的场景（类似工厂函数）
    // 那你应该暴漏一个工厂方法给全局去使用，譬如： 
    // app.config.globalProperties.$loading = Loading
    // this.$loading({ ... }) // ▶ 插入第 1 个 loading...
    // this.$loading({ ... }) // ▶ 插入第 2 个 loading...
    // this.$loading({ ... }) // ▶ 插入第 3 个 loading...
    // 最佳实践，参考地址：https://github.com/element-plus/element-plus/blob/dev/packages/notification/src/notify.ts

    // 创建一个 loading 全局组件
    const $loading = Loading()
    
    // 将对象挂载到全局
    app.config.globalProperties.$loading = $loading
}
---
import store from "@/store"
import { waitWhen } from "@/utils/utils"

import MapCard from './index.vue'

const MapCards = { MapCard }

export const register = Vue => {
    // 实例集合
    const $targets = []

    for (let [key, val] of Object.entries(MapCards)) {
        // 挂载组件
        const $target = new Vue(val).$mount()
        // 注入 store，如果你想注入 router 也是一样的道理
        $target.$store = store
        // 使用 $ 为前缀的命名，譬如 window.$MapCard、 this.$MapCard
        const $name = '$' + key
        // 注册到全局和 Vue 实例中去
        window[$name] = Vue.prototype[$name] = $target
        // 插入到数组中，稍后等时机成熟再插入到 DOM body 中
        $targets.push($target)
    }
    // 插入到地图
    waitWhen(() => document.getElementById('__map__')).then(container => {
        $targets.map($target => container.appendChild($target.$el))
    }, 10000)
}
---
import Vue from 'vue'
import store from "@/store"
import mapCard from './index.vue'
import { waitWhen } from "@/utils/utils"

const mapCardConstructor = Vue.extend(mapCard)

const mount = (dom = '', propsData = {}) => {
    waitWhen(_ => document.querySelector(dom)).then(el => {
        // 实例化组件
        const $vm = new mapCardConstructor({ el, propsData })
        // 注入 store，如果你想注入 router 也是一样的道理
        $vm.$store = store
        // 修改 data 数据：$vm.region = '南城'
    })
}

export default { mount }
---
// main.js
import ProgressBar from '@/components/ProgressBar.vue'

// 一个简易的 msgbox 注册方法，并不一定每次都要用 el-message 那种大费周章写法。
// https://github.com/ElemeFE/element/blob/dev/packages/message/src/main.js#L34
const bar = new Vue(ProgressBar).$mount()
Vue.prototype.$bar = bar
document.body.appendChild($bar.$el)
)
txtit(Var)
return

::sfc::
::vue.sfc::
::vue.scf::
::vue.init::
::vueinit::
InputBox, OutputVar, title, enter a name?,,,,,,,,test
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var = 
(
<template>
  <div class="%OutputVar%"></div>
</template>

<script>
export default {
    name: '%OutputVar%',
    data() {
      return {
        items: [],
        keyword: '',
        active: -1,
      }
    },
    methods: {
      go() {
        console.log('go')
      },
    },
    components: {},
    computed: {},
    watch: {},
    props: [],
    beforeMount() {},
}
</script>

<style lang="scss" scoped>
.%OutputVar% {
}
</style>
)
code(Var)
return

::style::
::vuestyle::
::vue.style::
::vue.css::
::vue.scss::
Var =
(
<style lang='scss' scoped>
@import '~@/scss/functions.scss';
.test {
    
}
</style>
)
code(Var)
return



::vue.cw::
::vue.wc::
::vuewc::
::vuecw::
Var =
(
computed: {
    reportType () {
        return this.$store.state.reportType
    }
},
watch: {
    reportType (newV, oldV) {
        this.go()
    }
},
)
code(Var)
return

::vue.mixin::
::vue.mixins::
Var =
(
// Mixin 注入全局
Vue.mixin({
  data () {
    return {
      fontOptions,
    }
  },
  methods: {
    // 方便所有组件都轻松操作 『舞台/成员/主角』
    ...mapActions('app', {
      // 设置 『主角』 的配置
      setOption: 'setOption',
      // 设置 『主角』 的大小（w/h）
      setSize: 'setSize',
      // 设置 『主角』 的位置(x/y)
      setPos: 'setPos',
      // 向 『舞台』 中添加 『成员』
      addMember: 'addMember',
      // 删除当前的 『主角』
      removeMaster: 'removeMaster',
      // 清空成员
      clearMember: 'clearMember',
      // 重置舞台
      resetStage: 'resetStage',
      // 步进
      stepPos: 'stepPos',
    }),
    ...mapMutations('app', [
      'SET_MASTER',
      'KILL_MASTER',
      'SET_ACTIVEPANEL',
    ]),
    maybe,
  },
  computed: {
     // 方便所有组件都轻松访问当前『主角』
     ...mapGetters('app', [
       'master',
       'member',
       'stage',
     ]),
  },
})
---
// 导出
export default {
  beforeRouteLeave(to, from, next) {
    // 获取页面中所有echarts的示例宿主
    const _echarts_instance_ = document.querySelectorAll("[_echarts_instance_]")
    // 遍历所有的宿主元素
    _echarts_instance_.forEach(function(e, i) {
      // 通过宿主进而获取对应的echarts，并且重置大小
      echarts.getInstanceByDom(e).clear()
    })
    // 放行
    next()
  }
}

// app.vue 使用
export default {
    name: 'Studio',
    mixins: [appMixin],
    components: { sheader, panel, stage },
}
)
txtit(Var)
return

::vue.nginx::
::nginx.vue::
::nginx.config::
Var =
(
location / {
   try_files $uri /index.html;
}

location ^~ /api/ {
  proxy_pass  http://192.168.8.184:8080/api/;
}
)
code(Var)
return

:?:vuex.module::
:?:vuex.m::
:?:vuexm::
Var =
(
import { request } from '@/utils/request.js'

let state = {
    AppData: {},
    getDepartSecondOverdue: null,
}

const actions = {
  setAppData ({ commit, state, dispatch, rootState, getters, rootGetters }, payload) {
	   commit('SET_APP_DATA', payload.userInfo)
  },
  getDepartSecondOverdue ({ commit, state, dispatch, rootState, getters, rootGetters }, departId) {
    return request('/sg/department/sgDepartmentCount/getDepartSecondOverdue?departId=' + departId).then(result => {
        state.getDepartSecondOverdue = result
    })
  },
}

const mutations = {
	SET_APP_DATA (state, userInfo) {
	  return state.AppData = userInfo
	}
}

const getters = {
  AppData (state) {
    return state.AppData;
  }
}

export default {
  namespaced: true,
  state,
  mutations,
  actions,
  getters,
}
)
code(Var)
return

::vuex.init::
::vuexinit::
::vuex.index::
::vuex.store::
::vuex.demo::
::vuexdemo::
::vuex tmp::
::vuextmp::
Var =
(
import Vue from 'vue'
import Vuex from 'vuex'
import user from './modules/user'
import mutations from './mutations.js'
import * as actions from './actions'
import * as getters from './getters'
import * as state from './state.js'

Vue.use(Vuex)

const store = new Vuex.Store({
  strict: false,
  state,
  getters,
  actions,
  mutations,
  modules: {
    user
  },
})

export default store
)
code(Var)
return

::vuex2::
::vuex2.init2::
::vuexinit2::
::vuex.demo2::
::vuexdemo2::
::vuex.index2::
::vuex.store2::
Var =
(
import Vuex from 'vuex'
import users from './users'

const createStore = () => {
  // 新建 Store
  return new Vuex.Store({
    // false：非严格模式
    strict: false,
    // 状态
    state: {
      counter: 0
    },
    // 在非严格模式下，action是可以直接修改state，但不推荐这样做。所以我们约定： 
    // 1、 action为异步而生： 只有需要异步操作才定义和使用action，否则外部直接调用mutations来更新state即可；
    // 2、 action不能操作state：在进行完异步操作之后，只能通过commit调用mutations来更新state。自己不能操作state
    actions: {
        nuxtServerInit ({ commit }, data) {
          // 使用commit调用mutation
          commit('user', data.req.session.user)
        },
        // 异步action示例
        async nuxtServerInit({ dispatch }) {
          // 继续调用其他action
          await dispatch('core/load')
        },
    },
    // 在非严格模式下，外部其实可以直接获取state，这个getters实际上是冗余的。
    getters: {
      AppData (state) {
         return state.AppData;
       }
    },
    // 同步更新state
    mutations: {
      increment (state) {
        state.counter++
      }
    },
    modules: {
      users,
      todos: {
        state: {
          list: []
        },
        mutations: {
          add (state, { text }) {
            state.list.push({
              text,
              done: false
            })
          },
          remove (state, { todo }) {
            state.list.splice(state.list.indexOf(todo), 1)
          },
          toggle (state, { todo }) {
            todo.done = !todo.done
          }
        }
      }
    }
  })
}

export default createStore
)
code(Var)
return

::v-clo::
Var =
(
v-cloak
)
code(Var)
return

::this.refs::
::this.ref::
::this.$ref::
::this.$refs::
::$refs::
::$ref::
::ref::
::refs::
Var =
(
this.$refs.myselect
)
code(Var)
return

::this.$nextTick::
::this.$next::
::$nextTick::
::$next::
::$.next::
::next::
Var =
(
this.$nextTick(() => {
    
})
)
code(Var)
return

>!v::
InputBox, OutputVar, title, enter a name?,,,,,,,,test
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var = 
(
<template>
    <div class="%OutputVar%">
        test
    </div>
</template>

<script>
export default {
  name: '%OutputVar%',
  data () {
    return {
        items: [],
        title: 'HelloWorld'
    }
  },
  methods: {
      go () {
          console.log('go');
      }
  },
  components: {

  },
  computed: {
  
  },
  watch: {
  
  },
  beforeMount () {
      console.log(%t%, '%OutputVar%');
  }
}
</script>

<style lang="scss" scoped>

.%OutputVar% {

}
</style>
)
code(Var)
return


::vstyle::
::vuestyle::
Var = 
(
<style lang="scss" scoped>
    
</style>
)
code(Var)
return


::mapgetters::
Var = 
(
// https://vuex.vuejs.org/en/getters.html
import { mapGetters } from 'vuex'
computed: {
    ...mapGetters([
        'menuList'
    ]),
    // 也可以这样
    ...mapGetters({
        menuList: 'menuList'
    })
},
)
code(Var)
return

::mapmutations::
Var = 
(
// https://vuex.vuejs.org/guide/mutations.html
import { mapMutations } from 'vuex'
methods: {
    ...mapMutations([
        'SET_MENU',
        'SET_USERINFO'
    ]),
    // 也可以这样
    ...mapMutations({
        SET_MENU： 'SET_MENU',
        SET_USERINFO： 'SET_USERINFO'
    }),
},
)
code(Var)
return

::tongxin::
::tongxun::
::vue.chuanbo::
::dispatch:: 
Var =
(
/**
 * 父组件示例：
 *
 * import Emitter from '@/mixins/emitter'
 * 
 * export default {
 *   name: 'FatherName',
 *   mixins: [ Emitter ],
 *   methods: {
 *      udpate() {
 *          // 向子组件传播事件
 *          // 参数1：子组件名  参数2：方法名  参数3：数据
 *          this.broadcast('ChildName', 'fuckHandler', { value: 'shit god' })
 *      }
 *   },
 *   mounted() {
 *      this.$on('JOJOHandler', params => {
 *          console.log(params) // => { value: 'DIO' }
 *      })
 *   },
 * }
------------------------------------------------------------------------------------
 * 子组件示例：
 *
 * import Emitter from '@/mixins/emitter'
 * 
 * export default {
 *   name: 'ChildName',
 *   mixins: [ Emitter ],
 *   methods() {
 *        trigger() {
 *            // 向父组件传播事件
 *            // 参数1：父组件名  参数2：方法名  参数3：数据
 *            this.dispatch('FatherName', 'JOJOHandler', { value: 'DIO' })
 *        }
 *   },
 *   mounted () {
 *       // 接受来自父组件的事件推送和参数
 *       this.$on('fuckHandler', params => {
 *           console.log(params) // => { value: 'shit god' }
 *       }) 
 *   },
 * }
 */
################################################################
function broadcast(componentName, eventName, params) {
    this.$children.forEach(child => {
        const name = child.$options.name

        if (name === componentName) {
            child.$emit.apply(child, [eventName].concat(params))
        } else {
            broadcast.apply(child, [componentName, eventName].concat([params]))
        }
    })
}

export default {
    methods: {
        dispatch(componentName, eventName, params) {
            let parent = this.$parent || this.$root
            let name = parent.$options.name

            while (parent && (!name || name !== componentName)) {
                parent = parent.$parent

                if (parent) {
                    name = parent.$options.name
                }
            }
            if (parent) {
                parent.$emit.apply(parent, [eventName].concat(params))
            }
        },
        broadcast(componentName, eventName, params) {
            broadcast.call(this, componentName, eventName, params)
        }
    }
}
)
txtit(Var, "################################################################")
Return

::v-for::
::vfor::
::vuefor::
::vue.for::
::v.for::
    SendInput, v-for='(item, index) in items' :key='index'
Return



::new vue::
::newvue::
Var = 
(
var vue = new Vue({
    el: '#app',
    data: {
        items: []
    },
    methods: {
        go () {
            
        }
    },
    beforeMount () {
        
    }
})
)
code(Var)
return

::vext::
::vextend::
::vextends::
::vueextend::
::vue-extend::
::vue.extend::
::vue.extends::
Var = 
(
var mybutton = Vue.extend({
    template: ``
        <div></div>
    `,
    data: {
        title: '123'
    },
    methods: {
        handleClick: function () {
            
        }
    },
    props: {
        text: ''
    },
    watch: {
        
    },
    beforeMount () {
        console.log('hello world');
    },
});
Vue.component('mybutton', mybutton)
)
code(Var)
return

:?:v-animate::
:?:vue-animate::
:?:vue-tran::
:?:v-tran::
:?:vue-trans::
:?:v-trans::
:?:v.animate::
:?:vue.animate::
:?:vue.tran::
:?:v.tran::
:?:vue.trans::
:?:v.trans::
Var =
(
<transition-group name="cell" tag="div" class="kitchenBright__list--items transition-group" tag='ul'>
    <li v-for='(item, index) in items' :key='item' 
    	class='cell kitchenBright__list--item'
    	:class="{active: index === 0 && step !== -1}"
    	:title='item.schoolName'
    	@click='handleClick(index)'>
        	{{ item.schoolName }}
    </li>
</transition-group>

.cell-enter-active, .cell-leave-active {
  transition: all 1s;
}

.cell-enter, .cell-leave-to /* .cell-leave-active below version 2.1.8 */ {
  /*opacity: 0;*/
  transform: translateY(300px);
}

/* 动画钩子 */
.cell-move {
  transition: transform 1s ease;
}

---

<transition name="msgbox-bounce">
    <div class="msgbox" v-show="value"></div>
</transition>

methods: {
    // 隐藏弹窗
    hideListener (e) {
      // 如果点击的地方不是弹窗本身的话，那么关闭弹窗
      if (!e.target.className.includes('msgbox')) this.value = false
    }
}

watch: {
    // 如果弹窗发生了变化
    value (newV) {
        newV === true && window.addEventListener('mouseup', this.hideListener)
        newV === false && window.removeEventListener('mouseup', this.hideListener);
    },
}

.msgbox {
    @include center;
    width: 835px;
    z-index: 199307100337;
    /* 切记添加transition，除非你在钩子中添加 */
    transition: .3s all;
}

.msgbox-bounce-enter {
   opacity: 0;
   transform: translate3d(-50`%, -50`%, 0) scale(0.7);
}

.msgbox-bounce-leave-active {
   opacity: 0;
   transform: translate3d(-50`%, -50`%, 0) scale(0.9);
}
---
<!-- https://animate.style/ animate 4.x | <h1 class="animate__animated animate__bounce">An animated element</h1> -->
<link href="https://libs.cdnjs.net/animate.css/4.1.0/animate.min.css" rel="stylesheet">

<ul class="w-100 h-100">
  <li class="animate__animated animate__backInLeft" :style="{'animation-delay':``${index * 0.05}s``}" v-for="(item, index) in datalist.slice(0,8)" :key="index">
      <span>{{ index + 1 }}</span>
      <span>{{item.NAME}}</span>
      <span>{{item.NUM1}}</span>
      <span>{{item.NUM2}}</span>
  </li>
</ul>
)
txtit(Var)
return

::`:style::
Var =
(
:style='{ "z-index": isShowGuidance ? 2001 : 1 }'
)
code(Var)
return

::props::
::vue.props::
::vue.prop::
Var =
(
props: {
    // 标题
    title: {type: String, default: ''},
    // 是否具备眼睛icon
    eye: Boolean,
    // 眼睛默认是否可用？
    disable: { type: Boolean, default: false },
},
)
code(Var)
return

::eleui::
::ele::
::element::
::elementui::
Var =
(
0、还是推荐直接点先： cnpm install element-ui --save
import ElementUI from 'element-ui'

Vue.use(ElementUI)
import 'element-ui/lib/theme-chalk/index.css'

---

1、需要安装

cnpm install babel-plugin-component -D

2、.babelrc 替换：

{
  "presets": [
    ["env", {
      "targets": {
        "browsers": ["> 1`%", "last 2 versions", "not ie <= 8"]
      }
    }],
    "stage-2"
  ],
  "plugins": [
    "transform-vue-jsx",
    "transform-runtime",
    ["component", {
      "libraryName": "element-ui",
        "styleLibraryName": "theme-chalk"
    }]
   ]
}
---
3、使用教程：
import 'element-ui/lib/theme-chalk/index.css'

import { DatePicker, Select, Option, Cascader, MessageBox, tooltip, Message, Autocomplete, Input, Checkbox, Switch, Dropdown, DropdownMenu, DropdownItem } from 'element-ui'

Vue.component(btn.name, btn)
Vue.component(vtitle.name, vtitle)
Vue.component(DatePicker.name, DatePicker)
Vue.component(Select.name, Select)
Vue.component(Option.name, Option)
Vue.component(Cascader.name, Cascader)
Vue.component(tooltip.name, tooltip)
Vue.component(Input.name, Input)
Vue.component(Autocomplete.name, Autocomplete)
Vue.component(Checkbox.name, Checkbox)
Vue.component(Switch.name, Switch)
Vue.component(Dropdown.name, Dropdown)
Vue.component(DropdownMenu.name, DropdownMenu)
Vue.component(DropdownItem.name, DropdownItem)

Vue.prototype.$message = Message
Vue.prototype.$msgbox = MessageBox
Vue.prototype.$alert = MessageBox.alert
Vue.prototype.$confirm = MessageBox.confirm
Vue.prototype.$prompt = MessageBox.prompt
---
electron
)
txtit(Var)
return

::window.back::
::window.back()::
::back::
Var =
(
this.$router.back() // window.history.back();
)
code(Var)
return

::vuex.module2::
::vuex.m2::
Var =
(
import { request } from '@/utils/request.js'

let state = {
   tableHeader: null
}

const actions = {
  tableHeader ({ commit, state, dispatch, rootState }, data) {
	  request('/chuanghui/dc/group/dcGroupViewData/tableHeader/1').then(result => {
        console.log(20190403103346, result)
    }) 
  },
}

export default {
  namespaced: true,
  state,
  actions,
}
)
code(Var)
return

::vuex.mm::
::vuex.mu::
::vuex.mutation::
::vuex.mutations::
InputBox, OutputVar, title, enter a name?,,,,,,,,test
StringUpper, a, OutputVar
Var =
(
SET_%a% (state, %OutputVar%) {
  state.%OutputVar% = %OutputVar%
},
)
code(Var)
return

::vue.main::
::vue.entry::
::vue.main.js::
Var =
(
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
import vueWaves from './directive/waves'
import { maybe } from './utils/utils'

import '@/scss/utils.scss'

Vue.use(vueWaves)

Vue.mixin({
  methods: {
	maybe,
  }
})

new Vue({
  render: h => h(App),
  router,
  store,
}).$mount('#app')
)
code(Var)
return

::router-view::
::route-view::
Var =
(
<router-view></router-view>
)
code(Var)
return

::vue.scss::
::vue.scope::
Var =
(
<style lang='scss' scoped>
@import '~@/scss/functions.scss';
.test {

}
</style>
)
code(Var)
return

::vite::
:?:vite.conf::
:?:vite.config.js::
:?:vite.config::
:?:vue.conf::
:?:vue.config.js::
:?:vue.config::
Var =
(
const path = require('path')
const resolve = (dir) => path.join(__dirname, dir)

module.exports = {
    // 关闭语法检测
    lintOnSave: false,
    assetsDir: 'assets',
    productionSourceMap: false,
    //  可以模仿线上资源地址，如：process.env.NODE_ENV === 'development' ? '/biweb/' : '/biweb/',
    publicPath: '/',
    css: {
      loaderOptions: {
        sass: {
          // 1、在 package.json 中修改 sass-loader 的版本： "sass-loader": "^7.1.0"
          // 2、安装依赖：$ cnpm i
          // https://blog.csdn.net/liwan09/article/details/106981239
          data: ``
              @import "~@/scss/functions.scss";
          ``
        }
      }
    },
    configureWebpack: {
        // 路径配置
        resolve: {
            extensions: ['.js', '.vue', '.json'],
            // 别名配置
            alias: {
                '@': resolve('src'),
            },
        },
        // 插件配置
        plugins: [],
        // webpack-load配置
        module: {
            rules: [],
        },
    },
    // transpileDependencies:[
    //     /element-ui/
    // ],
    // webpack 链式扩展
    chainWebpack: (config) => {
        if (process.env.NODE_ENV === 'development') {
            config.devtool('source-map')
        }

        /* 测试扩展 ts-loader，需要结合 tsconfig.json 使用哦
        config.module
               .rule('ts')
               .test(/\.tsx?$/)
               .use('ts-loader')
               .loader('ts-loader')
               .end()
        */

        /*
        config.module
              .rule('svg')
              .exclude.add(resolve('src/icons'))
              .end();

        config.module
              .rule('icons')
              .test(/\.svg$/)
              .include.add(resolve('src/icons'))
              .end()
              .use('svg-sprite-loader')
              .loader('svg-sprite-loader')
              .options({
                symbolId: 'icon-[name]'
              });
        */

        /* 别名和输出名
        config.resolve.alias
             .set('@', resolve('src'))
             .set('@c', resolve('src/components'))
        config.output.filename('[name].[hash].js').end();
         */
    },
    devServer: {
       proxy: {
           '/api': {
               target: 'http://14.18.232.165:8199',
               changeOrigin: true,
               ws: true,
               pathRewrite: {
                   '^/api': '/',
               }
           },
       },
    },
}
---
css: {
  loaderOptions: {
    sass: {
      data: `
        @import "@/scss/functions.scss";
      `
    },
    postcss: {
      plugins: [
        require("autoprefixer")({
          // 配置使用 autoprefixer
          overrideBrowserslist: ["last 15 versions"] 
        }),
        // 如果是移动端推荐配合 amfe-flexible 插件使用：https://www.cnblogs.com/yifeng555/p/12734032.html
        // 由于viewport单位得到众多浏览器的兼容，lib-flexible这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用viewport来替代此方
        // cnpm i postcss-pxtorem -S
        require("postcss-pxtorem")({
          propList: ['*'],
          // 换算的基数: 移动端通常是 75，如果是 Vant UI 官方根字体大小是 37.5，普通的场景是16
          rootValue: 16, 
          // 过滤掉 「.norem」 「.ig」 「.px」 开头的class，不进行rem转换
          selectorBlackList: ['.norem', '.ig', '.px'],
          // 是否要过滤 node_modules？如果需要的话开启：exclude: /node_modules/
        })
      ]
    }
  }
},
---
### 有任何问题先看文档
https://vitejs.dev/guide/ssr.html#setting-up-the-dev-server

### 如何使用 public 资源文件夹？
https://vitejs.dev/guide/assets.html#the-public-directory

1. 资源放 public 里边，譬如 /public/icon.png
2. 使用的时候：/icon.png

### 没有 require 引入图片，用什么代替？
```javascript
// https://vitejs.dev/guide/assets.html#importing-asset-as-url
import imgUrl from './img.png'
document.getElementById('hero-img').src = imgUrl
```

### 用什么代替 require.context？

```javascript
// https://vitejs.dev/guide/features.html#glob-import
// https://github.com/vitejs/vite/issues/1464
const modules = import.meta.globEager('/src/**/*.vue')
```

### process.env 用什么代替？
```javascript
// https://vitejs.dev/guide/env-and-mode.html#env-variables
console.log(import.meta.env.BASE_URL)
```

### process.env.NODE_ENV 改了？
```javascript
// =>development
console.log(20210402150742, import.meta.env.MODE) 
```
---
// 这个是 vite + vue3 的版本
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

const path = require('path')
const legacy = require('@vitejs/plugin-legacy')

// https://vitejs.dev/config/
export default defineConfig({
    // 公共路径
    base: '/Covid-19/',
    // 构建输出目录
    outDir: 'dist',
    // 默认端口
    port: 3000,
    // 是否自动在浏览器打开
    open: true,
    // 是否开启 https
    https: false,
    // 服务端渲染
    ssr: false,
    resolve: {
        alias: {
            '@/': '/src/',
        },
        extensions: ['.vue', '.js', '.json', '.ts', '.jsx', '.tsx', '.mjs'],
    },
    css: {
        // https://vitejs.dev/config/#css-preprocessoroptions
        preprocessorOptions: {
            scss: {
                // 注意：这里必须是 src 而不是 /src，所有组件的 @import 语法也是如此。
                additionalData: ``
                    @import 'src/scss/functions.scss';
                ``,
            },
        },
    },
    plugins: [vue({ jsx: true }), legacy({ targets: ['defaults', 'not IE 11'] })],
    server: {
        proxy: {
            // https://vitejs.dev/config/#server-open
            '^/api/.*': {
                target: 'https://19.104.50.124/covid-19-map/visual/',
                changeOrigin: true,
                secure: false,
                ws: true,
                rewrite: path => path.replace(/^\/api/, '/'),
            },
            '^/loginAPI/.*': {
                target: 'https://19.104.50.124/covid-19-map/',
                changeOrigin: true,
                secure: false,
                ws: true,
                rewrite: path => {
                    console.log(20210402150545, path)

                    return path.replace(/^\/loginAPI/, '/')
                },
            },
        },
    },
})
---
// 这个是 vite + vue2 的版本
const path = require('path')
const { defineConfig } = require('vite')
const { createVuePlugin } = require('vite-plugin-vue2')
const legacy = require('@vitejs/plugin-legacy')

// https://vitejs.dev/config/#config-file
module.exports = defineConfig({
    // 公共路径
    base: '/Covid-19/',
    // 构建输出目录
    outDir: 'dist',
    // 默认端口
    port: 3000,
    // 是否自动在浏览器打开
    open: true,
    // 是否开启 https
    https: false,
    // 服务端渲染
    ssr: false,
    resolve: {
        alias: {
            '@/': '/src/',
        },
        extensions: ['.vue', '.js', '.json', '.ts', '.jsx', '.tsx', '.mjs'],
    },
    css: {
        // https://vitejs.dev/config/#css-preprocessoroptions
        preprocessorOptions: {
            scss: {
                // 注意：这里必须是 src 而不是 /src，所有组件的 @import 语法也是如此。
                additionalData: ``
                    @import 'src/scss/functions.scss';
                ``,
            },
        },
    },
    plugins: [createVuePlugin({ jsx: true }), legacy({ targets: ['defaults', 'not IE 11'] })],
    server: {
        proxy: {
            // https://vitejs.dev/config/#server-open
            '^/api/.*': {
                target: 'https://19.104.50.124/covid-19-map/visual/',
                changeOrigin: true,
                secure: false,
                ws: true,
                rewrite: path => path.replace(/^\/api/, '/'),
            },
            '^/loginAPI/.*': {
                target: 'https://19.104.50.124/covid-19-map/',
                changeOrigin: true,
                secure: false,
                ws: true,
                rewrite: path => {
                    console.log(20210402150545, path)
                    
                    return path.replace(/^\/loginAPI/, '/')
                },
            },
        },
    },
})
)
txtit(Var)
return

::router.404::
::router404::
::router.js.404::
Var = 
(
import Vue from 'vue'
import Router from 'vue-router'
import Editor from '@/views/Editor'
import Preview from '@/views/Preview'
import NotFound from '@/views/404'

Vue.use(Router)

export default new Router({
  mode: 'history',
  routes: [
    { path: '/', name: 'editor', component: Editor },
    { path: '/preview', name: 'preview', component: Preview },
    { path: '/auth', redirect: { name: 'main' } },
    { path: '*', component: NotFound }
  ]
})
---
<template>
<div class="not-found">
  404 - Not found
</div>
</template>


<script>
export default { name: 'not-found' }
</script>


<style scoped>
.not-found {
  font-size: 47px;
  text-align: center;
  margin: 0 57px;
  width: 100`%;
  height: 100`%;
}
</style>
)
txtit(Var)
return

::vuex.user::
Var =
(
import { request } from '@/utils/request.js'
import { removeCookie } from '@/utils/cookie.js'
import router from '@/router'
import { Message } from 'element-ui'

let state = {
    user: null
}

const actions = {
  getUserData ({ commit, state, dispatch, rootState }) {
    request('/admin/user/sysUser/fetchCurrentUser', { noRepeat: 'off' }).then(data => {
       state.user = data.user
    })
  },
  quitLogin ({ commit, state, dispatch, rootState }, quitLogin) {
    request('/dc/authorize/sso/prelogout', { noRepeat: 'off' }).then(data => {
       removeCookie('authority-token')
       state.user = null
       router.push('/')
       Message('退出成功')
    })
  },
}

export default {
  namespaced: true,
  state,
  actions,
}
)
code(Var)
return

::proxytable::
Var =
(
// config.baseURL = '/api'
// 本地环境代理地址
devServer: {
    proxy: {
        '/api': {
            target: 'http://19.104.50.204/fyvis/visual',
            // target: process.env.VUE_APP_TYPE == "development" ? 'http://219.135.182.3:32367' : 'http://19.104.50.204/fyvis/visual',
            changeOrigin: true,
            ws: true,
            pathRewrite: {
                '^/api': '/',
            },
        },
    },
},
---
devServer: {
    proxy: {
        /* const __API__ = process.env.NODE_ENV === 'development' ? '/api/' : '/h5/' */
        '/admin': {
            target: 'http://219.135.182.3:30022/',
            changeOrigin: true,
            ws: true,
            pathRewrite: {
                '^/admin': '/',
            }
        },
        /* const __ADMIN__ = process.env.NODE_ENV === 'development' ? '/admin/' : '/h5/' */
        '/api': {
            target: 'http://219.135.182.3:30020/',
            changeOrigin: true,
            ws: true,
            pathRewrite: {
                '^/api': '/',
            }
        },
    },
},
)
txtit(Var)
return

::vcount::
::v-count::
Var =
(
<countTo :startVal='0' :endVal="sgProblemCount" :duration="1500"></countTo>
)
code(Var)
return

::vue.404::
::vue404::
Var =
(
<template>
  <div class="wscn-http404-container">
    <div class="wscn-http404">
      <div class="pic-404">
        <img class="pic-404__parent" src="https://imgchr.com/i/Zpuxwd" alt="404">
        <img class="pic-404__child left" src="https://imgchr.com/i/ZpuveH" alt="404">
        <img class="pic-404__child mid" src="https://imgchr.com/i/ZpuveH" alt="404">
        <img class="pic-404__child right" src="https://imgchr.com/i/ZpuveH" alt="404">
      </div>
      <div class="bullshit">
        <div class="bullshit__oops">OOPS!</div>
        <div class="bullshit__info">版权所有
          <a class="link-type" href="https://wallstreetcn.com" target="_blank">华尔街见闻</a>
        </div>
        <div class="bullshit__headline">{{ message }}</div>
        <div class="bullshit__info">请检查您输入的网址是否正确，请点击以下按钮返回主页或者发送错误报告</div>
        <a href="/" class="bullshit__return-home">返回首页</a>
      </div>
    </div>
  </div>
</template>
<script>
export default {
  name: 'Page404',
  computed: {
    message() {
      return '网管说这个页面你不能进......'
    }
  }
}

</script>
<style lang="scss" scoped>
.wscn-http404-container {
  transform: translate(-50`%, -50`%);
  position: absolute;
  top: 40`%;
  left: 50`%;
}

.wscn-http404 {
  position: relative;
  width: 1200px;
  padding: 0 50px;
  overflow: hidden;

  .pic-404 {
    position: relative;
    float: left;
    width: 600px;
    overflow: hidden;

    &__parent {
      width: 100`%;
    }

    &__child {
      position: absolute;

      &.left {
        width: 80px;
        top: 17px;
        left: 220px;
        opacity: 0;
        animation-name: cloudLeft;
        animation-duration: 2s;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        animation-delay: 1s;
      }

      &.mid {
        width: 46px;
        top: 10px;
        left: 420px;
        opacity: 0;
        animation-name: cloudMid;
        animation-duration: 2s;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        animation-delay: 1.2s;
      }

      &.right {
        width: 62px;
        top: 100px;
        left: 500px;
        opacity: 0;
        animation-name: cloudRight;
        animation-duration: 2s;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        animation-delay: 1s;
      }

      @keyframes cloudLeft {
        0`% {top: 17px; left: 220px; opacity: 0; }
        20`% {top: 33px; left: 188px; opacity: 1; }
        80`% {top: 81px; left: 92px; opacity: 1; }
        100`% {top: 97px; left: 60px; opacity: 0; }
      }

      @keyframes cloudMid {
        0`% {top: 10px; left: 420px; opacity: 0; }
        20`% {top: 40px; left: 360px; opacity: 1; }
        70`% {top: 130px; left: 180px; opacity: 1; }
        100`% {top: 160px; left: 120px; opacity: 0; }
      }

      @keyframes cloudRight {
        0`% {top: 100px; left: 500px; opacity: 0; }
        20`% {top: 120px; left: 460px; opacity: 1; }
        80`% {top: 180px; left: 340px; opacity: 1; }
        100`% {top: 200px; left: 300px; opacity: 0; }
      }
    }
  }

  .bullshit {
    position: relative;
    float: left;
    width: 300px;
    padding: 30px 0;
    overflow: hidden;

    &__oops {
      font-size: 32px;
      font-weight: bold;
      line-height: 40px;
      color: #1482f0;
      opacity: 0;
      margin-bottom: 20px;
      animation-name: slideUp;
      animation-duration: 0.5s;
      animation-fill-mode: forwards;
    }

    &__headline {
      font-size: 20px;
      line-height: 24px;
      color: #222;
      font-weight: bold;
      opacity: 0;
      margin-bottom: 10px;
      animation-name: slideUp;
      animation-duration: 0.5s;
      animation-delay: 0.1s;
      animation-fill-mode: forwards;
    }

    &__info {
      font-size: 13px;
      line-height: 21px;
      color: grey;
      opacity: 0;
      margin-bottom: 30px;
      animation-name: slideUp;
      animation-duration: 0.5s;
      animation-delay: 0.2s;
      animation-fill-mode: forwards;
    }

    &__return-home {
      display: block;
      float: left;
      width: 110px;
      height: 36px;
      background: #1482f0;
      border-radius: 100px;
      text-align: center;
      color: #ffffff;
      opacity: 0;
      font-size: 14px;
      line-height: 36px;
      cursor: pointer;
      animation-name: slideUp;
      animation-duration: 0.5s;
      animation-delay: 0.3s;
      animation-fill-mode: forwards;
    }

    @keyframes slideUp {
      0`% {
        transform: translateY(60px);
        opacity: 0;
      }

      100`% {
        transform: translateY(0);
        opacity: 1;
      }
    }
  }
}

</style>

)
code(Var)
return

::getter::
::getters::
Var =
(
const getters = {
  master (state, getters) {
    return maybe(_ => state.stage.find(_ => _.id === state.master)) 
  }
}
)
code(Var)
return

::v-foro::
::v-for2::
::v-for-obj::
Var =
(
v-for='(value, key) in obj' :key='key'
)
code(Var)
return

::vuexsub::
::vuex.sub::
::store.sub::
Var =
(
// 注意，这个不能放在 Mixin.created 之中，否则会创建N次，建议离开销毁组件前取消监听
// 注意，这个不能放在 Mixin.created 之中，否则会创建N次，建议离开销毁组件前取消监听
// 注意，这个不能放在 Mixin.created 之中，否则会创建N次，建议离开销毁组件前取消监听
store.subscribe((mutation, state) => {
  console.log(mutation.type)
  console.log(mutation.payload)
})


// 监听 action 的调用
this.$store.subscribeAction({
    // 前
    before: ({ type, payload }, state) => {},
    // 后
    after: ({ type, payload }, state) => {
        // app模块下的 action 操作，都是需要更新缓存的
        if (type.includes('app')) {
            // 更新缓存
            SET_CACHE()
        }
    }
})

// 取消监听
// 取消监听
// 取消监听
destroyed () {
    // 取消 store 方面的订阅
    this.unsubscribeAction && this.unsubscribeAction()
}
)
txtit(Var)
return

::vuex::
::vuex.map::
Var = 
(
/**
 * 必读：
 * 1. 如果没有任何模块，那第一个参数可以省略。
 * 2. 如果要重命名，数组可以切换为对象。
 * 3. 不懂的直接访问官网：https://vuex.vuejs.org/guide/actions.html
 */
import { mapState, mapActions, mapMutations, mapGetters } from 'vuex'
---
methods: {
   ...mapActions('app', [
       // 设置 『主角』 的配置
       'setOption',
       // 设置 『主角』 的大小（w/h）
       'setSize',
       // 设置 『主角』 的位置(x/y)
       'setPos',
       // 向 『舞台』 中添加 『成员』
       'addMember',
       // 删除当前的 『主角』
       'removeMaster',
       // 清空成员
       'clearMember',
       // 重置舞台
       'resetStage',
       // 步进
       'stepPos',
   ]),
   ...mapMutations('app', [
       'SET_MASTER',
       'SET_MEMBER',
       'SET_STAGE',
       'KILL_MASTER',
       'SET_ACTIVEPANEL',
   ]),
},
---
computed: {
  ...mapState('app', [
    'member',
    'stage',
  ]),
  ...mapGetters('app', [
      'master',
  ]),
},
)
txtit(Var)
return


::vue.shangxiawen::
::vue.context::
::vue.ctx::
::vue.inject::
Var =
(
provide() {
    return {
        // provide/inject API 有个很坑爹的点，那就是无法响应式更新数据。
        // 比如说，我提供一个 this.fuck 给子组件们，但如果父亲更新了 this.fuck ，子组件是不会更新的。
        // 官方说除非是传入一个『可监听的对象』: 如果我提供的是一个对象，譬如这样：
        /*
             data() {
                  return {
                      text: { fuck: 'ttt' },
                  }
              },
              provide() {
                  return {
                      text: this.text
                  }
              },
              methods: {
                  go(e) {
                      this.text.fuck = '321'
                  }
              },
        */     
        // 或者最干脆的方法，你直接把 this 传递给组件，直接让儿子访问父亲算了
        app: this,
    }
},
---
inject: ['app'],
)
txtit(Var)
return

::watch::
Var =
(
watch: {
  radio (newV, oldV) {
      
  }
},
)
code(Var)
return

::el-enum::
::enum.vue::
Var =
(
<usage-docs>
  ``````html
  <dgenum :value='value' url="http://localhost:3000/data" @change='changeHandler'></dgenum>
  ``````

  ``````JavaScript
  <script>
  import dgenum from './enum.vue'
  export default {
    name: 'app',
    data () {
      return {
        value: "1"
      }
    },
    components: {
      dgenum
    },
    methods: {
      changeHandler (...args) {
        console.log(20190718172918, ...args)
      }
    }
  }
  </script>
  ``````
</usage-docs>

<template>
    <el-select class='enum' v-model='current' @change='changeHandler'>
        <el-option v-for="(item, index) in options" :key="item.index" :label="item.label" :value="item.value">
        </el-option>
    </el-select>
</template>

<script>
export default {
    name: 'enum',
    data() {
        return {
            current: '',
            options: []
        }
    },
    props: {
        // 需要请求的url
        url: {
            type: String,
            default: '',
            required: true,
        },
        // 默认值
        value: {
            type: String,
            default: '',
        },
        // label
        labelKey: {
            type: String,
            default: 'codename'
        },
        // value
        valueKey: {
            type: String,
            default: 'code'
        },
    },
    methods: {
        changeHandler(...args) {
            this.$emit('change', ...args)
        },
        getData() {
            // 请求接口
            fetch(this.url)
                .then(response => response.json())
                .then(data => {
                    // 设置最新内容
                    this.options = data.map(_ => ({ label: _[this.labelKey], value: _[this.valueKey] }))
                    // 放入缓存缓存
                    window.localStorage.setItem(this.url, JSON.stringify(this.options))
                })
                .catch(err => { throw new Error(err.message) })
        },
        // 初始化选项
        init() {
            // 获取缓存
            const cache = window.localStorage.getItem(this.url)
            // 判断是否存在缓存
            if (cache) {
                // 直接使用缓存
                this.options = JSON.parse(cache)
                // （可选）无脑获取最新数据
                this.getData()
            // 如果缓存不存在
            } else {
                // 请求数据
                this.getData()
            }
        },
    },
    beforeMount() {
        // 默认值
        this.current = this.value

        // 初始化数据
        this.init()
    },
}
</script>

<style lang="scss" scoped>
.enum {}
</style>
)
code(Var)
return

::computed::
::vue.computed::
Var =
(
computed: {
  gridLeft: {
      get () { return parseInt(this.master.option.grid.left) },
      set (newV) {this.master.option.grid.left = newV + '`%'},
  },
  master () {
    return this.$store.state.master
  },
},
)
code(Var)
return

::#:
::vue-slot::
::vue.slot::
::slot::
Var =
(
// 定义组件：base-layout

<div class="container">
  <header>
    <slot name="header"></slot>
  </header>
  
  <main>
    <!-- Defalut -->
    <slot></slot>
  </main>
  
  <footer>
    <slot name="footer"></slot>
  </footer>
</div>
---
// 使用组件

<base-layout>
  <template #header>
    <h1>Here might be a page title</h1>
  </template>

  <p>A paragraph for the main content.</p>
  <p>And another one.</p>

  <template #footer>
    <p>Here's some contact info</p>
  </template>
</base-layout>
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
</head>

<body>
    <div id="app">
        <test>
          <!-- https://vuejs.org/v2/guide/components-slots.html#Scoped-Slots -->
          <!-- 注意，外层必须用 template 包裹 -->
          <template #default='slotProps'>
            <div class='firstname'>{{ slotProps.user.firstName }}</div>
          </template>

          <!-- 推荐直接解构使用 -->
          <template #footer='{ user }'>
            <div class='lastname'>{{ user.lastName }}</div>
          </template>


          <!-- 如果不担心「过时」语法，也可以采用以下这种方式，更加简洁，只是 vue2.6 以后不推荐了。 slot='default' 可以省略 -->
          <!-- <div class='lastname' slot="default" slot-scope='{ user }'>{{ user.lastName }}</div> -->
        </test>
    </div>
</body>
<script>

const testConstructor = Vue.extend({
    template: ``
    <div class="test">
      <slot v-bind:user='user'></slot>

      <slot name='footer' v-bind:user='user'></slot>
    </div>
    ``,
    data () {
       return {
         user: {
          firstName: 'lee',
          lastName: 'mp',
         }
       }
    }
})

Vue.component('test', testConstructor)

var vue = new Vue({
    el: '#app',
})
</script>
</html>
)
txtit(Var)
return

::v-filter::
::vue-filter::
::v-filters::
::vue-filters::
Var =
(
<!-- 模板 -->
{{ message | capitalize }}

<!-- v-bind -->
<div :text='message | capitalize'></div>

<!-- 过滤器可以多个 -->
{{ message | filterA | filterB }}

<!-- 过滤器可以入参，这样的话 filterA 函数会接受三个参数 -->
{{ message | filterA('args1', 'args2')) }}
---
// 局部定义
{
	filters: {
		capitalize (value) {
			if (!value) return ''
			value = value.toString()
			return value.charAt(0).toUpperase() + value.slice(1)
		}
	}
}

// 全局定义
Vue.filter('capitalize', function (value) {
	if (!value) return ''
	value = value.toString()
	return value.charAt(0).toUpperase() + value.slice(1)
})
)
txtit(Var)
return

::modell::
::model.class::
::model.loading::
Var =
(
:class="{ 'emptying': town.empty, 'loading': town.loading }"
)
code(Var)
return

::cardnum::
::cardnumber::
Var =
(
<template>
    <div class='roll-warp'>
        <DigitRoll :rollDigits="beautifyNum" :dur='dur' ref='digitroll' :flipStra="flipStra" />
    </div>
</template>
<script>
import DigitRoll from '@huoyu/vue-digitroll'
import { PrefixInteger } from '@/utils/utils'

export default {
    data () {
        return {
            beautifyNum: '00000',
        }
    },
    components: { DigitRoll },
    props: {
        num: {
            default: '00000'
        },
        dur: {
            default: 1500
        }
    },
    watch: {
      num (newV, oldV) {
        this.changeDigit(PrefixInteger(newV, 5))
      }
    },
    methods: {
        changeDigit(v) {
            // 刷新
            this.$refs.digitroll.setDigit(v);
        },
        // 没有变化也要动画
        flipStra(before, next) {
            if (next <= before && (before != 0 && next != 0)) {
                return true;
            }
            return false;
        },
    }
}
</script>
<style lang="scss">


.roll-warp {
    width: rem(320);
}

.d-roll-bar {
    div {
        font-family: 'LESLIE-Regular';
        font-size: rem(67);
        color: #37e5fc;
        width: rem(50);
        height: rem(70);
        line-height: rem(70) !important;
        background-color: #00263c;
    }
}
</style>
<docs>
# Usage

https://github.com/gitWhatever/vue-digitroll

```html
<CardNumber :rollDigits="123456" :dur='1500'></CardNumber>
```

### 立即刷新
```JavaScript
this.$refs.CardNumber.changeDigit()
```
</docs>
)
code(Var)
return


::shensuo::
::collect::
::zhedie::
Var =
(
<div class='collapse'>
    <div class="collapse__title" @click='collapse'>基本样式</div>
    <div class='collapse__content'>
      
    </div>
</div>
---
collapse(e) {
  // 获取标题栏DOM
  const $title = e.target
  // 容器
  const $collapse = $title.parentNode

  // 获取标题的高度
  const title_height = $title.clientHeight
  // 获取容器当前高度
  const current_height = $collapse.clientHeight
  // 获取容器真实高度
  const collapse_height = $collapse.scrollHeight

  // 如果 『collapse高度』 和 『title高度』 相等，那么说明它现在是 close 
  if (current_height === title_height) {
    // open
    $collapse.style.setProperty('height', collapse_height + 'px')
    // rotate icon 
    $title.classList.remove('close')
  } else {
    // hack：容器默认没有高度（auto），当高度改变也不会有动画效果，所以采用一种技巧：先设置一下高度，再进行变化才有动画了。
    $collapse.style.setProperty('height', collapse_height + 'px')
    // close
    setTimeout(() => $collapse.style.setProperty('height', title_height + 'px'), 0)
    // rotate icon
    $title.classList.add('close')
  }
},
---
.collapse {
  transition: all 0.35s ease;
  overflow: hidden;

  .collapse__title {
    position: relative;
    padding-left: 15px;

    font-size: 14px;
    font-weight: bold;
    color: #262626;
    user-select: none;
    cursor: pointer;

    &::after {
      content: '';
      @include ycenter;
      left: 0;
      width: 0;
      height: 0;

      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid #000;
      transition: .3s transform ease;
    }

    &.close::after {
      transform: translateY(-50`%) rotate(-90deg);
    }
  }

  .collapse__content {
    
  }
}
)
txtit(Var)
return

::shuangxiang::
::shuangxiangshuju::
Var =
(
function defineReactive(obj, key, val) {
  Object.defineProperty(obj, key, {
    enumerable: true,
    configurable: true,
    get () {
      console.log('get hook')
      return val
    },
    set (newVal) {
      console.log('set hook')
      if (val === newVal) {
        return
      }
      val = newVal
    }
  })
}

// demo
var obj = {}

// 初始化对象的 foo 属性
defineReactive(obj, 'foo', 123)

// 访问对象的foo属性，触发 get 钩子
console.log(obj.foo)

// 设置 foo 属性，触发 set 钩子
obj.foo = '456'


//////////////////////////////////////////////
// 注意，js 无法监听对象属性的添加和删除
//////////////////////////////////////////////

defineReactive(obj, 'list', [1,2,3])

obj.list[0] = 'fuck' // 不会触发set hook，但居然还额外触发了 get hook。

obj.list = 123 // 触发 set hook
)
code(Var)
return



::watchr::
::watch.$::
::watch.$route::
::watch.route::
::watchroute::
Var =
(
watch: {
   '$route': {
      immediate: true,
      handler(to, from) {
         console.log(20200513164256, to, from)
      }
   }
},
// 官方建议用这个代替
// https://router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards
beforeRouteUpdate(to, from, next) {
  console.log(20200513153623, to, from)
  next();
},
)
code(Var)
return

::watchi::
Var =
(
watch: {
  data_20201229700: {
    deep: true,
    immediate: true,
    handler(newV, oldV) {
      if (newV) {

      }
    },
  },
},
)
code(Var)
return

::vnode::
::vue.h::
Var =
(
 methods: {
    go() {
        const h = this.$createElement;
        // https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth
        const vnode = h('p', null, [
                h('span', null, '内容可以是 '),
                h('i', { style: 'color: teal' }, 'Fuckyou')
        ])
        
        this.$msgbox({
            title: '消息',
            message: vnode,
            showCancelButton: true,
            confirmButtonText: '添加',
            cancelButtonText: '取消',
            beforeClose: (action, instance, done) => {
                if (action === 'confirm') {
                    instance.confirmButtonLoading = true;
                    instance.confirmButtonText = '执行中...';
                    setTimeout(() => {
                        done();
                        setTimeout(() => {
                            instance.confirmButtonLoading = false;
                        }, 300);
                    }, 3000);
                } else {
                    done();
                }
            }
        }).then(action => {
            this.$message({
                type: 'info',
                message: 'action: ' + action
            });
        });
    }
},
)
code(Var)
return


::vuec::
::vue.c::
::vue.extend::
::vue.extends::
::vue.cmp::
::vue.component::
::vue.components::
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var =
(
const testConstructor = Vue.extend({
    template: ``<div class="test">{{ foo }}</div>``,
    data () {
       return {
           foo: 'test',
       }
    },
    props: {

    },
    beforeMount() {
      console.log('test')
    }
})

const initInstance = new testConstructor({
    el: document.createElement('div')
})

document.body.appendChild(initInstance.$el);

setTimeout(() => {
    initInstance.foo = 'bar'
}, 1000);
---
const fooConstructor = Vue.extend({
    name: 'foo',
    template: ``<div class="test" @click='fooClickHandler'>点我调用bar的barHandler方法</div>`,
    data () {
       return {
           foo: 'foo',
       }
    },
    methods: {
        fooClickHandler() {

            const bar = this.$parent.$children.find(_ => _.$options.name === 'bar')

            console.log(20200229101557, bar)

            bar.barHandler()

            console.log(20200229101217, this.$parent.$refs.bar)

            this.$parent.$refs.bar.barHandler()
        },  
    },
    beforeMount() {
      console.log('foo')
    }
})

Vue.component('foo', fooConstructor)

const barConstructor = Vue.extend({
    name: 'bar',
    template: `<div class="test">{{ bar }}</div>`,
    data () {
       return {
           bar: 'bar',
       }
    },
    methods: {
        barHandler() {
            console.log(20200229101241, 'barHandler')
        }
    },
    beforeMount() {
      console.log('bar')
    }
})

Vue.component('bar', barConstructor)
---
import Vue from 'vue';
import mapbox from './mapbox.vue'

const mapboxConstructor = Vue.extend(mapbox);

let _initInstance;

const initInstance = () => {
  _initInstance = new mapboxConstructor({
    el: document.createElement('div')
  });
  document.body.appendChild(_initInstance.$el);
};

const show = ({ name, list, center }) => {
  if (!_initInstance) {
    initInstance();
  }

  _initInstance.value = true;
  _initInstance.name = name;
  _initInstance.list = list;
  _initInstance.center = center;
}

const close = () => {
  Vue.nextTick(() => {
    _initInstance && (_initInstance.value = false)
  });
}

export default {
  show,
  close,
}
---
// package/button/index.js
import Button from './src/Button.vue'

Button.install = Vue => {
      Vue.component(Button.name, Button)
}

export default Button
---
// package/index.js
import Button from './button'
const components = [Button]

const install = Vue => {
  if (install.installed) return;
  install.installed = true

  components.map(c => Vue.use(c))
}

if (typeof window !== 'undefined' && window.Vue) {
  install(window.Vue);
}

export default {
  /**
   * import hongUI from 'hongui'
   * Vue.use(hongUI)
   */
  install,
  /**
   * import { Button } from 'hongui'
   * Vue.use(Button)
   */
  ...components,
}
---
<template>
  <div class="SevenWatch">
    <dgTable></dgTable>
  </div>
</template>

<script>
import Vue from 'vue'
import { deepExtend } from '@/utils/utils'
import { getMixins } from '@/mixins/data.js'
import table from '../table/_table.vue'
import detail from '../table/_detail.vue'
import config from './config'

const dataMixins = getMixins('sevenWatch')

// 准备好「详情组件」, 注入 mixins 上下文
const itemDetail = Vue.extend(deepExtend({}, detail, dataMixins, config))

// 注册「table」组件，并且为它设置 itemDetail
const dgTable = Vue.extend(deepExtend({}, table, dataMixins, config, { components: { itemDetail } }))

export default {
  name: 'SevenWatch',
  components: {
    dgTable,
  },
}
</script>
)
txtit(Var)
return

::vuedir::
::vue.dir::
::v-dir::
::v-zhiling::
::zhiling::
::v-aip::
::vapi::
::vuezl::
::vue-zhiling::
::v-zhiling::
::vue.dir::
::vue.zhiling::
::vue-zhiling::
::vue.chajian::
::vue-chajian::
::vue.plugin::
::vue-plugin::
::vue.plugins::
::vue-plugins::
::vuezhiling::
::vuez::
::v-tip::
::vtip::
::vlog::
::v-log::
::v-tooltip::
Var = 
(
  // <div id='box' v-drag='{ warp: "#app", tap: tapHandler, longTap: longTapHandler }'></div>
  Vue.directive('drag', {
    inserted (el, { value = {} }) {
      // 获取组件的容器 
        const container = value.warp ? document.querySelector(value.warp) : document.body

        const maxW = container.offsetWidth - el.offsetWidth

        const maxH = container.offsetHeight - el.offsetHeight

        let distanceLeft, distanceTop

        let longClick, timer

        el.addEventListener('touchstart', e => {
            longClick = 0, timer = setTimeout(() => longClick = 1, 500)

            distanceLeft = e.targetTouches[0].clientX - el.offsetLeft
            distanceTop = e.targetTouches[0].clientY - el.offsetTop

            document.addEventListener('touchmove', e => e.preventDefault(), { passive: false })
        })

        el.addEventListener('touchmove', e => {
          // 清空 timer
            clearTimeout(timer), timer = 0

            let left = e.targetTouches[0].clientX - distanceLeft
            let top = e.targetTouches[0].clientY - distanceTop

            // 防止左右越界
            if (left <= 0)    left = 0
            if (left >= maxW) left = maxW

            // 防止上下越界
            if (top <= 0)    top = 0 
            if (top >= maxH) top = maxH

            el.style.left = left + 'px'
            el.style.top  = top + 'px'
        })

        el.addEventListener('touchend', e => {
          // 如果是点击事件
            if (timer != 0 && longClick == 0) 
              value.tap && value.tap()

            // 如果是长按事件（只有松开的一瞬间才会触发）
            if (timer && longClick == 1)
                value.longTap && value.longTap()

            document.removeEventListener('touchmove', e => e.preventDefault())
        })
    }
  })
  ---
  /* .waves-ripple {
      position: absolute;
      border-radius: 100`%;
      background-image: radial-gradient(circle, rgba(255, 255, 255, .35) 100`%, rgba(0, 0, 0, .15) 100`%);
      background-clip: padding-box;
      pointer-events: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-transform: scale(0);
      -ms-transform: scale(0);
      transform: scale(0);
      opacity: 1;
  }

  .waves-ripple.z-active {
      opacity: 0;
      -webkit-transform: scale(2);
      -ms-transform: scale(2);
      transform: scale(2);
      -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
      transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
      transition: opacity 1.2s ease-out, transform 0.6s ease-out;
      transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;
  } */
  import './waves.css';

  const vueWaves = {};
  vueWaves.install = (Vue, options = {}) => {
    Vue.directive('waves', {
      bind(el, binding) {
        el.addEventListener('click', e => {
          const customOpts = Object.assign(options, binding.value);
          const opts = Object.assign({
              ele: el, // 波纹作用元素
              type: 'hit', // hit点击位置扩散center中心点扩展
              color: 'rgba(0, 0, 0, 0.15)' // 波纹颜色
            }, customOpts),
            target = opts.ele;
          if (target) {
            target.style.position = 'relative';
            target.style.overflow = 'hidden';
            const rect = target.getBoundingClientRect();
            let ripple = target.querySelector('.waves-ripple');
            if (!ripple) {
              ripple = document.createElement('span');
              ripple.className = 'waves-ripple';
              ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + 'px';
              target.appendChild(ripple);
            } else {
              ripple.className = 'waves-ripple';
            }
            switch (opts.type) {
              case 'center':
                ripple.style.top = (rect.height / 2 - ripple.offsetHeight / 2) + 'px';
                ripple.style.left = (rect.width / 2 - ripple.offsetWidth / 2) + 'px';
                break;
              default:
                ripple.style.top = (e.pageY - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop) + 'px';
                ripple.style.left = (e.pageX - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft) + 'px';
            }
            ripple.style.backgroundColor = opts.color;
            ripple.className = 'waves-ripple z-active';
            return false;
          }
        }, false);
      }
    })
  };

  export default vueWaves;

  /* 
  main.js 中这样注册使用
  import vueWaves from './directive/waves'
  Vue.use(vueWaves)

  <a class='header__crumbs--btn' @click.stop='goback' v-waves>返回</a>
   */
---

// <div v-loader='fuck'></div>
Vue.directive('loader', {
    bind(el, { value }) {
        console.log('bind', el, value)
    },
    inserted(el, { value }) {
        console.log('inserted', el, value)
    },
    unbind(el, { value }) {
        console.log('unbind', el, value)
    },
    update(el, { value }) {
        console.log('update', el, value)
    },
    componentUpdated(el, { value }) {
        console.log('componentUpdated', el, value)
    },     
})
---
import store from '@/store'

// 轮询器
const polls = {}

export default {
    install(Vue, options = {}) {
        Vue.directive('api', {
            bind(el, { value = {} }) {
                // 必须是 ‘_’ 开头，是否包含模块（无视大小写）
                const target = actionName => actionName.includes('_data_') && actionName.toUpperCase().includes(value.toUpperCase() + '/')

                // 筛选 actions
                const _actions = Object.keys(store._actions).filter(target)

                // fixbug: 如果没有任何索引
                if (!_actions.length) {
                    // return console.warn(`v-api : 『${value}』 not fount any actions`)
                }

                // 动态轮询时间
                const getPollsTime = ((timer = [5, 8, 16, 32, 60], len = timer.length, current = 0) => () => timer[current++ `% len] * 1000)()

                ;(async function poll() {
                    // 请求队列
                    const queue = _actions.map(action_name => store.dispatch(action_name))

                    // Promise.all 的升级版本， 等待队列完成
                    const _queue = await Promise.allSettled([...queue])

                    // 下一次轮询的时间
                    const nextTime = getPollsTime()

                    // fixbug: 只有登录了才允许请求
                    if (store.state.AppData.token) {
                        // 开始轮询请求
                        const timer = setTimeout(() => window.requestAnimationFrame(poll), nextTime)

                        // fixbug: 可能有多次触发，所以改为数组存储
                        polls[value] ? polls[value].push(timer) : (polls[value] = [timer])
                    }
                })()
            },
            unbind(el, { value }) {
                console.log(value, '断开了轮询机制')
                // fixbug: 可能有多次触发，所以改为数组存储，批量关闭
                polls[value].forEach(timer => clearTimeout(timer))
            },
        })
    },
}
---
import { isDEV } from '@/utils/utils'

const useDiv = (setDiv) => {
    let div = document.createElement('pre')
    setDiv(div)
    document.body.append(div)
    return [div, () => div.remove()]
}

const [div, remove] = useDiv(e => {
    e.style.position = 'absolute'
    e.style.background = 'rgb(13 11 14 / 50`%)'
    e.style.color = 'white'
    e.style.fontSize = '1em'
    e.style.left = 0
    e.style.top = 0
    e.style.maxWidth = '90vh'
    e.style.maxHeight = '26em'
    e.style.overflowY = 'scroll'
    e.style.minWidth = '20em'
    e.style.padding = '1em'
    e.style.zIndex = -1
    e.style.opacity = 0
    e.style.backdropFilter = 'blur(10px)'
    e.style.boxShadow = '5px 5px 20px #cbcdd3'
    e.style.borderRadius = '15px'
})

export default {
    install(Vue) {
        Vue.directive('log', {
            bind(el, { value }) {
                if (!isDEV) return

                el.__LOG__ = JSON.stringify(value, null, 2)

                // 点击打印日志
                div.addEventListener('click', (event) => {
                    try {
                        console.log('✍️', JSON.parse(el.__LOG__))
                    } catch (err) {
                        console.log('✍️', el.__LOG__)
                    }
                })

                // 按下 esc 的时候，隐藏所有 div
                document.addEventListener('keydown', (event) => {
                    if (event.keyCode === 27) {
                        div.style.zIndex = -1
                        div.style.opacity = 0
                    }
                })

                el.addEventListener('mousemove', (event) => {
                    const { pageX, pageY, shiftKey } = event

                    if (shiftKey) {
                        const div_top = pageY + 20
                        const div_left = pageX + 20

                        const cur_left = div.clientWidth + div_left
                        const cur_top = div.clientHeight + div_top

                        const bodywidth = document.querySelector('body').scrollWidth
                        const bodyheight = document.querySelector('body').scrollHeight

                        const isOverX = cur_left > bodywidth
                        const isOverY = cur_top > bodyheight

                        div.style.top = isOverY ? div_top - div.clientHeight - 50 + 'px' : div_top + 'px'
                        div.style.left = isOverX ? div_left - div.clientWidth - 50 + 'px' : div_left + 'px'

                        div.style.zIndex = '1993100337'
                        div.style.opacity = 1

                        div.innerHTML = el.__LOG__
                    }
                })
            },
            update(el, { value }) {
                if (!isDEV) return
                el.__LOG__ = JSON.stringify(value, null, 2)
            },
        })
    }
}
###下面是旧版，用多个DIV的版本
/**
 * 
 import tip from '@/directive/tip/index.js'
 Vue.use(tip)
 <div v-tip="`<div> <p class='mb-1'>预申报今天来莞的跨境司机统计人数，掌握我市跨境运货司机预期来莞情况。</p> 更新周期：实时</div>`"></div>
 */
const useDiv = (setDiv) => {
    let div = document.createElement('div')
    setDiv(div)
    document.body.append(div)
    return [div, () => div.remove()]
}

export default {
    install(Vue) {
        Vue.prototype.__tip__ = __tip__

        Vue.directive('tip', {
            bind(el, { value = '' }) {
                // 创建一个容器
                const [div, remove] = useDiv(e => {
                    e.style.position = 'absolute'
                    e.style.background = 'rgba(0, 0, 0, .5)'
                    e.style.color = 'white'
                    e.style.fontSize = '1.2em'
                    e.style.left = 0
                    e.style.top = 0
                    e.style.maxWidth = '26em'
                    e.style.minWidth = '20em'
                    e.style.padding = '1.2em'
                    e.style.zIndex =-1
                    e.style.opacity = 0
                })

                div.innerHTML = value

                el.addEventListener('mousemove', (event) => {
                    const { pageX, pageY } = event

                    const div_top = pageY + 20  
                    const div_left = pageX + 20 

                    document.title = `${div_top}, ${div_left}`

                    const cur = div.clientWidth + div_left
                    const bodywidth = document.querySelector('body').scrollWidth

                    div.style.top = div_top + 'px'

                    if (cur > bodywidth) {
                        div.style.left = div_left - div.clientWidth  + 'px'
                    } else {
                        div.style.left = div_left + 'px'
                    }

                    div.style.opacity = 1
                    div.style.zIndex = '1993100337'
                })

                el.addEventListener('mouseleave', (event) => {
                    div.style.zIndex = -1
                    div.style.opacity = 0
                })
            }
        })
    } 
}
---
const cache = new Set()

/**
<template>
    <div class='box-word' v-progressiveBGImage='[placeholder, bg]'></div>
</template>
<script>
export default {
  data () {
    return {
        placeholder: require('@/assets/layer/word-box.small.png'),
        bg: require('@/assets/layer/word-box.png'),
    }
  },
}
</script>
 */
export default {
    install(Vue) {
        Vue.directive('progressiveBGImage', {
            bind(el, { value }) {
                // 外部传入两个变量，第一个变量是占位图，第二个是真图
                const [placeholder, src] = value

                // fixbug: 如果已经加载过了，那么不需要重复
                if (cache.has(src)) {
                    el.style.backgroundImage = `url(${src})`
                } else {
                    // 先用占位图作背景图
                    el.style.backgroundImage = `url(${placeholder})`

                    // 老三样
                    const img = new Image()
                    img.src = src
                    img.onload = () => (el.style.backgroundImage = `url(${src})`)
                }
                
                // 加入缓存
                cache.add(src)
            },
        })
    },
}

)
txtit(Var)
return



::components::
::component::
::dongtaizujian::
::dongtaicomponent::
Var =
(
<component v-show="isShow" :is="activeForm" :fuckOption="123"></component>

import PieChartForm from './ChartForm/PieChartForm'
import BarChartForm from './ChartForm/BarChartForm'
import LineChartForm from './ChartForm/LineChartForm'

data () {
  return {
    isShow: true,
    chartActiveItem: null,
  }
},
components: {
    BarChartForm,
    PieChartForm,
    LineChartForm,
},
computed: {
    activeForm() {
        return this.chartActiveItem ? this.chartActiveItem.constructor.formName : undefined
    },
},
---
<template>
    <div class='layout'>
        <component :is='tool' v-if='tool'></component>
    </div>
</template>

<script>

export default {
    name: 'Layout',
    watch: {
      '$route': {
          deep: true,
          immediate: true,
          handler (newV, oldV) {
            // 获取当前路由名称
            const name = newV.name || 'Index'
            // 设置当前工具栏
            this.tool = () => import(`@/components/tools/${name}`)
          }
      }
    },
}
</script>
)
txtit(Var)
return  

::vue.$on::
::vue.on::
::vue.emit::
::vue.$emit::
::$on::
Var =
(
created: function () {
  this.$root.$on('undo', this.undo)
  this.$root.$on('redo', this.redo)
},
beforeDestroy: function () {
  this.$root.$off('undo', this.undo)
  this.$root.$off('redo', this.redo)
},
---
<button @click="$root.$emit('undo')">
<button @click="$root.$emit('redo')">
)
txtit(Var)
return
return

:?:vue.rule::
:?:vue.rules::
Var =
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
</head>

<body>
    <div id="app">
        <button @click='handleClick'>test</button>
        <button @click='handleClick2'>test2</button>
    </div>
</body>
<script>

var vue = new Vue({
    el: '#app',
    data: {
        foo: 1,
        bar: 'abc'
    },
    rules: {
        foo: { validate: value => value > 1, message: 'foo must be greater than one' },
        bar: { validate: value => value.length > 5, message: 'bar length must be lonnger than five' },
    },
    methods: {
        // 只匹配第一条
        test() {
            // 获取验证规制配置
            const rules = this.$options.rules
            // 找到第一条不符合规则的数据
            const target = Object.keys(rules).find(k => !rules[k].validate(this[k]))
            // 返回错误信息
            return target ? rules[target].message : ''
        },
        // 匹配所有
        tests() {
            // 获取验证规制配置
            const rules = this.$options.rules
            // 找到所有不符合规则的数据
            const target_ary = Object.keys(rules).filter(k => !rules[k].validate(this[k]))
            // 用数组形式，返回两个工具 // 1. 是否通过？ // 2. 一个遍历工具
            return [ target_ary.length > 0, fn => target_ary.forEach(k => fn(k, rules[k].message)) ]
        },
        handleClick () {
            // 开始验证数据
            const failMsg = this.test()
            // 如果有错误信息，尽早提示并且返回
            if (failMsg) {
                // 输出错误信息
                return console.error(failMsg)
            }

            // some success logic...
            console.log('ok')
        },
        handleClick2 () {
            // 开始验证数据
            const [err, callback] = this.tests()

            // 如果有错误信息，尽早提示并且返回
            if (err) {
                // 处理错误信息
                return callback((key, msg) => console.error(`${key}: ${msg}`))
            }

            // some success logic...
            console.log('ok')
        }
    }
})
</script>
</html>
)
code(Var)
return

::async.import::
::import.async::
::async.imp::
::imp.async::
::asyncimport::
::importasync::
::asyncimp::
::impasync::
::async::
Var =
(
setTimeout(async () => {
    // 动态引入组件
    const data = () => import(`../grids/万江.json`)
    // 解析 promise
    const json = await data()
    // 获取三要素
    const { beLongTo, name, latLot } = json.default
    // 打开 network 可以发现确实是异步加载的。
    console.log(beLongTo, name, latLot)
}, 3000);
---
<template>
    <component :is="component" :data="data" v-if="component" />
</template>

<script>
export default {
    name: 'index',
    data() {
        return {
            component: null
        }
    },
    props: ['data'],
    watch: {
        'master.id': {
            handler(val) {
                // 获取当前主角的数据类型
                const type = this.maybe(_ => this.master.dataForm.dataType, 'default')
                // 动态引入组件
                this.component = () => import(``./modules/${type}``)
            },
            // 立即执行，解决首次初始化的问题
            immediate: true,
        }
    },
}
</script>
---
<template>
    <component :is='fuck' :data='data'></component>
</template>

<script>
    export default {
        data() {
            return {
                fuck: null
            }
        },
        props: ['type', 'data'],
        mounted() {
            this.fuck = import(``/templates/${this.type || 'default'}``)
        },
    }
</script>
---
const _ = await import(/* webpackChunkName: "lodash" */ 'lodash')
---
button.onclick = e => import(/* webpackChunkName: "print" */ './print').then(module => {
  var print = module.default
  print()
})
---
// router.js
const Layout = r => require.ensure([], () => r(require('@/layout/layout.vue')), 'Layout')
)
txtit(Var)
return

::vue.install::
Var =
(
const commander = {
    data() {
        return {
            
        }
    },
    methods: {
        
    },
    watch: {

    },
    beforeCreate() {
       console.log(20200731221610, 'commander') 
    }
}

export default {
    install(Vue) {
        const $cmd = new Vue(commander)
        window.$cmd = Vue.prototype.$cmd = $cmd
    }
}
)
code(Var)
return

::finc::
::findc::
::findcmp::
::findcomponent::
::findcomponents::
Var =
(
// 向上寻找组件
const findComponentUpward = (ctx, name) => {
    // ...
    const names = typeof name === 'string' ? [name] : name

    // ...
    let p = ctx.$parent

    // ...
    let pname = p.$options.name

    // ...
    while (p && (!pname || names.indexOf(pname) < 0)) {
        // ...
        p = p.$parent

        // ...
        if (p) pname = p.$options.name
    }
    
    // ...
    return p
}

// Find components upward
const findComponentsUpward = (context, componentName) => {
  // ...
    let parents = []

    // ...
    const parent = context.$parent

    // ...
    if (parent) {
      // ...
        if (parent.$options.name === componentName) parents.push(parent)

        // ...
        return parents.concat(findComponentsUpward(parent, componentName))
    }

    // ...
    return []
}

---
// 向下寻找一个组件
const findComponentDownward = (ctx, componentName) => {
    // ...
    const childrens = ctx.$children

    // ...
    let children = null

    // ...
    if (childrens.length) {
        // ...
        childrens.forEach(child => {
            // ...
            const name = child.$options.name

            // ...
            if (name === componentName) children = child
        })

        // ...
        for (let i = 0, len = childrens.length; i < len; i++) {
            // ...
            const child = childrens[i]

            // ...
            const name = child.$options.name

            // ...
            if (name === componentName) {
                // ...
                children = child

                break
            } else {
                // poll...
                children = findComponentDownward(child, componentName)

                // ...
                if (children) break

            }
        }
    }

    return children
}

// 向下寻找多个组件
const findComponentsDownward = (ctx, componentName, components = []) => {
    // ...
    let childrens = ctx.$children

    // ...
    if (childrens.length) {
        // ...
        childrens.forEach(child => {
            // ...
            const name = child.$options.name

            // ...
            const childs = child.$children

            // ...
            if (componentName === name) components.push(child)

            // ...
            if (childs.length) {
                // poll...
                const findChilds = findComponentsDownward(child, componentName, components)

                // ...
                if (findChilds) components.concat(findChilds)
            }
        })
    }

    return components
}
---
// Find brothers components
const findBrothersComponents = (context, componentName, exceptMe = true) => {
    let res = context.$parent.$children.filter(item => item.$options.name === componentName)

    let index = res.findIndex(item => item._uid === context._uid)

    if (exceptMe) res.splice(index, 1)

    return res
}
)
txtit(Var)
return

::vue-echart::
::vue-echarts::
::vue-chart::
::vue-charts::
::v-chart::
::v-charts::
::vchart::
::vue.chart::
::vcharts::
::vue.charts::
Var =
(
import echarts from 'echarts'
import VCharts from 'vue-echarts'

window.echarts = echarts
Vue.use(VCharts)

<v-chart class='u-full chart' :options="option"></v-chart>
---
export default {
    data () {
        return {
            option: {}
        }
    },
    methods: {
        renderChart() {
             const grid = { left: '5`%', right: '5`%', bottom: '15`%', top: '30`%', }

            const xAxis = [{
                type: "category",
                axisTick: { show: true, },
                axisLine: { show: false, },
                axisLine: { lineStyle: { color: "rgba(255, 255, 255, .2)" } },
                axisLabel: { textStyle: { padding: 8, color: '#fff', fontSize: '16' } },
                data: ['2018', '2019', '2020'],
            }]

            const yAxis = {
                type: 'value',
                splitLine: { lineStyle: { color: 'rgba(255, 255, 255, .05)', type: 'solid' }, },
                axisTick: { show: false },
                axisLine: { show: false, },
                axisLabel: { show: false },
                max: 8,
            }

            const series = [{
                type: 'line',
                symbol: 'circle',
                symbolSize: 15,
                itemStyle: { color: '#abe959', shadowBlur: 0, lineStyle: { color: '#abe959', width: 5, } },
                areaStyle: {
                    color: new echarts.graphic.LinearGradient(
                        // 右/下/左/上
                        0, 0, 0, 1,
                        [
                            { offset: 0, color: '#abe959' },
                            { offset: 1, color: 'rgba(38, 214, 147, .1)' }
                        ]
                    `),
                },
                label: {
                    show: true,
                    position: 'top',
                    distance: 8,
                    formatter: params => params.value + '天',
                    textStyle: { color: '#b2ff4e', fontSize: 22 }
                },
                data: [7, 5, 3],
            }]

            this.option = { grid, xAxis, yAxis, series }
        }
    },
    mounted() {
        this.renderChart()
    }
}
)
txtit(Var)
return

::test.vue::
Var =
(
  <template>
      <div class="test">
          <!-- 组件列表 -->
          <ul class='center' v-if='!name'>
              <li v-for='(item, index) in items' :key='index' @click='go(item)'> {{ item }}  </li>
          </ul>

          <!-- 来点动画转场 -->
          <transition name="msgbox-bounce">
              <!-- 组件 -->
              <component class='msgbox' :is="name" v-if="name" />
          </transition>
      </div>
  </template>

  <script>
  import Vue from 'vue'
  /**
   * 1. directory {String} -读取文件的路径
   * 2. useSubdirectories {Boolean} -是否遍历文件的子目录
   * 3. regExp {RegExp} -匹配文件的正则
   */
  const VueComponent = require.context('@/components', true, /\.vue$/)

  // 准备导出的模块
  let __Material__ = []

  // 不包含，排除的模块列表
  const exclude = _ => !['./Index.vue'].includes(_)

  // 1. 必须使用 key() 获取所有路径
  // 2. 使用 VueComponent(path).default 获取真实模块内容
  VueComponent.keys().filter(exclude).forEach(path => {
      // 获取 『文件名』 和 『后缀名』
      const [name, ext] = path.substring(path.lastIndexOf('/') + 1).split('.')

      // 目标文件的输出内容
      const output = VueComponent(path).default

      // 以 『文件名』 为 key，模块内容为 value
      // __Material__[name] = Vue.extend(output)

      // 直接全局注册
      Vue.component(name, output)

      // 加入到数组
      __Material__.push(name)
  })

  export default {
      name: 'test',
      data() {
          return {
              name: '',
              items: __Material__
          }
      },
      watch: {
        '$route' (to, from) {
            // fixbug: 手动修改浏览器地址时（/test/fuck => /test/），不会重新加载页面，所以不会还原的问题。
            if (to.fullPath === '/test' || to.fullPath === '/test/') {
              // 还原到 『组件列表』
              this.name = ''
            }
        }
      },
      methods: {
          go(name) {
              // 只是为了修改路由，方便刷新后依然是显示组件
              this.$router.push(`/test/${name}`)
              // 显示组件
              this.name = name
          }
      },
      beforeMount() {
          this.name = this.$router.currentRoute.params.name || ''
      },
  }
  </script>

  <style lang="scss" scoped>
  .center {
      position: absolute;
      left: 50`%;
      top: 50`%;
      transform: translate(-50`%, -50`%);
  }

  li {
      list-style: outside;
      padding-bottom: 5px;
      cursor: pointer;
  }

  .msgbox {
      position: absolute;
      left: 50`%;
      top: 50`%;
      transform: translate(-50`%, -50`%);
  }

  .msgbox-bounce-leave-active,
  .msgbox-bounce-enter-active {
      transition: .3s all ease;
  }

  .msgbox-bounce-enter {
      opacity: 0;
      transform: translate3d(-50`%, -50`%, 0) scale(0.7);
  }

  .msgbox-bounce-leave-active {
      opacity: 0;
      transform: translate3d(-50`%, -50`%, 0) scale(0.9);
  }
  </style>
---
import Vue from 'vue'
import Router from 'vue-router'
import store from '../store'
Vue.use(Router)

// index
const Index = r => require.ensure([], () => r(require('@/pages/Index.vue')), 'Index')

// test
const test = r => require.ensure([], () => r(require('@/pages/test.vue')), 'test')

// 路由配置
var router = new Router({
  // 哈希模式
  mode: 'hash',
  
  // 路由导航
  routes: [
    // 重定向 - 首页
    { path: '/', redirect: '/Index' },

    // 首页
    { path: '/Index', name: 'Index', meta: { title: '首页' }, component: Index },

    // test
    { path: '/test/:name?', name: 'test', meta: { title: '测试' }, component: test },
  ]
})

// 全局路由钩子
router.afterEach((to, from) => {

})

router.beforeEach((to, from, next) => {
    // 放行页面
    next()
})

export default router
---
<!-- router.js: { path: '/test/:name?', name: 'test', meta: { title: '测试' }, component: test }, -->
<template>
    <div class="test">
        <!-- 动态组件 -->
        <component :is="name" v-if="name" />
    </div>
</template>

<script>

export default {
    name: 'test',
    data() {
        return {
            name: '',
        }
    },
    watch: {
        $route: {
            deep: true,
            immediate: true,
            handler(to, from) {
                const { name } = this.$route.params
                const _name = name.replace(/\\/g, '/')
                this.name = () => import(`@/components/${_name}`)
            },
        },
    },
}
</script>

<style lang="scss" scoped>
</style>
)
txtit(Var)
return

::vue.setup::
::setup::
Var =
(
<template>
  <div>
    <div v-if="loading">loading...</div>
    <div v-else-if="error">Error: {{ error }}</div>
    <div v-else>{{ result }}</div>
  </div>
</template>
<script>
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from '@vue/composition-api'

const useFetch = () => {
  const loading = ref(false)
  const error = ref(null)
  const result = ref(null)

  const exec = async (url) => {
    loading.value = true
    error.value = null
    result.value = null
    try {
      result.value = await fetch(url)
    } catch (error) {
      result.value = null
      error.value = error
    } finally {
      loading.value = false
    }
  }

  return { loading, error, exec, result }
}

export default {
  setup (props, context) {
    const { loading, error, exec, result } = useFetch()
    return { loading, error, exec, result }
  },
}
</script>
---
<template>
    <div class="test">
        {{ x }}, {{ y }}
    </div>
</template>

<script>
// api: https://vue-composition-api-rfc.netlify.app/api.html
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from '@vue/composition-api'

export default {
  name: 'test',
  // 只会执行一次，After 『beforeCreate』, Before 『created』
  // 参数一: 就是props； 参数二：Vue instance（因为 setup 无法访问 this）
  setup (props, context) {
    const x = ref(0)
    const y = ref(0)

    const handler = e => {
        x.value = e.clientX 
        y.value = e.clientY
    }

    onMounted(() => window.addEventListener('mousemove', handler))
    onUnmounted(() => window.removeEventListener('mousemove', handler))

    //  in the template so there's no need for .value in templates.
    return { x, y }
  },
}
</script>

<style lang="scss" scoped>
.test {

}
</style>
---
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from '@vue/composition-api'

export default {
    setup() {
        const event = reactive({
            capacity: 4,
            attending: ["Tim", "Bob", "Joe"],
            spacesLeft: computed(() => event.capacity - event.attending.length)
        })
        const increaseCapacity = () => event .capacity++
        return { ...toRefs(event), increaseCapacity }
    }
}
---
<template>
    <button @click="inc">+</button>
    <HelloWorld ref='baz' :count="count" @fuck='fuckHandler'></HelloWorld>
</template>

<script setup>
import { ref } from 'vue'
import HelloWorld from '@/components/HelloWorld'

ref: count = 1

// 用来挂载组件的实例
ref: baz = null

function inc() {
  count++
  console.log(baz)
}

function fuckHandler(...args) {
    console.log(...args)
}

// access the raw ref object by prefixing with $
console.log($count.value)

</script>


<style lang="scss">
</style>
---
<template>
    <div class="hello" @click="clickHandler">
      hello world {{ count }}
    </div>
</template>

<script setup>
import { useContext, defineProps, defineEmit } from 'vue'

// props
const props = defineProps({
    count: Number,
})
console.log(20210506220542, props)


// emit
const emits = defineEmit(['fuck'])
const clickHandler = () => {
    emits('fuck', 'shit')
}

// ctx 知识点：用于暴露组件的属性和方法，不像以前全部无死角暴露
const ctx = useContext()
ctx.expose({
  getName() {
    return 'hello Lee'
  }
})
</script>

<style scoped lang="scss">
</style>

)
txtit(Var)
return


::store::
::store.js::
Var =
(
import { pad } from '@/utils/utils'
import Vue from 'vue'
import Vuex from 'vuex'
import router from '../router'

const getPollsTime = (( timer = [5, 8, 16, 32, 60], len = timer.length, current = 0) => () => timer[current++ `% len] * 1000)()
// const getPollsTime = (( timer = [3, 3, 3, 3, 3, 3], len = timer.length, current = 0) => () => timer[current++ `% len] * 1000)()

const date = new Date()
const year = date.getFullYear()
const month = pad(date.getMonth() + 1, 2)
const preMonth = pad(date.getMonth(), 2)
const day = pad(date.getDate(), 2)

/**
 * 1. directory {String} -读取文件的路径
 * 2. useSubdirectories {Boolean} -是否遍历文件的子目录
 * 3. regExp {RegExp} -匹配文件的正则
 */
const _store = require.context('@/pages', true, /store\.js$/)

/**
 * 1. 必须使用 key() 内置方法获取所有路径。
 */
const __STORE__ = _store.keys().reduce((obj, path) => {
    // 获取模块名: "./City/store.js" => City
    const name = path.substring(2, path.lastIndexOf('/'))

    // （重点）获取模块内容
    const module = _store(path)

    // 兼容 es6 import export 和 CMD require module.export 两种规范
    const __MODULE__ = module.default || module

    // 以 『文件名』 为 key，模块内容为 value
    obj[name] = __MODULE__

    return obj
}, {})

Vue.use(Vuex)

// vue3: export default Vuex.createStore({ state, mutations, actions, modules })
const store = new Vuex.Store({
    strict: false,
    state: {
        // 当前标题
        title: '首页',
        // 记录来路，现在还没有任何作用和使用场景，但没准以后有呢？先留着吧。
        back: { title: '首页', path: '/' },
        // 获取当前月份
        month: [year, month].join('-'),
        // 获取当前天
        day: [year, month, day].join('-'),
        // 获取上个月
        preMonth: [year, preMonth].join('-'),
        // 获取年
        year: year,
        // 额外轮询机制
        polls: [],
        // news: 专门用来存储 t_action 类的停止钩子
        tpolls: [],
    },
    actions: {
        // 更新页面标题，这个标题内容十分重要不可儿戏。因为关系到 'FETCH_DATA' 的判断
        SET_TITLE ({ state, comit, dispatch }, title) {
            // 设置当前标题
            state.title = title
            // 清空额外轮询列表
            dispatch('CLEAR_POLL')
            // 请求数据
            dispatch('FETCH_DATA')
            //请求数据--自定义时间事件
            dispatch('FETCH_TDATA')
        },
        // ...
        SET_POLL ({ state, comit, dispatch }, { name = '', action = () => {} } = {}) {
            // 🔔 think: 我觉得自动去重会方便一点
            dispatch('DEL_POLL', name)
            // 加入请求队列
            state.polls.push({ name, action })
        },
        // ...
        DEL_POLL ({ state, comit, dispatch }, name) {
            state.polls = state.polls.filter(_ => _.name != name)
        },
        // ..
        CLEAR_POLL ({ state, comit, dispatch }) {
            state.polls = []
        },
        async FETCH_DATA ({ commit, state, dispatch, rootState, getters, rootGetters }, isFirst = true) {
            // 获取当前路由
            const name = router.currentRoute.name

            // 查找模块下需要执行的 actions
            let _actions = Object.keys(store._actions).filter(_ => isFirst 
                // 如果是首次的话，那么包含 o_ 规则
                ? (_.includes(``${name}/_``) || _.includes(``${name}/o_``))
                // 如果不是首次的话，只需要包含 _ 规则
                : (_.includes(``${name}/_``))
            `)

            // 请求队列
            const queue = _actions.map(action_name => dispatch(action_name))

            // 额外的请求队列
            const polls = state.polls.map(_ => _.action())

            // Promise.all 的升级版本， 等待队列完成
            const _queue = await Promise.allSettled([...queue, ...polls])

            // poll...
            console.log('poll...')

            // 开始轮询请求
            setTimeout(() => requestAnimationFrame(_ => dispatch('FETCH_DATA', false)), getPollsTime())
        },
        // 执行类似 t10_actionName 的任务，并且 10 s 间隔
        FETCH_TDATA ({ commit, state, dispatch, rootState, getters, rootGetters }) {
            // 获取当前路由
            const name = router.currentRoute.name

            // 清空上一次的轮询
            state.tpolls.forEach(kill => kill())

            // 筛选出所有
            // t_number 类型的请求 => 't10_fuckyou' => ✔
            // /* _.includes(`${name}/`) &&  */
            const t_actions = Object.keys(store._actions).filter(_ => /t(\d+)_/.test(_))

            // 请求队列
            state.tpolls = t_actions.map(action_name => {
                // 获取数字
                const n = action_name.match(/t(\d+)_/)[1]

                // 立即执行一次， 为了解决 setInterval 首次不执行的尴尬
                const timer =  (function(fn, t) {
                    fn && fn()
                    // 返回计时器timer
                    return setInterval(fn, t)
                })(() => dispatch(action_name), n * 1000)

                // 返回消灭定时器的函数
                return () => clearInterval(timer)
            })
        }
    },
    modules: {
        ...__STORE__
    },
})

export default store
---
import Vue from 'vue'
import Vuex from 'vuex'
import router from '../router'

const getPollsTime = (( timer = [5, 8, 16, 32, 60], len = timer.length, current = 0) => () => timer[current++ `% len] * 1000)()

const lastpath = path => path.substr(path.lastIndexOf('/') + 1)
const firstPath = path => path.substr(0, path.indexOf('/')) || path

// 记录路由和 vuex modules 的关系
const routersModules = {}

// 匹配工具
/**
    const items = ['leftSide/_depaInformation', 'leftSide/_taskCompletionData', 'leftSide/_chooseTitleData', 'leftSide/_mainCardPoints', 'rightSide/_generalSituationData', 'rightSide/_basicLib', 'rightSide/_themeLib', 'rightSide/_themeLibList', 'rightSide/_mainFileNumber', 'rightSide/_departmentData', 'rightSide/_cityData', 'dataAssets/tableDataA', 'dataAssets/tableDataB', 'dataAssets/tableDataC', 'dataAssets/tableDataD',]
    const rules = ['leftSide', 'dataAssets']
    const _items = matchBy(items, rules)
    // [ 'leftSide/_depaInformation', 'leftSide/_taskCompletionData', 'leftSide/_chooseTitleData', 'leftSide/_mainCardPoints', 'dataAssets/tableDataA', 'dataAssets/tableDataB', 'dataAssets/tableDataC', 'dataAssets/tableDataD' ]
*/
const matchBy = (items, rules) => items.reduce((p, c, i, a) => {
    // 是否找到
    const isFind = rules.find(rule => c.includes(rule))
    // 找到则迭代
    return isFind ? [...p, c] : p
}, [])
   
/**
 * 1. directory {String} -读取文件的路径
 * 2. useSubdirectories {Boolean} -是否遍历文件的子目录
 * 3. regExp {RegExp} -匹配文件的正则
 */
const _store = require.context('@/views/', true, /store\.js$/)

/**
 * 1. 必须使用 key() 内置方法获取所有路径。
 * fixbug: 排除 ./index 目录中的 store 
 */
const __STORE__ = _store.keys().filter(_ => _.includes('./index/') === false).reduce((obj, path) => {
    // 获取模块名: "./City/store.js" => City
    const name = path.substring(2, path.lastIndexOf('/'))

    // 获取 views
    const views = firstPath(name)

    // （重点）获取模块内容
    const module = _store(path)

    // 兼容 es6 import export 和 CMD require module.export 两种规范
    const __MODULE__ = module.default || module

    // fixbug: 以路径最后一个单位作为 vuex的 模块名
    // new: 支持自定义name
    const module_name = __MODULE__.name || lastpath(name)

    // 以 『文件名』 为 key，模块内容为 value
    obj[module_name] = __MODULE__

    routersModules[views] = routersModules[views] ? [...routersModules[views], module_name] : [module_name]

    return obj
}, {})


Vue.use(Vuex)

const store = new Vuex.Store({
    strict: false,
    state: {
        // 当前标题
        title: '首页',
        // 记录来路，现在还没有任何作用和使用场景，但没准以后有呢？先留着吧。
        back: { title: '首页', path: '/' },
        // news: 专门用来存储 t_action 类的停止钩子
        tpolls: [],
    },
    actions: {
        SET_TITLE ({ state, comit, dispatch }, title) {
            // 设置当前标题
            state.title = title
            // 请求数据
            dispatch('FETCH_DATA')
            //请求数据 - 自定义时间事件
            dispatch('FETCH_TDATA')
        },
        async FETCH_DATA ({ commit, state, dispatch, rootState, getters, rootGetters }, isFirst = true) {
            // 获取当前路由
            const routePath = router.currentRoute.path.substr(1)

            // fixbug: 只针对页面所有的 store, 不去加载其他的 store
            const target_actions = matchBy(Object.keys(store._actions), routersModules[routePath])

            // 查找模块下需要执行的 actions
            let _actions = target_actions.filter(_ => isFirst 
                // 如果是首次的话，那么包含 o_ 规则
                ? (_.includes(``/_``) || _.includes(``/o_``))
                // 如果不是首次的话，只需要包含 _ 规则
                : (_.includes(``/_``))
            `)

           // 请求队列
           const queue = _actions.map(action_name => dispatch(action_name))

           // Promise.all 的升级版本， 等待队列完成
           const _queue = await Promise.allSettled(queue)

           // poll...
           console.log('poll...')

           // 开始轮询请求
           setTimeout(() => requestAnimationFrame(_ => dispatch('FETCH_DATA', false)), getPollsTime())
        },
        // 执行类似 t10_actionName 的任务，并且 10 s 间隔
        FETCH_TDATA ({ commit, state, dispatch, rootState, getters, rootGetters }) {
            // 获取当前路由
            const name = router.currentRoute.name

            // 清空上一次的轮询
            state.tpolls.forEach(kill => kill())

            // 筛选出所有
            // t_number 类型的请求 => 't10_fuckyou' => ✔
            // /* _.includes(``${name}/``) &&  */
            const t_actions = Object.keys(store._actions).filter(_ => /t(\d+)_/.test(_))

            // 请求队列
            state.tpolls = t_actions.map(action_name => {
                // 获取数字
                const n = action_name.match(/t(\d+)_/)[1]

                // 立即执行一次， 为了解决 setInterval 首次不执行的尴尬
                const timer =  (function(fn, t) {
                    fn && fn()
                    // 返回计时器timer
                    return setInterval(fn, t)
                })(() => dispatch(action_name), n * 1000)

                // 返回消灭定时器的函数
                return () => clearInterval(timer)
            })
        }
    },
    modules: {
        ...__STORE__
    },
})

export default store
---
// https://github.com/robinvdvleuten/vuex-persistedstate#encrypted-local-storage
import { Store } from "vuex";
import createPersistedState from "vuex-persistedstate";
import * as Cookies from "js-cookie";

const store = new Store({
  // ...
  plugins: [
    createPersistedState({
      storage: {
        getItem: (key) => Cookies.get(key),
        // Please see https://github.com/js-cookie/js-cookie#json, on how to handle JSON.
        setItem: (key, value) =>
          Cookies.set(key, value, { expires: 3, secure: true }),
        removeItem: (key) => Cookies.remove(key),
      },
    }),
  ],
});
)
txtit(Var)
return

::render::
Var =
(
render(h) {
return h('div', {
    staticClass: 'nuxt-progress',
    class: {
      'nuxt-progress-notransition': this.skipTimerCount > 0,
      'nuxt-progress-failed': !this.canSucceed
    },
    style: {
      'width': this.percent + '`%',
      'left': this.left
    }
  })
}
---
// https://cn.vuejs.org/v2/guide/render-function.html
{
    // 与 ``v-bind:class`` 的 API 相同，
    // 接受一个字符串、对象或字符串和对象组成的数组
    'class': {
      foo: true,
      bar: false
    },
    // 与 ``v-bind:style`` 的 API 相同，
    // 接受一个字符串、对象，或对象组成的数组
    style: {
      color: 'red',
      fontSize: '14px'
    },
    // 普通的 HTML attribute
    attrs: {
      id: 'foo'
    },
    // 组件 prop
    props: {
      myProp: 'bar'
    },
    // DOM property
    domProps: {
      innerHTML: 'baz'
    },
    // 事件监听器在 ``on`` 内，
    // 但不再支持如 ``v-on:keyup.enter`` 这样的修饰器。
    // 需要在处理函数中手动检查 keyCode。
    on: {
      click: this.clickHandler
    },
    // 仅用于组件，用于监听原生事件，而不是组件内部使用
    // ``vm.$emit`` 触发的事件。
    nativeOn: {
      click: this.nativeClickHandler
    },
    // 自定义指令。注意，你无法对 ``binding`` 中的 ``oldValue``
    // 赋值，因为 Vue 已经自动为你进行了同步。
    directives: [
      {
        name: 'my-custom-directive',
        value: '2',
        expression: '1 + 1',
        arg: 'foo',
        modifiers: {
          bar: true
        }
      }
    ],
    // 作用域插槽的格式为
    // { name: props => VNode | Array<VNode> }
    scopedSlots: {
      default: props => createElement('span', props.text)
    },
    // 如果组件是其它组件的子组件，需为插槽指定名称
    slot: 'name-of-slot',
    // 其它特殊顶层 property
    key: 'myKey',
    ref: 'myRef',
    // 如果你在渲染函数中给多个元素都应用了相同的 ref 名，
    // 那么 ``$refs.myRef`` 会变成一个数组。
    refInFor: true
}
---
const fs = require('fs')
const path = require('path')
const render = require('./render')

exports.main_handler = async (event, context,callback ) => {
  let html = fs.readFileSync(path.resolve(__dirname, './demo.html'), {
    encoding: 'utf-8'
  })
  html = render(html, {
    master: '腾讯云云函数团队', // Your name 您的名称
    centralCouplet: '年年有余', // centralCouplet 横批
    upCouplet: '千年迎新春', // upCouplet 上联
    downCouplet: '瑞雪兆丰年' // downCouplet 下联
  })
  return {
    isBase64Encoded: false,
    statusCode: 200,
    headers: { 'Content-Type': 'text/html' },
    body: html
  }
}

// render.js
module.exports = function(tpl,variables) {
  for (let key in variables) {
    const reg = new RegExp('\\$\\{' + key + '\\}', 'g')
    tpl = tpl.replace(reg, variables[key])
  }
  return tpl
}
)
txtit(Var)
return



::kuaijiefangshi::
::kuaijiefs::
::kuaijie::
::lujing::
::chuansongmen::
::chuansongmen::
::kuaijielianjie::
::pop::
Var =
(
// shortcut.js
import { copyToClipboard, waitWhen } from '@/utils/utils'

// 重要认知：这里等于直接获取了组件对象本身，当我修改它时，其实等于修改了组件。
// TODO:干脆一点，直接覆盖整个项目所有的组件，甚至小组件。
const AllComponents = require.context('@', true, process.env.NODE_ENV === 'development' ? /\.vue$/ : /NULL/)

// 如果没有传入指定的 Vue 引用集，那就是用项目所有 Vue 引用
export const shortcut = (VueComponent = AllComponents) => {
    VueComponent.keys().forEach(path => {
        // 直接获取文件内容的引用
        const output = VueComponent(path).default
    
        // 还真有可能存在 undefined 的
        if (output) {
            // init methods 
            if (!output.methods) output.methods = {}
    
            // init created
            if (!output.created) output.created = function() {}
    
            // inject __file methods
            output.methods['__file'] = () => output.__file
    
            // origin created methods
            // fixbug: copy methods 
            const origin = Object.assign({}, { created: output.created })
    
            // inject created addclick callbacks
            output.created = function () {
                // origin created apply
                origin.created.apply(this)
    
                // inject
                ;(async () => {
                    // 等待组件渲染
                    const $el = await waitWhen(_ => this.$el)
                    // 添加点击事件，打印出本文件的目录
                    $el.addEventListener('click', ({ ctrlKey, shiftKey } = event) => {
                        if (ctrlKey || shiftKey) {
                            // 路径
                            const file = this.__file()
                            // 打印
                            window.alert(``已加入剪切板：${file}``)
                            // copy
                            copyToClipboard(file)
                            // 禁止冒泡
                            event.preventDefault(); event.stopPropagation();
                        }
                    })
                })();
            }
        }
    })
}
---
// main.js
import { shortcut } from '@/utils/shortcut.js'

// 开发环境下，开启传送门辅助开发
if (process.env.NODE_ENV === 'development') {
  // 注册传送门
  shortcut()
}
---
// npm i portal-vue
import PortalVue from 'portal-vue'
Vue.use(PortalVue)

<!-- radio -->
<MountingPortal mountTo="#map__radio" append>
    <Radio class='map__radio' v-if='radioValue' v-model="radioValue" @change="handleRadioChange"></Radio>
</MountingPortal>
)
txtit(Var)
return

::v-waves::
::vue-waves::
::vue-bolang::
Var =
(
import './waves.css';

const vueWaves = {};
vueWaves.install = (Vue, options = {}) => {
  Vue.directive('waves', {
    bind(el, binding) {
      el.addEventListener('click', e => {
        const customOpts = Object.assign(options, binding.value);
        const opts = Object.assign({
            ele: el, // 波纹作用元素
            type: 'hit', // hit点击位置扩散center中心点扩展
            color: 'rgba(255, 255, 255, 0.35)' // 波纹颜色
          }, customOpts),
          target = opts.ele;
        if (target) {
          target.style.position = 'relative';
          target.style.overflow = 'hidden';
          const rect = target.getBoundingClientRect();
          let ripple = target.querySelector('.waves-ripple');
          if (!ripple) {
            ripple = document.createElement('span');
            ripple.className = 'waves-ripple';
            ripple.style.height = ripple.style.width = Math.max(rect.width, rect.height) + 'px';
            target.appendChild(ripple);
          } else {
            ripple.className = 'waves-ripple';
          }
          switch (opts.type) {
            case 'center':
              ripple.style.top = (rect.height / 2 - ripple.offsetHeight / 2) + 'px';
              ripple.style.left = (rect.width / 2 - ripple.offsetWidth / 2) + 'px';
              break;
            default:
              ripple.style.top = (e.pageY - rect.top - ripple.offsetHeight / 2 - document.body.scrollTop) + 'px';
              ripple.style.left = (e.pageX - rect.left - ripple.offsetWidth / 2 - document.body.scrollLeft) + 'px';
          }
          ripple.style.backgroundColor = opts.color;
          ripple.className = 'waves-ripple z-active';
          return false;
        }
      }, false);
    }
  })
};

export default vueWaves;
---
.waves-ripple {
    position: absolute;
    border-radius: 100`%;
    background-color: rgba(0, 0, 0, 0.15);
    background-clip: padding-box;
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0);
    opacity: 1;
}

.waves-ripple.z-active {
    opacity: 0;
    -webkit-transform: scale(2);
    -ms-transform: scale(2);
    transform: scale(2);
    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, transform 0.6s ease-out;
    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;
}
---
# usage

main.js
```JavaScript
Vue.use(waves)
```

App.vue
```javascript
<div class="item" v-waves></div>
```	
)
txtit(Var)
return

::swiper::
Var =
(
<!-- swiper -->
<link href="https://cdn.jsdelivr.net/npm/swiper@5.3.6/css/swiper.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/swiper@5.3.6/js/swiper.min.js"></script>
<!-- vue-awesome-swiper -->
<script src="https://cdn.jsdelivr.net/npm/vue-awesome-swiper"></script>

<swiper class="swiper" ref="swiperComponent" :options="swiperOptions" @click-slide="onSwiperClickSlide" @set-translate="onSetTranslate">
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <swiper-slide><img width="100`%" class="w-full h-64" src="https://iph.href.lu/400x400" alt="..."/></swiper-slide>
    <div class="swiper-button-prev" slot="button-prev"></div>
    <div class="swiper-button-next" slot="button-next"></div>
    <div class="swiper-pagination" slot="pagination"></div>
</swiper>

<script>
Vue.use(VueAwesomeSwiper)

new Vue({
    el: '#app',
    data: {
        swiperOptions: {
            loop: true,
            pagination: {
                el: '.swiper-pagination',
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        },
    },
    methods: {
        onSetTranslate() {
            console.log('onSetTranslate')
        },
        onSwiperSlideChangeTransitionStart() {
            console.log('onSwiperSlideChangeTransitionStart')
        },
        onSwiperClickSlide(index, reallyIndex) {
            console.log('Swiper click slide!', reallyIndex)
            this.openPhotoSwipe()
        },
    },
    mounted() {
        console.log('Swiper instances:', this.$refs.swiperComponent.$swiper, this.swiper)
    },
})
</script>
)
txtit(Var)
return

::vue.switch::
::switch.vue::
Var =
(
<template>
  <div>
    <span
      class="toggle-wrapper"
      role="checkbox"
      :aria-checked="value.toString()"
      tabindex="0"
      @click="toggle"
      @keydown.space.prevent="toggle"
    >
      <span
        class="toggle-background"
        :class="backgroundStyles"
      />
      <span
        class="toggle-indicator"
        :style="indicatorStyles" 
      />
    </span>
  </div>
</template>

<script>
export default {
  props: {
    value:{
      type: Boolean,
      required: true
    }
  },
  computed: {
    backgroundStyles() {
      return {
        'gold-mid': this.value,
        'gray-lighter': !this.value
      };
    },
    indicatorStyles() {
      return { transform: this.value ? 'translateX(14px)' : 'translateX(0)' };
    }
  },
  methods: {
    toggle() {
      this.$emit('input', !this.value);
    }
  }
};
</script>

</style scoped>
<style >
.gold-mid{
  background-color: #666666;
}

.gray-lighter{
  background-color: #c2c2c2;
}

.toggle-wrapper {
  display: inline-block;
  position: relative;
  cursor: pointer;
  width: 32px;
  height: 18px;
  border-radius: 9999px;
}

.toggle-wrapper:focus {
  outline: 0;
}

.toggle-background {
  display: inline-block;
  border-radius: 9999px;
  height: 100`%;
  width: 100`%;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: background-color .4s ease;
}

.toggle-indicator {
  position: absolute;
  height: 14px;
  width: 14px;
  left: 2px;
  bottom: 2px;
  background-color: #ffffff;
  border-radius: 9999px;
  box-shadow:  0 2px 4px rgba(0, 0, 0, 0.1);
  transition: transform .4s ease;
}
</style>
)
code(Var)
return

::vue.select::
::select.vue::
Var =
(
<template>
  <div
    class="custom-select"
    :tabindex="tabindex"
    @blur="open = false"
  >
    <div
      class="selected"
      :class="{open: open}"
      @click="open = !open"
    >
      {{ selected }}
    </div>
    <div
      class="items"
      :class="{selectHide: !open}"
    >
      <div
        class="item"
        v-for="(option, i) of options"
        :key="i"
        @click="selected=option; open=false; $emit('input', option)"
      >
        {{ option }}
      </div>
    </div>
  </div>
</template>

<script>
export default {
  props:{
    options:{
      type: Array,
      required: true
    },
    tabindex:{
      type: Number,
      required: false,
      default: 0
    }
  },
  data() {
    return {
      selected: this.options.length > 0 ? this.options[0] : null,
      open: false
    };
  },
  mounted(){
    this.$emit('input', this.selected);
  }
};
</script>

<style scoped>

.custom-select {
  position: relative;
  width: 100`%;
  text-align: left;
  outline: none;
  height: 47px;
  line-height: 47px;
}

.selected {
  background-color: #080D0E;
  border-radius: 6px;
  border: 1px solid #858586;
  color: #ffffff;
  padding-left: 8px;
  cursor: pointer;
  user-select: none;
}

.selected.open{
  border: 1px solid #CE9B2C;
  border-radius: 6px 6px 0px 0px;
}

.selected:after {
  position: absolute;
  content: "";
  top: 22px;
  right: 10px;
  width: 0;
  height: 0;
  border: 4px solid transparent;
  border-color: #fff transparent transparent transparent;
}

.items {
  color: #ffffff;
  border-radius: 0px 0px 6px 6px;
  overflow: hidden;
  border-right: 1px solid #CE9B2C;
  border-left: 1px solid #CE9B2C;
  border-bottom: 1px solid #CE9B2C;
  position: absolute;
  background-color: #080D0E;
  left: 0;
  right: 0;
}

.item{
  color: #ffffff;
  padding-left: 8px;
  cursor: pointer;
  user-select: none;
}

.item:hover{
  background-color: #B68A28;
}

.selectHide {
  display: none;
}
</style>
)
code(Var)
return

::pwa::
Var =
(
cnpm i @vue/cli-plugin-pwa register-service-worker -S
---
/* vue.config.js */
module.exports = {
    pwa: {
        name: 'my-pwa-app',
        workboxPluginMode: 'InjectManifest',
        workboxOptions: {
            swSrc: 'src/service-worker.js'
        }
    }
}
---
/**
 * 哪怕一切顺利正常，用户的首次访问也不会生成缓存？ 这是正常的。官方解释原因如下：
 * 简而言之： 首次 service worker 注册需要一定的时间，如果你为了缓存而在首次加载就等待注册完成，再进行页面再进行缓存的话，那用户体验会非常差。得不偿失。
 * 所以首次访问你不应该等待 service worker 注册，而是让它异步自动注册，注册成功后，第二次访问再让它进行缓存即可。
 * https://developers.google.com/web/fundamentals/primers/service-workers/registration?hl=zh-cn#用户的首次访问
 */


// 强制等待中的 Service Worker 被激活
workbox.core.skipWaiting()

// Service Worker 被激活后使其立即获得页面控制权
workbox.core.clientsClaim()

// 设置预加载
workbox.precaching.precacheAndRoute(self.__precacheManifest || [])

self.addEventListener('message', event => {
    if (event.data.action == 'SKIP_WAITING') {
        console.log('SKIP_WAITING ✍️✍️✍️✍️✍️✍️')
        self.registration.unregister()
        self.skipWaiting()
    }
})

/**
 * 以上都是固定套路，我也不是很了解 ...
 *
 * https://zhuanlan.zhihu.com/p/67931226
 * https://blog.csdn.net/cream66/article/details/107367026/
 * https://blog.csdn.net/lecepin/article/details/86251301
 * https://www.imooc.com/article/40432
 */

workbox.routing.registerRoute(
    // 回调函数匹配，适合调试
    ({ url, event }) => url.href.includes('newsapi.org'),
    // 策略：网络优先
    new workbox.strategies.NetworkFirst({
        cacheName: 'newsapi',
        method: 'GET',
        // 缓存限制
        plugins: [new workbox.expiration.Plugin({ maxEntries: 100 })],
        // 只缓存 200
        cacheableResponse: { status: [0, 200] },
        // 支持跨域（不使用这个似乎也无所谓）
        fetchOptions: { credentials: 'include' },
    })
`)

workbox.routing.registerRoute(
    // 回调函数匹配，适合调试
    ({ url, event }) => url.href.includes('bdimg.com/tile'),
    // 策略：同时从缓存和网络请求资源。如果缓存可用，策略将响应缓存版本，否则等待网络响应。每一次网络请求成功后，会更新缓存。
    new workbox.strategies.StaleWhileRevalidate({
        cacheName: 'tile',
        method: 'GET',
        // 缓存限制
        plugins: [new workbox.expiration.Plugin({ maxEntries: 1993100337 })],
        // 只缓存 200
        cacheableResponse: { status: [0, 200] },
        // 支持跨域（不使用这个似乎也无所谓）
        fetchOptions: { credentials: 'include' },
    })
`)

workbox.routing.registerRoute(
    // 回调函数匹配，适合调试
    ({ url, event }) => url.href.includes('api.map.baidu.com/api'),
    // 策略：同时从缓存和网络请求资源。如果缓存可用，策略将响应缓存版本，否则等待网络响应。每一次网络请求成功后，会更新缓存。
    new workbox.strategies.StaleWhileRevalidate({
        cacheName: 'baiduAPI',
        method: 'GET',
        // 缓存限制
        plugins: [new workbox.expiration.Plugin({ maxEntries: 1 })],
        // 只缓存 200
        cacheableResponse: { status: [0, 200] },
        // 支持跨域（不使用这个似乎也无所谓）
        fetchOptions: { credentials: 'include' },
    })
`)
---
import { register } from 'register-service-worker'

if (process.env.NODE_ENV === 'production') {
    register(`${process.env.BASE_URL}service-worker.js`, {
        ready() {
            console.log('App is being served from cache by a service worker.\n' + 'For more details, visit https://goo.gl/AFskqB')
        },
        registered() {
            console.log('Service worker has been registered.')
        },
        cached() {
            console.log('Content has been cached for offline use.')
        },
        updatefound() {
            console.log('New content is downloading.')
        },
        updated(registration) {
            console.log('☀️☀️updated☀️☀️', 'New content is available; please refresh.')
            if (window.confirm('A new version is available, update now?')) {
                const worker = registration.waiting
                worker.postMessage({ action: 'SKIP_WAITING' })
            }
        },
        offline() {
            console.log('No internet connection found. App is running in offline mode.')
        },
        error(error) {
            console.error('Error during service worker registration:', error)
        },
    })
}
---
/* main.js */
import './registerServiceWorker'
)
txtit(Var)
return



::vueapi::
::vue.api::
::vue3::
::vue3.init::
::vue.init2::
::vue.init3::
InputBox, OutputVar, title, enter a name?,,,,,,,,test
t := A_YYYY . A_MM . A_DD . A_Hour . A_Min . A_Sec
Var =
(
<template>
  <div class="%OutputVar%">
    <h1 ref='el'>{{ msg }}</h1>
    {{ state.count }} doulbe is {{ double }}
    <input type="button" value='+' @click='inc' />
  </div>
</template>

<script>
import { useStore } from "vuex"
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from 'vue'

export default {
  name: '%OutputVar%',

  // 注意：setup 没有 this
  setup(props, { attrs, slots, emit }) {
    // props
    console.log(%t%, props.msg)

    // store
    let store = useStore()
    // store.state
    let count = computed(() => store.state.count)
    // store.commit
    let inc = () => store.commit('inc')

    // data
    //🔔 请注意，template 中是以 {{ state.count }} 来使用的，如果想直接使用 {{ count }} ，请使用 ref 来创建
    // 同时又要注意，ref 创建的状态，在 JavaScript 访问时，必须使用 count.value 多一层。
    let state = reactive({ count: 0 })

    // computed
    let double = computed(() => state.count * 2)

    // method
    let inc = () => ++state.count

    // watch
    watch(() => state.count, (newV, oldV) => console.log(newV, oldV), { immediate: true, deep: true })

    // $refs
    let el = ref(null)

    // mounted
    onMounted(() => {
      // $refs 只有在 onMounted 才能使用。
      let dom = el.value
      // 修改标题顔色
      dom.style.color = 'blue'
    })

    return { state, double, inc, el, count, inc }
  }
}
</script>

<style scoped lang="scss">
.%OutputVar% {
    
}
</style>
)
code(Var)
return

::vue2api::
::vue2composition::
Var =
(
/**
 * 安裝依赖：$ npm i -S @vue/composition-api
 *
 * main.js
 * 
 * import VueCompositionApi from '@vue/composition-api'
 * Vue.use(VueCompositionApi) 
 */
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from '@vue/composition-api'
)
code(Var)
return

::vue3.extend::
::vue3.loading::
::vue3.msg::
::vue3.message::
::vue3.msgbox::
Var =
(
import { createVNode, render, isVNode } from 'vue'
import Constructor from './index.vue'

const Loading = function (options = {}) {
    const container = document.createElement('div')

    // createVNode 的第三个参数，可以嵌套一个子 VNode
    // 譬如这样：isVNode(options.message) ? { default: () => options.message } : null
    // 但我也不知道如何使用，先记录一下稍后再试。有可能只是 slot。
    const vm = createVNode(Constructor, options, null)

    // 挂载到 DOM
    render(vm, container)

    // 熟悉味道，插入 DOM 中
    document.body.appendChild(container)

    // 由于我组件中的方法是使用 setup 暴漏的，所以采用 vm.component.setupState 的方式访问。
    const setupState = vm.component.setupState

    return { 
        show: () => setupState.show(), 
        hide: () => setupState.hide(),
        setText: v => setupState.setText(v),
    }
}

/**
 * 注册方法：
 * import Loading from "@/components/Loading"
 * app.use(Loading)
 * 
 * 使用方法：
 * this.$loading.show()
 * this.$loading.hide()
 */
export default (app) => {
    // 如果你希望你的组件是像 toast 类，执行一次就往页面插入一个的场景（类似工厂函数）
    // 那你应该暴漏一个工厂方法给全局去使用，譬如： 
    // app.config.globalProperties.$loading = Loading
    // this.$loading({ ... }) // ▶ 插入第 1 个 loading...
    // this.$loading({ ... }) // ▶ 插入第 2 个 loading...
    // this.$loading({ ... }) // ▶ 插入第 3 个 loading...
    // 最佳实践，参考地址：https://github.com/element-plus/element-plus/blob/dev/packages/notification/src/notify.ts

    // 创建一个 loading 全局组件
    const $loading = Loading()
    
    // 将对象挂载到全局
    app.config.globalProperties.$loading = $loading
}
---
<template>
    <div class="loading" v-if='state.isShow'>
        <div class='loading__img'><img src="@/assets/loading.svg" alt="loading..."></div>
        <div class='loading__text'>{{ state.txt }}</div>
    </div>
</template>

<script>
import { watch, watchEffect, ref, onMounted, onUnmounted, reactive, toRefs, computed } from 'vue'

export default {
  name: 'test',
  props: {
    text: {type: String, default: 'loading...'},
  },
  setup(props) {
    let state = reactive({ isShow: true, txt: props.text })
    let show = () => state.isShow = true
    let hide = () => state.isShow = false
    let setText = txt => state.txt = txt
    return { state, show, hide, setText }
  }
}
</script>

<style scoped lang="scss">
.loading {
    @include flex(c, c, c);
    position: absolute; top: 0; right: 0; bottom: 0; left: 0; 
    z-index: 1993100337;
    background: rgba(0, 0, 0, .3);

    &__text {
        color: #fff;
        font-size: 1.5em;
    }

    &__img {
        width: 118px;
        height: 128px;
    }
}
</style>
)
txtit(Var)
return

::keep::
::keep-alive::
Var =
(
<keep-alive include="overallSituation,townStreet">
    <router-view class='view' />
</keep-alive>
)
code(Var)
return

::vue-prop::
::vue.type::
::vue-type::
::props.type::
::prop.type::
::props-type::
::prop-type::
::prop.vue::
::props-vue::
::props.vue::
Var =
(
import isPlainObject from 'lodash-es/isPlainObject';
import { toType, getType, isFunction, validateType, isInteger, isArray, warn } from './utils';

const VuePropTypes = {
  get any() {
    return toType('any', {
      type: null,
    });
  },

  get func() {
    return toType('function', {
      type: Function,
    }).def(currentDefaults.func);
  },

  get bool() {
    return toType('boolean', {
      type: Boolean,
    }).def(currentDefaults.bool);
  },

  get string() {
    return toType('string', {
      type: String,
    }).def(currentDefaults.string);
  },

  get number() {
    return toType('number', {
      type: Number,
    }).def(currentDefaults.number);
  },

  get array() {
    return toType('array', {
      type: Array,
    }).def(currentDefaults.array);
  },

  get object() {
    return toType('object', {
      type: Object,
    }).def(currentDefaults.object);
  },

  get integer() {
    return toType('integer', {
      type: Number,
      validator(value) {
        return isInteger(value);
      },
    }).def(currentDefaults.integer);
  },

  get symbol() {
    return toType('symbol', {
      type: null,
      validator(value) {
        return typeof value === 'symbol';
      },
    });
  },

  custom(validatorFn, warnMsg = 'custom validation failed') {
    if (typeof validatorFn !== 'function') {
      throw new TypeError('[VueTypes error]: You must provide a function as argument');
    }

    return toType(validatorFn.name || '<<anonymous function>>', {
      validator(...args) {
        const valid = validatorFn(...args);
        if (!valid) warn(`${this._vueTypes_name} - ${warnMsg}`);
        return valid;
      },
    });
  },

  oneOf(arr) {
    if (!isArray(arr)) {
      throw new TypeError('[VueTypes error]: You must provide an array as argument');
    }
    const msg = `oneOf - value should be one of "${arr.join('", "')}"`;
    const allowedTypes = arr.reduce((ret, v) => {
      if (v !== null && v !== undefined) {
        ret.indexOf(v.constructor) === -1 && ret.push(v.constructor);
      }
      return ret;
    }, []);

    return toType('oneOf', {
      type: allowedTypes.length > 0 ? allowedTypes : null,
      validator(value) {
        const valid = arr.indexOf(value) !== -1;
        if (!valid) warn(msg);
        return valid;
      },
    });
  },

  instanceOf(instanceConstructor) {
    return toType('instanceOf', {
      type: instanceConstructor,
    });
  },

  oneOfType(arr) {
    if (!isArray(arr)) {
      throw new TypeError('[VueTypes error]: You must provide an array as argument');
    }

    let hasCustomValidators = false;

    const nativeChecks = arr.reduce((ret, type) => {
      if (isPlainObject(type)) {
        if (type._vueTypes_name === 'oneOf') {
          return ret.concat(type.type || []);
        }
        if (type.type && !isFunction(type.validator)) {
          if (isArray(type.type)) return ret.concat(type.type);
          ret.push(type.type);
        } else if (isFunction(type.validator)) {
          hasCustomValidators = true;
        }
        return ret;
      }
      ret.push(type);
      return ret;
    }, []);

    if (!hasCustomValidators) {
      // we got just native objects (ie: Array, Object)
      // delegate to Vue native prop check
      return toType('oneOfType', {
        type: nativeChecks,
      }).def(undefined);
    }

    const typesStr = arr
      .map(type => {
        if (type && isArray(type.type)) {
          return type.type.map(getType);
        }
        return getType(type);
      })
      .reduce((ret, type) => ret.concat(isArray(type) ? type : [type]), [])
      .join('", "');

    return this.custom(function oneOfType(value) {
      const valid = arr.some(type => {
        if (type._vueTypes_name === 'oneOf') {
          return type.type ? validateType(type.type, value, true) : true;
        }
        return validateType(type, value, true);
      });
      if (!valid) warn(`oneOfType - value type should be one of "${typesStr}"`);
      return valid;
    }).def(undefined);
  },

  arrayOf(type) {
    return toType('arrayOf', {
      type: Array,
      validator(values) {
        const valid = values.every(value => validateType(type, value));
        if (!valid) warn(`arrayOf - value must be an array of "${getType(type)}"`);
        return valid;
      },
    });
  },

  objectOf(type) {
    return toType('objectOf', {
      type: Object,
      validator(obj) {
        const valid = Object.keys(obj).every(key => validateType(type, obj[key]));
        if (!valid) warn(`objectOf - value must be an object of "${getType(type)}"`);
        return valid;
      },
    });
  },

  shape(obj) {
    const keys = Object.keys(obj);
    const requiredKeys = keys.filter(key => obj[key] && obj[key].required === true);

    const type = toType('shape', {
      type: Object,
      validator(value) {
        if (!isPlainObject(value)) {
          return false;
        }
        const valueKeys = Object.keys(value);

        // check for required keys (if any)
        if (requiredKeys.length > 0 && requiredKeys.some(req => valueKeys.indexOf(req) === -1)) {
          warn(`shape - at least one of required properties "${requiredKeys.join('", "', )}" is not present`);
          return false;
        }

        return valueKeys.every(key => {
          if (keys.indexOf(key) === -1) {
            if (this._vueTypes_isLoose === true) return true;
            warn(`shape - object is missing "${key}" property`);
            return false;
          }
          const type = obj[key];
          return validateType(type, value[key]);
        });
      },
    });

    Object.defineProperty(type, '_vueTypes_isLoose', {
      enumerable: false,
      writable: true,
      value: false,
    });

    Object.defineProperty(type, 'loose', {
      get() {
        this._vueTypes_isLoose = true;
        return this;
      },
      enumerable: false,
    });

    return type;
  },
};

const typeDefaults = () => ({
  func: undefined,
  bool: undefined,
  string: undefined,
  number: undefined,
  array: undefined,
  object: undefined,
  integer: undefined,
});

let currentDefaults = typeDefaults();

Object.defineProperty(VuePropTypes, 'sensibleDefaults', {
  enumerable: false,
  set(value) {
    if (value === false) {
      currentDefaults = {};
    } else if (value === true) {
      currentDefaults = typeDefaults();
    } else if (isPlainObject(value)) {
      currentDefaults = value;
    }
  },
  get() {
    return currentDefaults;
  },
});

export default VuePropTypes;
---
import isPlainObject from 'lodash-es/isPlainObject';

const ObjProto = Object.prototype;
const toString = ObjProto.toString;
export const hasOwn = ObjProto.hasOwnProperty;

const FN_MATCH_REGEXP = /^\s*function (\w+)/;

// https://github.com/vuejs/vue/blob/dev/src/core/util/props.js#L159
export const getType = fn => {
  const type = fn !== null && fn !== undefined ? (fn.type ? fn.type : fn) : null;
  const match = type && type.toString().match(FN_MATCH_REGEXP);
  return match && match[1];
};

export const getNativeType = value => {
  if (value === null || value === undefined) return null;
  const match = value.constructor.toString().match(FN_MATCH_REGEXP);
  return match && match[1];
};

/**
 * No-op function
 */
export const noop = () => {};

/**
 * Checks for a own property in an object
 *
 * @param {object} obj - Object
 * @param {string} prop - Property to check
 */
export const has = (obj, prop) => hasOwn.call(obj, prop);

/**
 * Determines whether the passed value is an integer. Uses `Number.isInteger` if available
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger
 * @param {*} value - The value to be tested for being an integer.
 * @returns {boolean}
 */
export const isInteger =
  Number.isInteger ||
  function(value) {
    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;
  };

/**
 * Determines whether the passed value is an Array.
 *
 * @param {*} value - The value to be tested for being an array.
 * @returns {boolean}
 */
export const isArray =
  Array.isArray ||
  function(value) {
    return toString.call(value) === '[object Array]';
  };

/**
 * Checks if a value is a function
 *
 * @param {any} value - Value to check
 * @returns {boolean}
 */
export const isFunction = value => toString.call(value) === '[object Function]';

/**
 * Adds a `def` method to the object returning a new object with passed in argument as `default` property
 *
 * @param {object} type - Object to enhance
 */
export const withDefault = function(type) {
  Object.defineProperty(type, 'def', {
    value(def) {
      if (def === undefined && this.default === undefined) {
        this.default = undefined;
        return this;
      }
      if (!isFunction(def) && !validateType(this, def)) {
        warn(`${this._vueTypes_name} - invalid default value: "${def}"`, def);
        return this;
      }
      this.default =
        isArray(def) || isPlainObject(def)
          ? function() {
              return def;
            }
          : def;

      return this;
    },
    enumerable: false,
    writable: false,
  });
};

/**
 * Adds a `isRequired` getter returning a new object with `required: true` key-value
 *
 * @param {object} type - Object to enhance
 */
export const withRequired = function(type) {
  Object.defineProperty(type, 'isRequired', {
    get() {
      this.required = true;
      return this;
    },
    enumerable: false,
  });
};

/**
 * Adds `isRequired` and `def` modifiers to an object
 *
 * @param {string} name - Type internal name
 * @param {object} obj - Object to enhance
 * @returns {object}
 */
export const toType = (name, obj) => {
  Object.defineProperty(obj, '_vueTypes_name', {
    enumerable: false,
    writable: false,
    value: name,
  });
  withRequired(obj);
  withDefault(obj);

  if (isFunction(obj.validator)) {
    obj.validator = obj.validator.bind(obj);
  }
  return obj;
};

/**
 * Validates a given value against a prop type object
 *
 * @param {Object|*} type - Type to use for validation. Either a type object or a constructor
 * @param {*} value - Value to check
 * @param {boolean} silent - Silence warnings
 * @returns {boolean}
 */
export const validateType = (type, value, silent = false) => {
  let typeToCheck = type;
  let valid = true;
  let expectedType;
  if (!isPlainObject(type)) {
    typeToCheck = { type };
  }
  const namePrefix = typeToCheck._vueTypes_name ? typeToCheck._vueTypes_name + ' - ' : '';

  if (hasOwn.call(typeToCheck, 'type') && typeToCheck.type !== null) {
    if (isArray(typeToCheck.type)) {
      valid = typeToCheck.type.some(type => validateType(type, value, true));
      expectedType = typeToCheck.type.map(type => getType(type)).join(' or ');
    } else {
      expectedType = getType(typeToCheck);

      if (expectedType === 'Array') {
        valid = isArray(value);
      } else if (expectedType === 'Object') {
        valid = isPlainObject(value);
      } else if (
        expectedType === 'String' ||
        expectedType === 'Number' ||
        expectedType === 'Boolean' ||
        expectedType === 'Function'
      `) {
        valid = getNativeType(value) === expectedType;
      } else {
        valid = value instanceof typeToCheck.type;
      }
    }
  }

  if (!valid) {
    silent === false && warn(`${namePrefix}value "${value}" should be of type "${expectedType}"`);
    return false;
  }

  if (hasOwn.call(typeToCheck, 'validator') && isFunction(typeToCheck.validator)) {
    valid = typeToCheck.validator(value);
    if (!valid && silent === false) warn(`${namePrefix}custom validation failed`);
    return valid;
  }
  return valid;
};

let warn = noop;

if (process.env.NODE_ENV !== 'production') {
  const hasConsole = typeof console !== 'undefined';
  warn = msg => {
    if (hasConsole) {
      console.warn(`[VueTypes warn]: ${msg}`);
    }
  };
}

export { warn };
)
txtit(Var)
return

::vue.state::
::vue.setstate::
::setstate::
Var =
(
export default {
    methods: {
      async setState(state, callback) {
        // 支持第一个参数为函数形式
        let newState = typeof state === 'function' ? state(this, this.$props) : state
        // 更新状态
        Object.assign(this, newState)
        // 强制更新不存在的状态，类似 this.$set 的作用
        this.$forceUpdate()
        // 等待渲染帧
        await this.$nextTick()
        // 兼容函数和promise的回调
        return callback ? callback(this.$data) : Promise.resolve(this.$data)
      },
    },
}
---
import baseMixins from '@/mixins/baseMixins'

// app.vue
export default {
    name: 'app',
    mixins: [baseMixins],
}
)
txtit(Var)  
return

::vuetest::
Var =
(
// https://vue-test-utils.vuejs.org/zh/api/wrapper/#contains
// https://jestjs.io/docs/en/expect
import { shallowMount } from '@vue/test-utils'
import Item from "@/components/Item.vue"

beforeEach(() => {
    console.log = () => {}
})

describe('Item.vue', () => {
    test('base test', () => {
        const wrapper = shallowMount(Item)
        expect(wrapper.text()).toContain('Item')
    })
})


)
txtit(Var)
return

::jest.init::
::jestinit::
::initjest::
::init.jest::
::jest::
:?:vue.t::
:?:vue.test::
Var =
(
describe('base test', () => {
    test('first test', () => {
        return
    })
})

/* http://caibaojian.com/scb/jest.html */
// @@Basic expectations
expect(value)
  .not
  .toBe(value)
  .toEqual(value)
  .toBeTruthy()

// @@Booleans
expect(value)
  .toBeFalsy()
  .toBeNull()
  .toBeTruthy()
  .toBeUndefined()
  .toBeDefined()

// @@object
expect(value)
  .toBeInstanceOf(Class)
  .toMatchObject(object)
  .toHaveProperty(keyPath, value)

// @@object
expect(value)
  .toContain(item)
  .toContainEqual(item)
  .toHaveLength(number)

// @@number 
 expect(value)
  .toBeCloseTo(number, numDigits)
  .toBeGreaterThan(number)
  .toBeGreaterThanOrEqual(number)
  .toBeLessThan(number)
  .toBeLessThanOrEqual(number)

// @@regex
expect(value)
  .toMatch(regexpOrString)

// @@setup hook
beforeEach(() => { ... })
afterEach(() => { ... })
beforeAll(() => { ... })
afterAll(() => { ... })
---
import { shallowMount } from '@vue/test-utils'
import ProgressBar from '../ProgressBar.vue'

describe('ProgressBar.vue', () => {
    test('init with 0`% width', () => {
        const wrapper = shallowMount(ProgressBar)
        // 知识点：验证样式（极少用）
        expect(wrapper.element.style.width).toBe('0`%')
        // 知识点：验证类
        expect(wrapper.classes()).toContain('hidden')
    })
})
---
// src/components/__tests__/Item.spec.js

import { shallowMount } from '@vue/test-utils'
import Item from '../Item.vue'

beforeEach(() => {
  jest.useFakeTimers()
})

describe('Item.vue', () => {
  test('base test', () => {
      const item = { url: 'http://www.baidu.com', title: 'baidu' }

      const wrapper = shallowMount(Item, {
          propsData: { item }
      })

      // # find()
      const a = wrapper.find('a')

      // # text()
      expect(a.text()).toContain(item.title)

      // # attributes()
      expect(a.attributes().href).toBe(item.url)

      // # props()
      expect(wrapper.props().item.url).toBe(item.url)

      // # classes()
      expect(wrapper.classes()).toContain('Item')

      // # element.style（必须是内敛样式而不是 css）
      expect(wrapper.element.style.width).toBe('100`%')

      // # not
      expect(wrapper.classes()).not.toContain('hide')

      // # 结合 jest.useFakeTimers() 推进 timer
      jest.runTimersToTime(1000)

      // # 测试 @onClick 与 this.$emit('onClick')
      expect(wrapper.emitted('onClick')).toHaveLength(1)
  })

  test('base test', () => {
      const items = [{}, {}, {}]

      const wrapper = shallowMount(Items, {
          props: {items }
      })

      // # findAllComponents(Item)
      // or: expect(wrapper.findAllComponents(Item)).toHaveLength(items.length)
      expect(wrapper.findAllComponents(Item).length).toBe(items.length)
  })
})
---
describe('Item.vue', () => {
    test('base test', () => {
        const item = { url: 'http://www.baidu.com', title: 'baidu' }

        // 间谍函数
        const $bar = { start: jest.fn() }

        const wrapper = shallowMount(Item, {
            propsData: { item },
            // 通过 mocks 定义组件的上下文，通常是 $route、 $store 这些重要的内容
            mocks: { $bar }
        })

        // trigger 触发 DOM 事件
        wrapper.find('a').trigger('click')

        // toHaveBeenCalledTimes(n) / toHaveBeenCalled()
        expect($bar.start).toHaveBeenCalledTimes(1)
    })
})
---
// https://vue-test-utils.vuejs.org/zh/api/wrapper/#contains
// https://jestjs.io/docs/en/expect
import flushPromises from "flush-promises"
import { shallowMount } from '@vue/test-utils'
import Items from "../Items.vue"
import Item from "../Item.vue"
import { fetchData } from "@/apis/apis"

// src/apis/__mocks__/apis.js
jest.mock('@/apis/apis.js')

describe('Items.vue', () => {
    test('base test', async () => {
        const items = [{}, {}, {}]
        // mock
        fetchData.mockResolvedValueOnce(items)

        const wrapper = shallowMount(Items)
        await flushPromises()

        const lists = wrapper.findAllComponents(Item)
        expect(lists).toHaveLength(items.length)
    })
})
---
import Vuex from "vuex"
import { createLocalVue, shallowMount } from '@vue/test-utils'
import Item from "../Item.vue";

const localVue = createLocalVue()
localVue.use(Vuex)

describe('Item.vue', () => {
    let store;
    
    beforeEach(() => {
        store = new Vuex.Store()
        store.dispatch = jest.fn()
    })
    
    afterEach(() => {
        store = null
    })

    test('base test', () => {
        const item = { url: 'http://www.baidu.com', title: 'baidu' }

        const wrapper = shallowMount(Item, {
            store, 
            localVue,
            propsData: { item }
        })

        wrapper.find('a').trigger('click')

        // ...mapActions(['addPost'])
        // this.addPost(item)
        expect(store.dispatch).toHaveBeenCalledWith('addPost', item)
    })
})
)
txtit(Var)
return


::vuet::
Var =
(
import { shallowMount } from '@vue/test-utils'
import Item from "../Item.vue"

beforeEach(() => {
    // console.log = () => {}
})

describe('Item.vue', () => {
    test('base test', () => {
        const wrapper = shallowMount(Item)
        expect(wrapper.text()).toContain('Item')
    })
})
)
code(Var)
return

::zujian::
Var =
(
import Vue from 'vue'
import card from './pointCard.vue'

// 活跃作业点: clockIn   
// 打卡作业点: lively 
export const cardFactory = (type = 'lively', history = [], item = {}) => {
    const cardConstructor = Vue.extend(card)
    return new cardConstructor({
        el: document.createElement('div'),
        propsData: { type, history, item }
    })
}
---
import store from "@/store"
import { waitWhen } from "@/utils/utils"

import pctable1 from './pctable1.vue'
import pctable2 from './pctable2.vue'
import pctable3 from './pctable3.vue'

// 你当然也可以用动态引入来注册 - require.context
const tables = { pctable1, pctable2, pctable3 }

export const register = Vue => {
    // 实例大集合
    const $targets = []

    for (let [key, val] of Object.entries(tables)) {
        // 挂载组件
        const $target = new Vue(val).$mount()
        // 注入 store，如果你想注入 router 也是一样的道理
        $target.$store = store
        // 使用 $ 为前缀的命名，譬如 window.$table1、 this.$table1
        const $name = '$' + key
        // 注册到全局和 Vue 实例中去
        window[$name] = Vue.prototype[$name] = $target
        // 插入到数组中，稍后等时机成熟再插入到 DOM body 中
        $targets.push($target)
    }

    waitWhen(() => document.getElementById('pcMap')).then(container => {
        $targets.map($target => container.appendChild($target.$el))
    }, 10000)
}
)
txtit(Var)
return

::test101::
Var =
(
// components/__tests__/Item.spec.js
import { shallowMount } from '@vue/test-utils'
import Item from "../Item.vue"

beforeEach(() => {

})

describe('Item.vue', () => {
    test('base test', () => {
        const wrapper = shallowMount(Item)
        expect(wrapper.text()).toContain('Item')
    })
})
)
code(Var)
return


::/deep::
::/deep/::
Var =
(
::v-deep .username {
	.label {
	
	}
}
)
code(Var)
return

::v-drop::
::v-drag::
::v-dop::
Var =
(
// Vue.directive('draggable', draggable)
const draggable = {
  inserted: function (el) {
    el.style.cursor = 'move'
    el.onmousedown = function (e) {
      let disx = e.pageX - el.offsetLeft
      let disy = e.pageY - el.offsetTop
      document.onmousemove = function (e) {
        let x = e.pageX - disx
        let y = e.pageY - disy
        let maxX = document.body.clientWidth - parseInt(window.getComputedStyle(el).width)
        let maxY = document.body.clientHeight - parseInt(window.getComputedStyle(el).height)
        if (x < 0) {
          x = 0
        } else if (x > maxX) {
          x = maxX
        }

        if (y < 0) {
          y = 0
        } else if (y > maxY) {
          y = maxY
        }

        el.style.left = x + 'px'
        el.style.top = y + 'px'
      }
      document.onmouseup = function () {
        document.onmousemove = document.onmouseup = null
      }
    }
  },
}

export default draggable
---
<template>
  <div class="el-dialog" v-draggable></div>
</template>
)
txtit(Var)
return

::v-model::
::vmodel::
Var =
(
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.js"></script>
</head>

<body>
    <div id="app">
        <test v-model='title'></test>
        {{ title }}
    </div>
</body>
<script>

const testConstructor = Vue.extend({
    template: `
      <div class="test">
        <button @click='go'>go</button>
      </div>
    `,
    props: ['value'],
    methods: {
      go (v) {
        this.$emit('input', this.value + 1)
      }
  },
})

Vue.component('test', testConstructor)

var vue = new Vue({
    el: '#app',
    data () {
    return {
        title: 'HelloWorld'
    }
  },
})
</script>
</html>
)
txtit(Var)
return

::vue.ob::
::ob::
Var =
(
Observable
vue.Observable
)
code(Var)
return

::v-bind::
Var =
(
 v-bind='{ ...$attrs, ...$props }'
)
code(Var)
return

::scrolltext::
Var =
(
<template>
  <div class="scrollText" ref="scrollText">
    <slot></slot>
  </div>
</template> 

<script>
export default {
  name: 'scrollText',
  mounted() {
    const el = this.$refs.scrollText

        let timer = null

    function scrollText1() {
      // 到底了
      if ((el.scrollWidth - el.scrollLeft).toFixed(0) - el.clientWidth === 0) {
        timer = setTimeout(scrollText2, 2500)
      } else {
        // 滚动
        el.scrollTo(el.scrollLeft + 1, 0)
        // 帧动画
        timer = setTimeout(scrollText1, 1000 / 60)
      }
    }

    function scrollText2() {
      // 到底了
      if (el.scrollLeft === 0) {
        timer = setTimeout(scrollText1, 2500)
      } else {
        // 滚动
        el.scrollTo(el.scrollLeft - 1, 0)
        // 帧动画
        timer = setTimeout(scrollText2, 1000 / 35)
      }
    }

    scrollText1(el)

        // 组件销毁时，清空播放列表
        this.$on('hook:destroyed', () => clearTimeout(timer))
  },
}
</script>

<style lang="scss" scoped>
.scrollText {
    overflow: hidden;
    white-space: nowrap;
}
</style>
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Vue -->
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.min.js"></script>
    <!-- jquery -->
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>

    <style>
    html, body{
        margin: 50px;
        padding: 50px;
    }

    #app {
    }

    .text {
        width: 100px;
        overflow: hidden;
        white-space: nowrap;
    }
    </style>
</head>

<body>
    <div id="app">
        <div class='text'>国家统计局东莞调查队</div>
    </div>
</body>
<script>

const el = document.querySelector('.text')

function scrollText1() {
    // 到底了
    if ((el.scrollWidth - el.scrollLeft).toFixed(0) - el.clientWidth === 0) {
        setTimeout(scrollText2, 2500);
    } else {
        // 滚动
        el.scrollTo(el.scrollLeft + 1, 0)
        // 帧动画
        setTimeout(scrollText1, 1000 / 60);
    }
}

function scrollText2() {
    // 到底了
    if (el.scrollLeft === 0) {
        setTimeout(scrollText1, 2500);
    } else {
        // 滚动
        el.scrollTo(el.scrollLeft - 1, 0)
        // 帧动画
        setTimeout(scrollText2, 1000 / 35);
    }
}

scrollText1();

</script>
</html>
---
<template>
  <div class="scrollText" ref="scrollText">
    <slot></slot>
  </div>
</template> 

<script>
export default {
  name: 'scrollText',
  mounted() {
    const el = this.$refs.scrollText

    function scrollText1() {
      // 到底了
      if ((el.scrollWidth - el.scrollLeft).toFixed(0) - el.clientWidth === 0) {
        setTimeout(scrollText2, 2500)
      } else {
        // 滚动
        el.scrollTo(el.scrollLeft + 1, 0)
        // 帧动画
        setTimeout(scrollText1, 1000 / 60)
      }
    }

    function scrollText2() {
      // 到底了
      if (el.scrollLeft === 0) {
        setTimeout(scrollText1, 2500)
      } else {
        // 滚动
        el.scrollTo(el.scrollLeft - 1, 0)
        // 帧动画
        setTimeout(scrollText2, 1000 / 35)
      }
    }

    scrollText1(el)
  },
}
</script>

<style lang="scss" scoped>
.scrollText {
    overflow: hidden;
    white-space: nowrap;
}
</style>
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Vue -->
    <script src="https://cdn.staticfile.org/vue/2.6.9/vue.min.js"></script>
    <!-- jquery -->
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>

    <style>
    html, body{
        margin: 50px;
        padding: 50px;
    }

    #app {
    }

    .text {
        width: 100px;
        overflow: hidden;
        white-space: nowrap;
    }
    </style>
</head>

<body>
    <div id="app">
        <div class='text'>国家统计局东莞调查队</div>
    </div>
</body>
<script>

const el = document.querySelector('.text')

function scrollText1() {
    // 到底了
    if ((el.scrollWidth - el.scrollLeft).toFixed(0) - el.clientWidth === 0) {
        setTimeout(scrollText2, 2500);
    } else {
        // 滚动
        el.scrollTo(el.scrollLeft + 1, 0)
        // 帧动画
        setTimeout(scrollText1, 1000 / 60);
    }
}

function scrollText2() {
    // 到底了
    if (el.scrollLeft === 0) {
        setTimeout(scrollText1, 2500);
    } else {
        // 滚动
        el.scrollTo(el.scrollLeft - 1, 0)
        // 帧动画
        setTimeout(scrollText2, 1000 / 35);
    }
}

scrollText1();

</script>
</html>
)
code(Var)
return


::vue.model::
::vue-model::
::vue-input::
::vue.input::
::vueinput::
Var =
(
// Js 修改 input value 值后怎么同步修改绑定的v-model值？
// https://www.cnblogs.com/zhoudawei/p/10901752.html
el.value = value; el.dispatchEvent(new Event('input'))
)
txtit(Var)
return